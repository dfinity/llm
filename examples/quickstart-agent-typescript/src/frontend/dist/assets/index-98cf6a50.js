var _c=Object.defineProperty;var xc=(t,e,r)=>e in t?_c(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r;var Cr=(t,e,r)=>(xc(t,typeof e!="symbol"?e+"":e,r),r),ys=(t,e,r)=>{if(!e.has(t))throw TypeError("Cannot "+r)};var gs=(t,e,r)=>(ys(t,e,"read from private field"),r?r.call(t):e.get(t)),wi=(t,e,r)=>{if(e.has(t))throw TypeError("Cannot add the same private member more than once");e instanceof WeakSet?e.add(t):e.set(t,r)};var an=(t,e,r)=>(ys(t,e,"access private method"),r);(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))n(i);new MutationObserver(i=>{for(const c of i)if(c.type==="childList")for(const l of c.addedNodes)l.tagName==="LINK"&&l.rel==="modulepreload"&&n(l)}).observe(document,{childList:!0,subtree:!0});function r(i){const c={};return i.integrity&&(c.integrity=i.integrity),i.referrerPolicy&&(c.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?c.credentials="include":i.crossOrigin==="anonymous"?c.credentials="omit":c.credentials="same-origin",c}function n(i){if(i.ep)return;i.ep=!0;const c=r(i);fetch(i.href,c)}})();var Rr=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function Ec(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var ao={},Qr={};Qr.byteLength=vc;Qr.toByteArray=Sc;Qr.fromByteArray=Rc;var Rt=[],ft=[],Bc=typeof Uint8Array<"u"?Uint8Array:Array,mi="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/";for(var yr=0,Ac=mi.length;yr<Ac;++yr)Rt[yr]=mi[yr],ft[mi.charCodeAt(yr)]=yr;ft["-".charCodeAt(0)]=62;ft["_".charCodeAt(0)]=63;function co(t){var e=t.length;if(e%4>0)throw new Error("Invalid string. Length must be a multiple of 4");var r=t.indexOf("=");r===-1&&(r=e);var n=r===e?0:4-r%4;return[r,n]}function vc(t){var e=co(t),r=e[0],n=e[1];return(r+n)*3/4-n}function Tc(t,e,r){return(e+r)*3/4-r}function Sc(t){var e,r=co(t),n=r[0],i=r[1],c=new Bc(Tc(t,n,i)),l=0,u=i>0?n-4:n,y;for(y=0;y<u;y+=4)e=ft[t.charCodeAt(y)]<<18|ft[t.charCodeAt(y+1)]<<12|ft[t.charCodeAt(y+2)]<<6|ft[t.charCodeAt(y+3)],c[l++]=e>>16&255,c[l++]=e>>8&255,c[l++]=e&255;return i===2&&(e=ft[t.charCodeAt(y)]<<2|ft[t.charCodeAt(y+1)]>>4,c[l++]=e&255),i===1&&(e=ft[t.charCodeAt(y)]<<10|ft[t.charCodeAt(y+1)]<<4|ft[t.charCodeAt(y+2)]>>2,c[l++]=e>>8&255,c[l++]=e&255),c}function Nc(t){return Rt[t>>18&63]+Rt[t>>12&63]+Rt[t>>6&63]+Rt[t&63]}function Ic(t,e,r){for(var n,i=[],c=e;c<r;c+=3)n=(t[c]<<16&16711680)+(t[c+1]<<8&65280)+(t[c+2]&255),i.push(Nc(n));return i.join("")}function Rc(t){for(var e,r=t.length,n=r%3,i=[],c=16383,l=0,u=r-n;l<u;l+=c)i.push(Ic(t,l,l+c>u?u:l+c));return n===1?(e=t[r-1],i.push(Rt[e>>2]+Rt[e<<4&63]+"==")):n===2&&(e=(t[r-2]<<8)+t[r-1],i.push(Rt[e>>10]+Rt[e>>4&63]+Rt[e<<2&63]+"=")),i.join("")}var Dr={};/*! ieee754. BSD-3-Clause License. Feross Aboukhadijeh <https://feross.org/opensource> */Dr.read=function(t,e,r,n,i){var c,l,u=i*8-n-1,y=(1<<u)-1,_=y>>1,B=-7,N=r?i-1:0,I=r?-1:1,v=t[e+N];for(N+=I,c=v&(1<<-B)-1,v>>=-B,B+=u;B>0;c=c*256+t[e+N],N+=I,B-=8);for(l=c&(1<<-B)-1,c>>=-B,B+=n;B>0;l=l*256+t[e+N],N+=I,B-=8);if(c===0)c=1-_;else{if(c===y)return l?NaN:(v?-1:1)*(1/0);l=l+Math.pow(2,n),c=c-_}return(v?-1:1)*l*Math.pow(2,c-n)};Dr.write=function(t,e,r,n,i,c){var l,u,y,_=c*8-i-1,B=(1<<_)-1,N=B>>1,I=i===23?Math.pow(2,-24)-Math.pow(2,-77):0,v=n?0:c-1,g=n?1:-1,q=e<0||e===0&&1/e<0?1:0;for(e=Math.abs(e),isNaN(e)||e===1/0?(u=isNaN(e)?1:0,l=B):(l=Math.floor(Math.log(e)/Math.LN2),e*(y=Math.pow(2,-l))<1&&(l--,y*=2),l+N>=1?e+=I/y:e+=I*Math.pow(2,1-N),e*y>=2&&(l++,y/=2),l+N>=B?(u=0,l=B):l+N>=1?(u=(e*y-1)*Math.pow(2,i),l=l+N):(u=e*Math.pow(2,N-1)*Math.pow(2,i),l=0));i>=8;t[r+v]=u&255,v+=g,u/=256,i-=8);for(l=l<<i|u,_+=i;_>0;t[r+v]=l&255,v+=g,l/=256,_-=8);t[r+v-g]|=q*128};/*!
 * The buffer module from node.js, for the browser.
 *
 * @author   Feross Aboukhadijeh <https://feross.org>
 * @license  MIT
 */(function(t){const e=Qr,r=Dr,n=typeof Symbol=="function"&&typeof Symbol.for=="function"?Symbol.for("nodejs.util.inspect.custom"):null;t.Buffer=u,t.SlowBuffer=Y,t.INSPECT_MAX_BYTES=50;const i=2147483647;t.kMaxLength=i,u.TYPED_ARRAY_SUPPORT=c(),!u.TYPED_ARRAY_SUPPORT&&typeof console<"u"&&typeof console.error=="function"&&console.error("This browser lacks typed array (Uint8Array) support which is required by `buffer` v5.x. Use `buffer` v4.x if you require old browser support.");function c(){try{const d=new Uint8Array(1),a={foo:function(){return 42}};return Object.setPrototypeOf(a,Uint8Array.prototype),Object.setPrototypeOf(d,a),d.foo()===42}catch{return!1}}Object.defineProperty(u.prototype,"parent",{enumerable:!0,get:function(){if(u.isBuffer(this))return this.buffer}}),Object.defineProperty(u.prototype,"offset",{enumerable:!0,get:function(){if(u.isBuffer(this))return this.byteOffset}});function l(d){if(d>i)throw new RangeError('The value "'+d+'" is invalid for option "size"');const a=new Uint8Array(d);return Object.setPrototypeOf(a,u.prototype),a}function u(d,a,f){if(typeof d=="number"){if(typeof a=="string")throw new TypeError('The "string" argument must be of type string. Received type number');return N(d)}return y(d,a,f)}u.poolSize=8192;function y(d,a,f){if(typeof d=="string")return I(d,a);if(ArrayBuffer.isView(d))return g(d);if(d==null)throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof d);if(V(d,ArrayBuffer)||d&&V(d.buffer,ArrayBuffer)||typeof SharedArrayBuffer<"u"&&(V(d,SharedArrayBuffer)||d&&V(d.buffer,SharedArrayBuffer)))return q(d,a,f);if(typeof d=="number")throw new TypeError('The "value" argument must not be of type number. Received type number');const E=d.valueOf&&d.valueOf();if(E!=null&&E!==d)return u.from(E,a,f);const F=C(d);if(F)return F;if(typeof Symbol<"u"&&Symbol.toPrimitive!=null&&typeof d[Symbol.toPrimitive]=="function")return u.from(d[Symbol.toPrimitive]("string"),a,f);throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof d)}u.from=function(d,a,f){return y(d,a,f)},Object.setPrototypeOf(u.prototype,Uint8Array.prototype),Object.setPrototypeOf(u,Uint8Array);function _(d){if(typeof d!="number")throw new TypeError('"size" argument must be of type number');if(d<0)throw new RangeError('The value "'+d+'" is invalid for option "size"')}function B(d,a,f){return _(d),d<=0?l(d):a!==void 0?typeof f=="string"?l(d).fill(a,f):l(d).fill(a):l(d)}u.alloc=function(d,a,f){return B(d,a,f)};function N(d){return _(d),l(d<0?0:W(d)|0)}u.allocUnsafe=function(d){return N(d)},u.allocUnsafeSlow=function(d){return N(d)};function I(d,a){if((typeof a!="string"||a==="")&&(a="utf8"),!u.isEncoding(a))throw new TypeError("Unknown encoding: "+a);const f=$(d,a)|0;let E=l(f);const F=E.write(d,a);return F!==f&&(E=E.slice(0,F)),E}function v(d){const a=d.length<0?0:W(d.length)|0,f=l(a);for(let E=0;E<a;E+=1)f[E]=d[E]&255;return f}function g(d){if(V(d,Uint8Array)){const a=new Uint8Array(d);return q(a.buffer,a.byteOffset,a.byteLength)}return v(d)}function q(d,a,f){if(a<0||d.byteLength<a)throw new RangeError('"offset" is outside of buffer bounds');if(d.byteLength<a+(f||0))throw new RangeError('"length" is outside of buffer bounds');let E;return a===void 0&&f===void 0?E=new Uint8Array(d):f===void 0?E=new Uint8Array(d,a):E=new Uint8Array(d,a,f),Object.setPrototypeOf(E,u.prototype),E}function C(d){if(u.isBuffer(d)){const a=W(d.length)|0,f=l(a);return f.length===0||d.copy(f,0,0,a),f}if(d.length!==void 0)return typeof d.length!="number"||ne(d.length)?l(0):v(d);if(d.type==="Buffer"&&Array.isArray(d.data))return v(d.data)}function W(d){if(d>=i)throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+i.toString(16)+" bytes");return d|0}function Y(d){return+d!=d&&(d=0),u.alloc(+d)}u.isBuffer=function(a){return a!=null&&a._isBuffer===!0&&a!==u.prototype},u.compare=function(a,f){if(V(a,Uint8Array)&&(a=u.from(a,a.offset,a.byteLength)),V(f,Uint8Array)&&(f=u.from(f,f.offset,f.byteLength)),!u.isBuffer(a)||!u.isBuffer(f))throw new TypeError('The "buf1", "buf2" arguments must be one of type Buffer or Uint8Array');if(a===f)return 0;let E=a.length,F=f.length;for(let z=0,j=Math.min(E,F);z<j;++z)if(a[z]!==f[z]){E=a[z],F=f[z];break}return E<F?-1:F<E?1:0},u.isEncoding=function(a){switch(String(a).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},u.concat=function(a,f){if(!Array.isArray(a))throw new TypeError('"list" argument must be an Array of Buffers');if(a.length===0)return u.alloc(0);let E;if(f===void 0)for(f=0,E=0;E<a.length;++E)f+=a[E].length;const F=u.allocUnsafe(f);let z=0;for(E=0;E<a.length;++E){let j=a[E];if(V(j,Uint8Array))z+j.length>F.length?(u.isBuffer(j)||(j=u.from(j)),j.copy(F,z)):Uint8Array.prototype.set.call(F,j,z);else if(u.isBuffer(j))j.copy(F,z);else throw new TypeError('"list" argument must be an Array of Buffers');z+=j.length}return F};function $(d,a){if(u.isBuffer(d))return d.length;if(ArrayBuffer.isView(d)||V(d,ArrayBuffer))return d.byteLength;if(typeof d!="string")throw new TypeError('The "string" argument must be one of type string, Buffer, or ArrayBuffer. Received type '+typeof d);const f=d.length,E=arguments.length>2&&arguments[2]===!0;if(!E&&f===0)return 0;let F=!1;for(;;)switch(a){case"ascii":case"latin1":case"binary":return f;case"utf8":case"utf-8":return s(d).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return f*2;case"hex":return f>>>1;case"base64":return b(d).length;default:if(F)return E?-1:s(d).length;a=(""+a).toLowerCase(),F=!0}}u.byteLength=$;function re(d,a,f){let E=!1;if((a===void 0||a<0)&&(a=0),a>this.length||((f===void 0||f>this.length)&&(f=this.length),f<=0)||(f>>>=0,a>>>=0,f<=a))return"";for(d||(d="utf8");;)switch(d){case"hex":return ie(this,a,f);case"utf8":case"utf-8":return O(this,a,f);case"ascii":return G(this,a,f);case"latin1":case"binary":return X(this,a,f);case"base64":return S(this,a,f);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return we(this,a,f);default:if(E)throw new TypeError("Unknown encoding: "+d);d=(d+"").toLowerCase(),E=!0}}u.prototype._isBuffer=!0;function P(d,a,f){const E=d[a];d[a]=d[f],d[f]=E}u.prototype.swap16=function(){const a=this.length;if(a%2!==0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(let f=0;f<a;f+=2)P(this,f,f+1);return this},u.prototype.swap32=function(){const a=this.length;if(a%4!==0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(let f=0;f<a;f+=4)P(this,f,f+3),P(this,f+1,f+2);return this},u.prototype.swap64=function(){const a=this.length;if(a%8!==0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(let f=0;f<a;f+=8)P(this,f,f+7),P(this,f+1,f+6),P(this,f+2,f+5),P(this,f+3,f+4);return this},u.prototype.toString=function(){const a=this.length;return a===0?"":arguments.length===0?O(this,0,a):re.apply(this,arguments)},u.prototype.toLocaleString=u.prototype.toString,u.prototype.equals=function(a){if(!u.isBuffer(a))throw new TypeError("Argument must be a Buffer");return this===a?!0:u.compare(this,a)===0},u.prototype.inspect=function(){let a="";const f=t.INSPECT_MAX_BYTES;return a=this.toString("hex",0,f).replace(/(.{2})/g,"$1 ").trim(),this.length>f&&(a+=" ... "),"<Buffer "+a+">"},n&&(u.prototype[n]=u.prototype.inspect),u.prototype.compare=function(a,f,E,F,z){if(V(a,Uint8Array)&&(a=u.from(a,a.offset,a.byteLength)),!u.isBuffer(a))throw new TypeError('The "target" argument must be one of type Buffer or Uint8Array. Received type '+typeof a);if(f===void 0&&(f=0),E===void 0&&(E=a?a.length:0),F===void 0&&(F=0),z===void 0&&(z=this.length),f<0||E>a.length||F<0||z>this.length)throw new RangeError("out of range index");if(F>=z&&f>=E)return 0;if(F>=z)return-1;if(f>=E)return 1;if(f>>>=0,E>>>=0,F>>>=0,z>>>=0,this===a)return 0;let j=z-F,_e=E-f;const Ae=Math.min(j,_e),Ee=this.slice(F,z),be=a.slice(f,E);for(let Re=0;Re<Ae;++Re)if(Ee[Re]!==be[Re]){j=Ee[Re],_e=be[Re];break}return j<_e?-1:_e<j?1:0};function L(d,a,f,E,F){if(d.length===0)return-1;if(typeof f=="string"?(E=f,f=0):f>2147483647?f=2147483647:f<-2147483648&&(f=-2147483648),f=+f,ne(f)&&(f=F?0:d.length-1),f<0&&(f=d.length+f),f>=d.length){if(F)return-1;f=d.length-1}else if(f<0)if(F)f=0;else return-1;if(typeof a=="string"&&(a=u.from(a,E)),u.isBuffer(a))return a.length===0?-1:Z(d,a,f,E,F);if(typeof a=="number")return a=a&255,typeof Uint8Array.prototype.indexOf=="function"?F?Uint8Array.prototype.indexOf.call(d,a,f):Uint8Array.prototype.lastIndexOf.call(d,a,f):Z(d,[a],f,E,F);throw new TypeError("val must be string, number or Buffer")}function Z(d,a,f,E,F){let z=1,j=d.length,_e=a.length;if(E!==void 0&&(E=String(E).toLowerCase(),E==="ucs2"||E==="ucs-2"||E==="utf16le"||E==="utf-16le")){if(d.length<2||a.length<2)return-1;z=2,j/=2,_e/=2,f/=2}function Ae(be,Re){return z===1?be[Re]:be.readUInt16BE(Re*z)}let Ee;if(F){let be=-1;for(Ee=f;Ee<j;Ee++)if(Ae(d,Ee)===Ae(a,be===-1?0:Ee-be)){if(be===-1&&(be=Ee),Ee-be+1===_e)return be*z}else be!==-1&&(Ee-=Ee-be),be=-1}else for(f+_e>j&&(f=j-_e),Ee=f;Ee>=0;Ee--){let be=!0;for(let Re=0;Re<_e;Re++)if(Ae(d,Ee+Re)!==Ae(a,Re)){be=!1;break}if(be)return Ee}return-1}u.prototype.includes=function(a,f,E){return this.indexOf(a,f,E)!==-1},u.prototype.indexOf=function(a,f,E){return L(this,a,f,E,!0)},u.prototype.lastIndexOf=function(a,f,E){return L(this,a,f,E,!1)};function Q(d,a,f,E){f=Number(f)||0;const F=d.length-f;E?(E=Number(E),E>F&&(E=F)):E=F;const z=a.length;E>z/2&&(E=z/2);let j;for(j=0;j<E;++j){const _e=parseInt(a.substr(j*2,2),16);if(ne(_e))return j;d[f+j]=_e}return j}function D(d,a,f,E){return T(s(a,d.length-f),d,f,E)}function J(d,a,f,E){return T(o(a),d,f,E)}function he(d,a,f,E){return T(b(a),d,f,E)}function le(d,a,f,E){return T(p(a,d.length-f),d,f,E)}u.prototype.write=function(a,f,E,F){if(f===void 0)F="utf8",E=this.length,f=0;else if(E===void 0&&typeof f=="string")F=f,E=this.length,f=0;else if(isFinite(f))f=f>>>0,isFinite(E)?(E=E>>>0,F===void 0&&(F="utf8")):(F=E,E=void 0);else throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");const z=this.length-f;if((E===void 0||E>z)&&(E=z),a.length>0&&(E<0||f<0)||f>this.length)throw new RangeError("Attempt to write outside buffer bounds");F||(F="utf8");let j=!1;for(;;)switch(F){case"hex":return Q(this,a,f,E);case"utf8":case"utf-8":return D(this,a,f,E);case"ascii":case"latin1":case"binary":return J(this,a,f,E);case"base64":return he(this,a,f,E);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return le(this,a,f,E);default:if(j)throw new TypeError("Unknown encoding: "+F);F=(""+F).toLowerCase(),j=!0}},u.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};function S(d,a,f){return a===0&&f===d.length?e.fromByteArray(d):e.fromByteArray(d.slice(a,f))}function O(d,a,f){f=Math.min(d.length,f);const E=[];let F=a;for(;F<f;){const z=d[F];let j=null,_e=z>239?4:z>223?3:z>191?2:1;if(F+_e<=f){let Ae,Ee,be,Re;switch(_e){case 1:z<128&&(j=z);break;case 2:Ae=d[F+1],(Ae&192)===128&&(Re=(z&31)<<6|Ae&63,Re>127&&(j=Re));break;case 3:Ae=d[F+1],Ee=d[F+2],(Ae&192)===128&&(Ee&192)===128&&(Re=(z&15)<<12|(Ae&63)<<6|Ee&63,Re>2047&&(Re<55296||Re>57343)&&(j=Re));break;case 4:Ae=d[F+1],Ee=d[F+2],be=d[F+3],(Ae&192)===128&&(Ee&192)===128&&(be&192)===128&&(Re=(z&15)<<18|(Ae&63)<<12|(Ee&63)<<6|be&63,Re>65535&&Re<1114112&&(j=Re))}}j===null?(j=65533,_e=1):j>65535&&(j-=65536,E.push(j>>>10&1023|55296),j=56320|j&1023),E.push(j),F+=_e}return H(E)}const K=4096;function H(d){const a=d.length;if(a<=K)return String.fromCharCode.apply(String,d);let f="",E=0;for(;E<a;)f+=String.fromCharCode.apply(String,d.slice(E,E+=K));return f}function G(d,a,f){let E="";f=Math.min(d.length,f);for(let F=a;F<f;++F)E+=String.fromCharCode(d[F]&127);return E}function X(d,a,f){let E="";f=Math.min(d.length,f);for(let F=a;F<f;++F)E+=String.fromCharCode(d[F]);return E}function ie(d,a,f){const E=d.length;(!a||a<0)&&(a=0),(!f||f<0||f>E)&&(f=E);let F="";for(let z=a;z<f;++z)F+=pe[d[z]];return F}function we(d,a,f){const E=d.slice(a,f);let F="";for(let z=0;z<E.length-1;z+=2)F+=String.fromCharCode(E[z]+E[z+1]*256);return F}u.prototype.slice=function(a,f){const E=this.length;a=~~a,f=f===void 0?E:~~f,a<0?(a+=E,a<0&&(a=0)):a>E&&(a=E),f<0?(f+=E,f<0&&(f=0)):f>E&&(f=E),f<a&&(f=a);const F=this.subarray(a,f);return Object.setPrototypeOf(F,u.prototype),F};function oe(d,a,f){if(d%1!==0||d<0)throw new RangeError("offset is not uint");if(d+a>f)throw new RangeError("Trying to access beyond buffer length")}u.prototype.readUintLE=u.prototype.readUIntLE=function(a,f,E){a=a>>>0,f=f>>>0,E||oe(a,f,this.length);let F=this[a],z=1,j=0;for(;++j<f&&(z*=256);)F+=this[a+j]*z;return F},u.prototype.readUintBE=u.prototype.readUIntBE=function(a,f,E){a=a>>>0,f=f>>>0,E||oe(a,f,this.length);let F=this[a+--f],z=1;for(;f>0&&(z*=256);)F+=this[a+--f]*z;return F},u.prototype.readUint8=u.prototype.readUInt8=function(a,f){return a=a>>>0,f||oe(a,1,this.length),this[a]},u.prototype.readUint16LE=u.prototype.readUInt16LE=function(a,f){return a=a>>>0,f||oe(a,2,this.length),this[a]|this[a+1]<<8},u.prototype.readUint16BE=u.prototype.readUInt16BE=function(a,f){return a=a>>>0,f||oe(a,2,this.length),this[a]<<8|this[a+1]},u.prototype.readUint32LE=u.prototype.readUInt32LE=function(a,f){return a=a>>>0,f||oe(a,4,this.length),(this[a]|this[a+1]<<8|this[a+2]<<16)+this[a+3]*16777216},u.prototype.readUint32BE=u.prototype.readUInt32BE=function(a,f){return a=a>>>0,f||oe(a,4,this.length),this[a]*16777216+(this[a+1]<<16|this[a+2]<<8|this[a+3])},u.prototype.readBigUInt64LE=ye(function(a){a=a>>>0,M(a,"offset");const f=this[a],E=this[a+7];(f===void 0||E===void 0)&&U(a,this.length-8);const F=f+this[++a]*2**8+this[++a]*2**16+this[++a]*2**24,z=this[++a]+this[++a]*2**8+this[++a]*2**16+E*2**24;return BigInt(F)+(BigInt(z)<<BigInt(32))}),u.prototype.readBigUInt64BE=ye(function(a){a=a>>>0,M(a,"offset");const f=this[a],E=this[a+7];(f===void 0||E===void 0)&&U(a,this.length-8);const F=f*2**24+this[++a]*2**16+this[++a]*2**8+this[++a],z=this[++a]*2**24+this[++a]*2**16+this[++a]*2**8+E;return(BigInt(F)<<BigInt(32))+BigInt(z)}),u.prototype.readIntLE=function(a,f,E){a=a>>>0,f=f>>>0,E||oe(a,f,this.length);let F=this[a],z=1,j=0;for(;++j<f&&(z*=256);)F+=this[a+j]*z;return z*=128,F>=z&&(F-=Math.pow(2,8*f)),F},u.prototype.readIntBE=function(a,f,E){a=a>>>0,f=f>>>0,E||oe(a,f,this.length);let F=f,z=1,j=this[a+--F];for(;F>0&&(z*=256);)j+=this[a+--F]*z;return z*=128,j>=z&&(j-=Math.pow(2,8*f)),j},u.prototype.readInt8=function(a,f){return a=a>>>0,f||oe(a,1,this.length),this[a]&128?(255-this[a]+1)*-1:this[a]},u.prototype.readInt16LE=function(a,f){a=a>>>0,f||oe(a,2,this.length);const E=this[a]|this[a+1]<<8;return E&32768?E|4294901760:E},u.prototype.readInt16BE=function(a,f){a=a>>>0,f||oe(a,2,this.length);const E=this[a+1]|this[a]<<8;return E&32768?E|4294901760:E},u.prototype.readInt32LE=function(a,f){return a=a>>>0,f||oe(a,4,this.length),this[a]|this[a+1]<<8|this[a+2]<<16|this[a+3]<<24},u.prototype.readInt32BE=function(a,f){return a=a>>>0,f||oe(a,4,this.length),this[a]<<24|this[a+1]<<16|this[a+2]<<8|this[a+3]},u.prototype.readBigInt64LE=ye(function(a){a=a>>>0,M(a,"offset");const f=this[a],E=this[a+7];(f===void 0||E===void 0)&&U(a,this.length-8);const F=this[a+4]+this[a+5]*2**8+this[a+6]*2**16+(E<<24);return(BigInt(F)<<BigInt(32))+BigInt(f+this[++a]*2**8+this[++a]*2**16+this[++a]*2**24)}),u.prototype.readBigInt64BE=ye(function(a){a=a>>>0,M(a,"offset");const f=this[a],E=this[a+7];(f===void 0||E===void 0)&&U(a,this.length-8);const F=(f<<24)+this[++a]*2**16+this[++a]*2**8+this[++a];return(BigInt(F)<<BigInt(32))+BigInt(this[++a]*2**24+this[++a]*2**16+this[++a]*2**8+E)}),u.prototype.readFloatLE=function(a,f){return a=a>>>0,f||oe(a,4,this.length),r.read(this,a,!0,23,4)},u.prototype.readFloatBE=function(a,f){return a=a>>>0,f||oe(a,4,this.length),r.read(this,a,!1,23,4)},u.prototype.readDoubleLE=function(a,f){return a=a>>>0,f||oe(a,8,this.length),r.read(this,a,!0,52,8)},u.prototype.readDoubleBE=function(a,f){return a=a>>>0,f||oe(a,8,this.length),r.read(this,a,!1,52,8)};function fe(d,a,f,E,F,z){if(!u.isBuffer(d))throw new TypeError('"buffer" argument must be a Buffer instance');if(a>F||a<z)throw new RangeError('"value" argument is out of bounds');if(f+E>d.length)throw new RangeError("Index out of range")}u.prototype.writeUintLE=u.prototype.writeUIntLE=function(a,f,E,F){if(a=+a,f=f>>>0,E=E>>>0,!F){const _e=Math.pow(2,8*E)-1;fe(this,a,f,E,_e,0)}let z=1,j=0;for(this[f]=a&255;++j<E&&(z*=256);)this[f+j]=a/z&255;return f+E},u.prototype.writeUintBE=u.prototype.writeUIntBE=function(a,f,E,F){if(a=+a,f=f>>>0,E=E>>>0,!F){const _e=Math.pow(2,8*E)-1;fe(this,a,f,E,_e,0)}let z=E-1,j=1;for(this[f+z]=a&255;--z>=0&&(j*=256);)this[f+z]=a/j&255;return f+E},u.prototype.writeUint8=u.prototype.writeUInt8=function(a,f,E){return a=+a,f=f>>>0,E||fe(this,a,f,1,255,0),this[f]=a&255,f+1},u.prototype.writeUint16LE=u.prototype.writeUInt16LE=function(a,f,E){return a=+a,f=f>>>0,E||fe(this,a,f,2,65535,0),this[f]=a&255,this[f+1]=a>>>8,f+2},u.prototype.writeUint16BE=u.prototype.writeUInt16BE=function(a,f,E){return a=+a,f=f>>>0,E||fe(this,a,f,2,65535,0),this[f]=a>>>8,this[f+1]=a&255,f+2},u.prototype.writeUint32LE=u.prototype.writeUInt32LE=function(a,f,E){return a=+a,f=f>>>0,E||fe(this,a,f,4,4294967295,0),this[f+3]=a>>>24,this[f+2]=a>>>16,this[f+1]=a>>>8,this[f]=a&255,f+4},u.prototype.writeUint32BE=u.prototype.writeUInt32BE=function(a,f,E){return a=+a,f=f>>>0,E||fe(this,a,f,4,4294967295,0),this[f]=a>>>24,this[f+1]=a>>>16,this[f+2]=a>>>8,this[f+3]=a&255,f+4};function ee(d,a,f,E,F){A(a,E,F,d,f,7);let z=Number(a&BigInt(4294967295));d[f++]=z,z=z>>8,d[f++]=z,z=z>>8,d[f++]=z,z=z>>8,d[f++]=z;let j=Number(a>>BigInt(32)&BigInt(4294967295));return d[f++]=j,j=j>>8,d[f++]=j,j=j>>8,d[f++]=j,j=j>>8,d[f++]=j,f}function w(d,a,f,E,F){A(a,E,F,d,f,7);let z=Number(a&BigInt(4294967295));d[f+7]=z,z=z>>8,d[f+6]=z,z=z>>8,d[f+5]=z,z=z>>8,d[f+4]=z;let j=Number(a>>BigInt(32)&BigInt(4294967295));return d[f+3]=j,j=j>>8,d[f+2]=j,j=j>>8,d[f+1]=j,j=j>>8,d[f]=j,f+8}u.prototype.writeBigUInt64LE=ye(function(a,f=0){return ee(this,a,f,BigInt(0),BigInt("0xffffffffffffffff"))}),u.prototype.writeBigUInt64BE=ye(function(a,f=0){return w(this,a,f,BigInt(0),BigInt("0xffffffffffffffff"))}),u.prototype.writeIntLE=function(a,f,E,F){if(a=+a,f=f>>>0,!F){const Ae=Math.pow(2,8*E-1);fe(this,a,f,E,Ae-1,-Ae)}let z=0,j=1,_e=0;for(this[f]=a&255;++z<E&&(j*=256);)a<0&&_e===0&&this[f+z-1]!==0&&(_e=1),this[f+z]=(a/j>>0)-_e&255;return f+E},u.prototype.writeIntBE=function(a,f,E,F){if(a=+a,f=f>>>0,!F){const Ae=Math.pow(2,8*E-1);fe(this,a,f,E,Ae-1,-Ae)}let z=E-1,j=1,_e=0;for(this[f+z]=a&255;--z>=0&&(j*=256);)a<0&&_e===0&&this[f+z+1]!==0&&(_e=1),this[f+z]=(a/j>>0)-_e&255;return f+E},u.prototype.writeInt8=function(a,f,E){return a=+a,f=f>>>0,E||fe(this,a,f,1,127,-128),a<0&&(a=255+a+1),this[f]=a&255,f+1},u.prototype.writeInt16LE=function(a,f,E){return a=+a,f=f>>>0,E||fe(this,a,f,2,32767,-32768),this[f]=a&255,this[f+1]=a>>>8,f+2},u.prototype.writeInt16BE=function(a,f,E){return a=+a,f=f>>>0,E||fe(this,a,f,2,32767,-32768),this[f]=a>>>8,this[f+1]=a&255,f+2},u.prototype.writeInt32LE=function(a,f,E){return a=+a,f=f>>>0,E||fe(this,a,f,4,2147483647,-2147483648),this[f]=a&255,this[f+1]=a>>>8,this[f+2]=a>>>16,this[f+3]=a>>>24,f+4},u.prototype.writeInt32BE=function(a,f,E){return a=+a,f=f>>>0,E||fe(this,a,f,4,2147483647,-2147483648),a<0&&(a=4294967295+a+1),this[f]=a>>>24,this[f+1]=a>>>16,this[f+2]=a>>>8,this[f+3]=a&255,f+4},u.prototype.writeBigInt64LE=ye(function(a,f=0){return ee(this,a,f,-BigInt("0x8000000000000000"),BigInt("0x7fffffffffffffff"))}),u.prototype.writeBigInt64BE=ye(function(a,f=0){return w(this,a,f,-BigInt("0x8000000000000000"),BigInt("0x7fffffffffffffff"))});function se(d,a,f,E,F,z){if(f+E>d.length)throw new RangeError("Index out of range");if(f<0)throw new RangeError("Index out of range")}function ue(d,a,f,E,F){return a=+a,f=f>>>0,F||se(d,a,f,4),r.write(d,a,f,E,23,4),f+4}u.prototype.writeFloatLE=function(a,f,E){return ue(this,a,f,!0,E)},u.prototype.writeFloatBE=function(a,f,E){return ue(this,a,f,!1,E)};function de(d,a,f,E,F){return a=+a,f=f>>>0,F||se(d,a,f,8),r.write(d,a,f,E,52,8),f+8}u.prototype.writeDoubleLE=function(a,f,E){return de(this,a,f,!0,E)},u.prototype.writeDoubleBE=function(a,f,E){return de(this,a,f,!1,E)},u.prototype.copy=function(a,f,E,F){if(!u.isBuffer(a))throw new TypeError("argument should be a Buffer");if(E||(E=0),!F&&F!==0&&(F=this.length),f>=a.length&&(f=a.length),f||(f=0),F>0&&F<E&&(F=E),F===E||a.length===0||this.length===0)return 0;if(f<0)throw new RangeError("targetStart out of bounds");if(E<0||E>=this.length)throw new RangeError("Index out of range");if(F<0)throw new RangeError("sourceEnd out of bounds");F>this.length&&(F=this.length),a.length-f<F-E&&(F=a.length-f+E);const z=F-E;return this===a&&typeof Uint8Array.prototype.copyWithin=="function"?this.copyWithin(f,E,F):Uint8Array.prototype.set.call(a,this.subarray(E,F),f),z},u.prototype.fill=function(a,f,E,F){if(typeof a=="string"){if(typeof f=="string"?(F=f,f=0,E=this.length):typeof E=="string"&&(F=E,E=this.length),F!==void 0&&typeof F!="string")throw new TypeError("encoding must be a string");if(typeof F=="string"&&!u.isEncoding(F))throw new TypeError("Unknown encoding: "+F);if(a.length===1){const j=a.charCodeAt(0);(F==="utf8"&&j<128||F==="latin1")&&(a=j)}}else typeof a=="number"?a=a&255:typeof a=="boolean"&&(a=Number(a));if(f<0||this.length<f||this.length<E)throw new RangeError("Out of range index");if(E<=f)return this;f=f>>>0,E=E===void 0?this.length:E>>>0,a||(a=0);let z;if(typeof a=="number")for(z=f;z<E;++z)this[z]=a;else{const j=u.isBuffer(a)?a:u.from(a,F),_e=j.length;if(_e===0)throw new TypeError('The value "'+a+'" is invalid for argument "value"');for(z=0;z<E-f;++z)this[z+f]=j[z%_e]}return this};const te={};function ae(d,a,f){te[d]=class extends f{constructor(){super(),Object.defineProperty(this,"message",{value:a.apply(this,arguments),writable:!0,configurable:!0}),this.name=`${this.name} [${d}]`,this.stack,delete this.name}get code(){return d}set code(F){Object.defineProperty(this,"code",{configurable:!0,enumerable:!0,value:F,writable:!0})}toString(){return`${this.name} [${d}]: ${this.message}`}}}ae("ERR_BUFFER_OUT_OF_BOUNDS",function(d){return d?`${d} is outside of buffer bounds`:"Attempt to access memory outside buffer bounds"},RangeError),ae("ERR_INVALID_ARG_TYPE",function(d,a){return`The "${d}" argument must be of type number. Received type ${typeof a}`},TypeError),ae("ERR_OUT_OF_RANGE",function(d,a,f){let E=`The value of "${d}" is out of range.`,F=f;return Number.isInteger(f)&&Math.abs(f)>2**32?F=m(String(f)):typeof f=="bigint"&&(F=String(f),(f>BigInt(2)**BigInt(32)||f<-(BigInt(2)**BigInt(32)))&&(F=m(F)),F+="n"),E+=` It must be ${a}. Received ${F}`,E},RangeError);function m(d){let a="",f=d.length;const E=d[0]==="-"?1:0;for(;f>=E+4;f-=3)a=`_${d.slice(f-3,f)}${a}`;return`${d.slice(0,f)}${a}`}function x(d,a,f){M(a,"offset"),(d[a]===void 0||d[a+f]===void 0)&&U(a,d.length-(f+1))}function A(d,a,f,E,F,z){if(d>f||d<a){const j=typeof a=="bigint"?"n":"";let _e;throw z>3?a===0||a===BigInt(0)?_e=`>= 0${j} and < 2${j} ** ${(z+1)*8}${j}`:_e=`>= -(2${j} ** ${(z+1)*8-1}${j}) and < 2 ** ${(z+1)*8-1}${j}`:_e=`>= ${a}${j} and <= ${f}${j}`,new te.ERR_OUT_OF_RANGE("value",_e,d)}x(E,F,z)}function M(d,a){if(typeof d!="number")throw new te.ERR_INVALID_ARG_TYPE(a,"number",d)}function U(d,a,f){throw Math.floor(d)!==d?(M(d,f),new te.ERR_OUT_OF_RANGE(f||"offset","an integer",d)):a<0?new te.ERR_BUFFER_OUT_OF_BOUNDS:new te.ERR_OUT_OF_RANGE(f||"offset",`>= ${f?1:0} and <= ${a}`,d)}const k=/[^+/0-9A-Za-z-_]/g;function h(d){if(d=d.split("=")[0],d=d.trim().replace(k,""),d.length<2)return"";for(;d.length%4!==0;)d=d+"=";return d}function s(d,a){a=a||1/0;let f;const E=d.length;let F=null;const z=[];for(let j=0;j<E;++j){if(f=d.charCodeAt(j),f>55295&&f<57344){if(!F){if(f>56319){(a-=3)>-1&&z.push(239,191,189);continue}else if(j+1===E){(a-=3)>-1&&z.push(239,191,189);continue}F=f;continue}if(f<56320){(a-=3)>-1&&z.push(239,191,189),F=f;continue}f=(F-55296<<10|f-56320)+65536}else F&&(a-=3)>-1&&z.push(239,191,189);if(F=null,f<128){if((a-=1)<0)break;z.push(f)}else if(f<2048){if((a-=2)<0)break;z.push(f>>6|192,f&63|128)}else if(f<65536){if((a-=3)<0)break;z.push(f>>12|224,f>>6&63|128,f&63|128)}else if(f<1114112){if((a-=4)<0)break;z.push(f>>18|240,f>>12&63|128,f>>6&63|128,f&63|128)}else throw new Error("Invalid code point")}return z}function o(d){const a=[];for(let f=0;f<d.length;++f)a.push(d.charCodeAt(f)&255);return a}function p(d,a){let f,E,F;const z=[];for(let j=0;j<d.length&&!((a-=2)<0);++j)f=d.charCodeAt(j),E=f>>8,F=f%256,z.push(F),z.push(E);return z}function b(d){return e.toByteArray(h(d))}function T(d,a,f,E){let F;for(F=0;F<E&&!(F+f>=a.length||F>=d.length);++F)a[F+f]=d[F];return F}function V(d,a){return d instanceof a||d!=null&&d.constructor!=null&&d.constructor.name!=null&&d.constructor.name===a.name}function ne(d){return d!==d}const pe=function(){const d="0123456789abcdef",a=new Array(256);for(let f=0;f<16;++f){const E=f*16;for(let F=0;F<16;++F)a[E+F]=d[f]+d[F]}return a}();function ye(d){return typeof BigInt>"u"?xe:d}function xe(){throw new Error("BigInt not supported")}})(ao);var Mi;(function(t){t[t.SysFatal=1]="SysFatal",t[t.SysTransient=2]="SysTransient",t[t.DestinationInvalid=3]="DestinationInvalid",t[t.CanisterReject=4]="CanisterReject",t[t.CanisterError=5]="CanisterError"})(Mi||(Mi={}));const Uc="modulepreload",Oc=function(t){return"/"+t},ws={},Fc=function(e,r,n){if(!r||r.length===0)return e();const i=document.getElementsByTagName("link");return Promise.all(r.map(c=>{if(c=Oc(c),c in ws)return;ws[c]=!0;const l=c.endsWith(".css"),u=l?'[rel="stylesheet"]':"";if(!!n)for(let B=i.length-1;B>=0;B--){const N=i[B];if(N.href===c&&(!l||N.rel==="stylesheet"))return}else if(document.querySelector(`link[href="${c}"]${u}`))return;const _=document.createElement("link");if(_.rel=l?"stylesheet":Uc,l||(_.as="script",_.crossOrigin=""),_.href=c,document.head.appendChild(_),l)return new Promise((B,N)=>{_.addEventListener("load",B),_.addEventListener("error",()=>N(new Error(`Unable to preload CSS for ${c}`)))})})).then(()=>e()).catch(c=>{const l=new Event("vite:preloadError",{cancelable:!0});if(l.payload=c,window.dispatchEvent(l),!l.defaultPrevented)throw c})},jn="abcdefghijklmnopqrstuvwxyz234567",Ur=Object.create(null);for(let t=0;t<jn.length;t++)Ur[jn[t]]=t;Ur[0]=Ur.o;Ur[1]=Ur.i;function Pc(t){let e=0,r=0,n="";function i(c){return e<0?r|=c>>-e:r=c<<e&248,e>3?(e-=8,1):(e<4&&(n+=jn[r>>3],e+=5),0)}for(let c=0;c<t.length;)c+=i(t[c]);return n+(e<0?jn[r>>3]:"")}function Mc(t){let e=0,r=0;const n=new Uint8Array(t.length*4/3|0);let i=0;function c(l){let u=Ur[l.toLowerCase()];if(u===void 0)throw new Error(`Invalid character: ${JSON.stringify(l)}`);u<<=3,r|=u>>>e,e+=5,e>=8&&(n[i++]=r,e-=8,e>0?r=u<<5-e&255:r=0)}for(const l of t)c(l);return n.slice(0,i)}const kc=new Uint32Array([0,1996959894,3993919788,2567524794,124634137,1886057615,3915621685,2657392035,249268274,2044508324,3772115230,2547177864,162941995,2125561021,3887607047,2428444049,498536548,1789927666,4089016648,2227061214,450548861,1843258603,4107580753,2211677639,325883990,1684777152,4251122042,2321926636,335633487,1661365465,4195302755,2366115317,997073096,1281953886,3579855332,2724688242,1006888145,1258607687,3524101629,2768942443,901097722,1119000684,3686517206,2898065728,853044451,1172266101,3705015759,2882616665,651767980,1373503546,3369554304,3218104598,565507253,1454621731,3485111705,3099436303,671266974,1594198024,3322730930,2970347812,795835527,1483230225,3244367275,3060149565,1994146192,31158534,2563907772,4023717930,1907459465,112637215,2680153253,3904427059,2013776290,251722036,2517215374,3775830040,2137656763,141376813,2439277719,3865271297,1802195444,476864866,2238001368,4066508878,1812370925,453092731,2181625025,4111451223,1706088902,314042704,2344532202,4240017532,1658658271,366619977,2362670323,4224994405,1303535960,984961486,2747007092,3569037538,1256170817,1037604311,2765210733,3554079995,1131014506,879679996,2909243462,3663771856,1141124467,855842277,2852801631,3708648649,1342533948,654459306,3188396048,3373015174,1466479909,544179635,3110523913,3462522015,1591671054,702138776,2966460450,3352799412,1504918807,783551873,3082640443,3233442989,3988292384,2596254646,62317068,1957810842,3939845945,2647816111,81470997,1943803523,3814918930,2489596804,225274430,2053790376,3826175755,2466906013,167816743,2097651377,4027552580,2265490386,503444072,1762050814,4150417245,2154129355,426522225,1852507879,4275313526,2312317920,282753626,1742555852,4189708143,2394877945,397917763,1622183637,3604390888,2714866558,953729732,1340076626,3518719985,2797360999,1068828381,1219638859,3624741850,2936675148,906185462,1090812512,3747672003,2825379669,829329135,1181335161,3412177804,3160834842,628085408,1382605366,3423369109,3138078467,570562233,1426400815,3317316542,2998733608,733239954,1555261956,3268935591,3050360625,752459403,1541320221,2607071920,3965973030,1969922972,40735498,2617837225,3943577151,1913087877,83908371,2512341634,3803740692,2075208622,213261112,2463272603,3855990285,2094854071,198958881,2262029012,4057260610,1759359992,534414190,2176718541,4139329115,1873836001,414664567,2282248934,4279200368,1711684554,285281116,2405801727,4167216745,1634467795,376229701,2685067896,3608007406,1308918612,956543938,2808555105,3495958263,1231636301,1047427035,2932959818,3654703836,1088359270,936918e3,2847714899,3736837829,1202900863,817233897,3183342108,3401237130,1404277552,615818150,3134207493,3453421203,1423857449,601450431,3009837614,3294710456,1567103746,711928724,3020668471,3272380065,1510334235,755167117]);function Cc(t){const e=new Uint8Array(t);let r=-1;for(let n=0;n<e.length;n++){const c=(e[n]^r)&255;r=kc[c]^r>>>8}return(r^-1)>>>0}function $c(t){return t instanceof Uint8Array||ArrayBuffer.isView(t)&&t.constructor.name==="Uint8Array"}function uo(t,...e){if(!$c(t))throw new Error("Uint8Array expected");if(e.length>0&&!e.includes(t.length))throw new Error("Uint8Array expected of length "+e+", got length="+t.length)}function ms(t,e=!0){if(t.destroyed)throw new Error("Hash instance has been destroyed");if(e&&t.finished)throw new Error("Hash#digest() has already been called")}function qc(t,e){uo(t);const r=e.outputLen;if(t.length<r)throw new Error("digestInto() expects output buffer of length at least "+r)}const gr=typeof globalThis=="object"&&"crypto"in globalThis?globalThis.crypto:void 0;/*! noble-hashes - MIT License (c) 2022 Paul Miller (paulmillr.com) */function bi(t){return new DataView(t.buffer,t.byteOffset,t.byteLength)}function Bt(t,e){return t<<32-e|t>>>e}function Vc(t){if(typeof t!="string")throw new Error("utf8ToBytes expected string, got "+typeof t);return new Uint8Array(new TextEncoder().encode(t))}function fo(t){return typeof t=="string"&&(t=Vc(t)),uo(t),t}class Gc{clone(){return this._cloneInto()}}function es(t){const e=n=>t().update(fo(n)).digest(),r=t();return e.outputLen=r.outputLen,e.blockLen=r.blockLen,e.create=()=>t(),e}function lo(t=32){if(gr&&typeof gr.getRandomValues=="function")return gr.getRandomValues(new Uint8Array(t));if(gr&&typeof gr.randomBytes=="function")return gr.randomBytes(t);throw new Error("crypto.getRandomValues must be defined")}function Hc(t,e,r,n){if(typeof t.setBigUint64=="function")return t.setBigUint64(e,r,n);const i=BigInt(32),c=BigInt(4294967295),l=Number(r>>i&c),u=Number(r&c),y=n?4:0,_=n?0:4;t.setUint32(e+y,l,n),t.setUint32(e+_,u,n)}function jc(t,e,r){return t&e^~t&r}function zc(t,e,r){return t&e^t&r^e&r}class ho extends Gc{constructor(e,r,n,i){super(),this.blockLen=e,this.outputLen=r,this.padOffset=n,this.isLE=i,this.finished=!1,this.length=0,this.pos=0,this.destroyed=!1,this.buffer=new Uint8Array(e),this.view=bi(this.buffer)}update(e){ms(this);const{view:r,buffer:n,blockLen:i}=this;e=fo(e);const c=e.length;for(let l=0;l<c;){const u=Math.min(i-this.pos,c-l);if(u===i){const y=bi(e);for(;i<=c-l;l+=i)this.process(y,l);continue}n.set(e.subarray(l,l+u),this.pos),this.pos+=u,l+=u,this.pos===i&&(this.process(r,0),this.pos=0)}return this.length+=e.length,this.roundClean(),this}digestInto(e){ms(this),qc(e,this),this.finished=!0;const{buffer:r,view:n,blockLen:i,isLE:c}=this;let{pos:l}=this;r[l++]=128,this.buffer.subarray(l).fill(0),this.padOffset>i-l&&(this.process(n,0),l=0);for(let N=l;N<i;N++)r[N]=0;Hc(n,i-8,BigInt(this.length*8),c),this.process(n,0);const u=bi(e),y=this.outputLen;if(y%4)throw new Error("_sha2: outputLen should be aligned to 32bit");const _=y/4,B=this.get();if(_>B.length)throw new Error("_sha2: outputLen bigger than state");for(let N=0;N<_;N++)u.setUint32(4*N,B[N],c)}digest(){const{buffer:e,outputLen:r}=this;this.digestInto(e);const n=e.slice(0,r);return this.destroy(),n}_cloneInto(e){e||(e=new this.constructor),e.set(...this.get());const{blockLen:r,buffer:n,length:i,finished:c,destroyed:l,pos:u}=this;return e.length=i,e.pos=u,e.finished=c,e.destroyed=l,i%r&&e.buffer.set(n),e}}const Yc=new Uint32Array([1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298]),Ht=new Uint32Array([1779033703,3144134277,1013904242,2773480762,1359893119,2600822924,528734635,1541459225]),jt=new Uint32Array(64);class po extends ho{constructor(){super(64,32,8,!1),this.A=Ht[0]|0,this.B=Ht[1]|0,this.C=Ht[2]|0,this.D=Ht[3]|0,this.E=Ht[4]|0,this.F=Ht[5]|0,this.G=Ht[6]|0,this.H=Ht[7]|0}get(){const{A:e,B:r,C:n,D:i,E:c,F:l,G:u,H:y}=this;return[e,r,n,i,c,l,u,y]}set(e,r,n,i,c,l,u,y){this.A=e|0,this.B=r|0,this.C=n|0,this.D=i|0,this.E=c|0,this.F=l|0,this.G=u|0,this.H=y|0}process(e,r){for(let N=0;N<16;N++,r+=4)jt[N]=e.getUint32(r,!1);for(let N=16;N<64;N++){const I=jt[N-15],v=jt[N-2],g=Bt(I,7)^Bt(I,18)^I>>>3,q=Bt(v,17)^Bt(v,19)^v>>>10;jt[N]=q+jt[N-7]+g+jt[N-16]|0}let{A:n,B:i,C:c,D:l,E:u,F:y,G:_,H:B}=this;for(let N=0;N<64;N++){const I=Bt(u,6)^Bt(u,11)^Bt(u,25),v=B+I+jc(u,y,_)+Yc[N]+jt[N]|0,q=(Bt(n,2)^Bt(n,13)^Bt(n,22))+zc(n,i,c)|0;B=_,_=y,y=u,u=l+v|0,l=c,c=i,i=n,n=v+q|0}n=n+this.A|0,i=i+this.B|0,c=c+this.C|0,l=l+this.D|0,u=u+this.E|0,y=y+this.F|0,_=_+this.G|0,B=B+this.H|0,this.set(n,i,c,l,u,y,_,B)}roundClean(){jt.fill(0)}destroy(){this.set(0,0,0,0,0,0,0,0),this.buffer.fill(0)}}class Kc extends po{constructor(){super(),this.A=-1056596264,this.B=914150663,this.C=812702999,this.D=-150054599,this.E=-4191439,this.F=1750603025,this.G=1694076839,this.H=-1090891868,this.outputLen=28}}const ts=es(()=>new po),Wc=es(()=>new Kc);function Zc(t){return Wc.create().update(new Uint8Array(t)).digest()}const cn="__principal__",Lc=2,bs=4,Xc="aaaaa-aa",Jc=t=>{var e;return new Uint8Array(((e=t.match(/.{1,2}/g))!==null&&e!==void 0?e:[]).map(r=>parseInt(r,16)))},Qc=t=>t.reduce((e,r)=>e+r.toString(16).padStart(2,"0"),"");let ve=class xn{constructor(e){this._arr=e,this._isPrincipal=!0}static anonymous(){return new this(new Uint8Array([bs]))}static managementCanister(){return this.fromHex(Xc)}static selfAuthenticating(e){const r=Zc(e);return new this(new Uint8Array([...r,Lc]))}static from(e){if(typeof e=="string")return xn.fromText(e);if(Object.getPrototypeOf(e)===Uint8Array.prototype)return new xn(e);if(typeof e=="object"&&e!==null&&e._isPrincipal===!0)return new xn(e._arr);throw new Error(`Impossible to convert ${JSON.stringify(e)} to Principal.`)}static fromHex(e){return new this(Jc(e))}static fromText(e){let r=e;if(e.includes(cn)){const l=JSON.parse(e);cn in l&&(r=l[cn])}const n=r.toLowerCase().replace(/-/g,"");let i=Mc(n);i=i.slice(4,i.length);const c=new this(i);if(c.toText()!==r)throw new Error(`Principal "${c.toText()}" does not have a valid checksum (original value "${r}" may not be a valid Principal ID).`);return c}static fromUint8Array(e){return new this(e)}isAnonymous(){return this._arr.byteLength===1&&this._arr[0]===bs}toUint8Array(){return this._arr}toHex(){return Qc(this._arr).toUpperCase()}toText(){const e=new ArrayBuffer(4);new DataView(e).setUint32(0,Cc(this._arr));const n=new Uint8Array(e),i=Uint8Array.from(this._arr),c=new Uint8Array([...n,...i]),u=Pc(c).match(/.{1,5}/g);if(!u)throw new Error;return u.join("-")}toString(){return this.toText()}toJSON(){return{[cn]:this.toText()}}compareTo(e){for(let r=0;r<Math.min(this._arr.length,e._arr.length);r++){if(this._arr[r]<e._arr[r])return"lt";if(this._arr[r]>e._arr[r])return"gt"}return this._arr.length<e._arr.length?"lt":this._arr.length>e._arr.length?"gt":"eq"}ltEq(e){const r=this.compareTo(e);return r=="lt"||r=="eq"}gtEq(e){const r=this.compareTo(e);return r=="gt"||r=="eq"}};function Ot(...t){const e=new Uint8Array(t.reduce((n,i)=>n+i.byteLength,0));let r=0;for(const n of t)e.set(new Uint8Array(n),r),r+=n.byteLength;return e.buffer}function Xe(t){return[...new Uint8Array(t)].map(e=>e.toString(16).padStart(2,"0")).join("")}const Dc=new RegExp(/^[0-9a-fA-F]+$/);function zn(t){if(!Dc.test(t))throw new Error("Invalid hexadecimal string.");const e=[...t].reduce((r,n,i)=>(r[i/2|0]=(r[i/2|0]||"")+n,r),[]).map(r=>Number.parseInt(r,16));return new Uint8Array(e).buffer}function yo(t,e){if(t.byteLength!==e.byteLength)return t.byteLength-e.byteLength;const r=new Uint8Array(t),n=new Uint8Array(e);for(let i=0;i<r.length;i++)if(r[i]!==n[i])return r[i]-n[i];return 0}function ei(t,e){return yo(t,e)===0}function En(t){return new DataView(t.buffer,t.byteOffset,t.byteLength).buffer}function go(t){return t instanceof Uint8Array?En(t):t instanceof ArrayBuffer?t:Array.isArray(t)?En(new Uint8Array(t)):"buffer"in t?go(t.buffer):En(new Uint8Array(t))}class $e extends Error{constructor(e){super(e),this.message=e,this.name="AgentError",this.__proto__=$e.prototype,Object.setPrototypeOf(this,$e.prototype)}}function Ue(...t){const e=new Uint8Array(t.reduce((n,i)=>n+i.byteLength,0));let r=0;for(const n of t)e.set(new Uint8Array(n),r),r+=n.byteLength;return e}class Pr{constructor(e,r=(e==null?void 0:e.byteLength)||0){this._buffer=Yn(e||new ArrayBuffer(0)),this._view=new Uint8Array(this._buffer,0,r)}get buffer(){return Yn(this._view.slice())}get byteLength(){return this._view.byteLength}read(e){const r=this._view.subarray(0,e);return this._view=this._view.subarray(e),r.slice().buffer}readUint8(){const e=this._view[0];return this._view=this._view.subarray(1),e}write(e){const r=new Uint8Array(e),n=this._view.byteLength;this._view.byteOffset+this._view.byteLength+r.byteLength>=this._buffer.byteLength?this.alloc(r.byteLength):this._view=new Uint8Array(this._buffer,this._view.byteOffset,this._view.byteLength+r.byteLength),this._view.set(r,n)}get end(){return this._view.byteLength===0}alloc(e){const r=new ArrayBuffer((this._buffer.byteLength+e)*1.2|0),n=new Uint8Array(r,0,this._view.byteLength+e);n.set(this._view),this._buffer=r,this._view=n}}function _i(t){return new DataView(t.buffer,t.byteOffset,t.byteLength).buffer}function Yn(t){return t instanceof Uint8Array?_i(t):t instanceof ArrayBuffer?t:Array.isArray(t)?_i(new Uint8Array(t)):"buffer"in t?Yn(t.buffer):_i(new Uint8Array(t))}function eu(t){const r=new TextEncoder().encode(t);let n=0;for(const i of r)n=(n*223+i)%2**32;return n}function Ut(t){if(/^_\d+_$/.test(t)||/^_0x[0-9a-fA-F]+_$/.test(t)){const e=+t.slice(1,-1);if(Number.isSafeInteger(e)&&e>=0&&e<2**32)return e}return eu(t)}function wo(){throw new Error("unexpected end of buffer")}function lr(t,e){return t.byteLength<e&&wo(),t.read(e)}function hr(t){const e=t.readUint8();return e===void 0&&wo(),e}function qe(t){if(typeof t=="number"&&(t=BigInt(t)),t<BigInt(0))throw new Error("Cannot leb encode negative values.");const e=(t===BigInt(0)?0:Math.ceil(Math.log2(Number(t))))+1,r=new Pr(new ArrayBuffer(e),0);for(;;){const n=Number(t&BigInt(127));if(t/=BigInt(128),t===BigInt(0)){r.write(new Uint8Array([n]));break}else r.write(new Uint8Array([n|128]))}return r.buffer}function Ze(t){let e=BigInt(1),r=BigInt(0),n;do n=hr(t),r+=BigInt(n&127).valueOf()*e,e*=BigInt(128);while(n>=128);return r}function Ye(t){typeof t=="number"&&(t=BigInt(t));const e=t<BigInt(0);e&&(t=-t-BigInt(1));const r=(t===BigInt(0)?0:Math.ceil(Math.log2(Number(t))))+1,n=new Pr(new ArrayBuffer(r),0);for(;;){const c=i(t);if(t/=BigInt(128),e&&t===BigInt(0)&&c&64||!e&&t===BigInt(0)&&!(c&64)){n.write(new Uint8Array([c]));break}else n.write(new Uint8Array([c|128]))}function i(c){const l=c%BigInt(128);return Number(e?BigInt(128)-l-BigInt(1):l)}return n.buffer}function Wt(t){const e=new Uint8Array(t.buffer);let r=0;for(;r<e.byteLength;r++)if(e[r]<128){if(!(e[r]&64))return Ze(t);break}const n=new Uint8Array(lr(t,r+1));let i=BigInt(0);for(let c=n.byteLength-1;c>=0;c--)i=i*BigInt(128)+BigInt(128-(n[c]&127)-1);return-i-BigInt(1)}function tu(t,e){if(BigInt(t)<BigInt(0))throw new Error("Cannot write negative values.");return mo(t,e)}function mo(t,e){t=BigInt(t);const r=new Pr(new ArrayBuffer(Math.min(1,e)),0);let n=0,i=BigInt(256),c=BigInt(0),l=Number(t%i);for(r.write(new Uint8Array([l]));++n<e;)t<0&&c===BigInt(0)&&l!==0&&(c=BigInt(1)),l=Number((t/i-c)%BigInt(256)),r.write(new Uint8Array([l])),i*=BigInt(256);return r.buffer}function bo(t,e){let r=BigInt(hr(t)),n=BigInt(1),i=0;for(;++i<e;){n*=BigInt(256);const c=BigInt(hr(t));r=r+n*c}return r}function ru(t,e){let r=bo(t,e);const n=BigInt(2)**(BigInt(8)*BigInt(e-1)+BigInt(7));return r>=n&&(r-=n*BigInt(2)),r}function ki(t){const e=BigInt(t);if(t<0)throw new RangeError("Input must be non-negative");return BigInt(1)<<e}const Bn="DIDL",_s=400;function Zr(t,e,r){return t.map((n,i)=>r(n,e[i]))}class nu{constructor(){this._typs=[],this._idx=new Map}has(e){return this._idx.has(e.name)}add(e,r){const n=this._typs.length;this._idx.set(e.name,n),this._typs.push(r)}merge(e,r){const n=this._idx.get(e.name),i=this._idx.get(r);if(n===void 0)throw new Error("Missing type index for "+e);if(i===void 0)throw new Error("Missing type index for "+r);this._typs[n]=this._typs[i],this._typs.splice(i,1),this._idx.delete(r)}encode(){const e=qe(this._typs.length),r=Ue(...this._typs);return Ue(e,r)}indexOf(e){if(!this._idx.has(e))throw new Error("Missing type index for "+e);return Ye(this._idx.get(e)||0)}}class iu{visitType(e,r){throw new Error("Not implemented")}visitPrimitive(e,r){return this.visitType(e,r)}visitEmpty(e,r){return this.visitPrimitive(e,r)}visitBool(e,r){return this.visitPrimitive(e,r)}visitNull(e,r){return this.visitPrimitive(e,r)}visitReserved(e,r){return this.visitPrimitive(e,r)}visitText(e,r){return this.visitPrimitive(e,r)}visitNumber(e,r){return this.visitPrimitive(e,r)}visitInt(e,r){return this.visitNumber(e,r)}visitNat(e,r){return this.visitNumber(e,r)}visitFloat(e,r){return this.visitPrimitive(e,r)}visitFixedInt(e,r){return this.visitNumber(e,r)}visitFixedNat(e,r){return this.visitNumber(e,r)}visitPrincipal(e,r){return this.visitPrimitive(e,r)}visitConstruct(e,r){return this.visitType(e,r)}visitVec(e,r,n){return this.visitConstruct(e,n)}visitOpt(e,r,n){return this.visitConstruct(e,n)}visitRecord(e,r,n){return this.visitConstruct(e,n)}visitTuple(e,r,n){const i=r.map((c,l)=>[`_${l}_`,c]);return this.visitRecord(e,i,n)}visitVariant(e,r,n){return this.visitConstruct(e,n)}visitRec(e,r,n){return this.visitConstruct(r,n)}visitFunc(e,r){return this.visitConstruct(e,r)}visitService(e,r){return this.visitConstruct(e,r)}}class ti{display(){return this.name}valueToString(e){return Ge(e)}buildTypeTable(e){e.has(this)||this._buildTypeTableImpl(e)}}class pt extends ti{checkType(e){if(this.name!==e.name)throw new Error(`type mismatch: type on the wire ${e.name}, expect type ${this.name}`);return e}_buildTypeTableImpl(e){}}class er extends ti{checkType(e){if(e instanceof tr){const r=e.getType();if(typeof r>"u")throw new Error("type mismatch with uninitialized type");return r}throw new Error(`type mismatch: type on the wire ${e.name}, expect type ${this.name}`)}encodeType(e){return e.indexOf(this.name)}}class _o extends pt{accept(e,r){return e.visitEmpty(this,r)}covariant(e){throw new Error(`Invalid ${this.display()} argument: ${Ge(e)}`)}encodeValue(){throw new Error("Empty cannot appear as a function argument")}valueToString(){throw new Error("Empty cannot appear as a value")}encodeType(){return Ye(-17)}decodeValue(){throw new Error("Empty cannot appear as an output")}get name(){return"empty"}}class xo extends ti{checkType(e){throw new Error("Method not implemented for unknown.")}accept(e,r){throw e.visitType(this,r)}covariant(e){throw new Error(`Invalid ${this.display()} argument: ${Ge(e)}`)}encodeValue(){throw new Error("Unknown cannot appear as a function argument")}valueToString(){throw new Error("Unknown cannot appear as a value")}encodeType(){throw new Error("Unknown cannot be serialized")}decodeValue(e,r){let n=r.decodeValue(e,r);Object(n)!==n&&(n=Object(n));let i;return r instanceof tr?i=()=>r.getType():i=()=>r,Object.defineProperty(n,"type",{value:i,writable:!0,enumerable:!1,configurable:!0}),n}_buildTypeTableImpl(){throw new Error("Unknown cannot be serialized")}get name(){return"Unknown"}}class Eo extends pt{accept(e,r){return e.visitBool(this,r)}covariant(e){if(typeof e=="boolean")return!0;throw new Error(`Invalid ${this.display()} argument: ${Ge(e)}`)}encodeValue(e){return new Uint8Array([e?1:0])}encodeType(){return Ye(-2)}decodeValue(e,r){switch(this.checkType(r),hr(e)){case 0:return!1;case 1:return!0;default:throw new Error("Boolean value out of range")}}get name(){return"bool"}}class Bo extends pt{accept(e,r){return e.visitNull(this,r)}covariant(e){if(e===null)return!0;throw new Error(`Invalid ${this.display()} argument: ${Ge(e)}`)}encodeValue(){return new ArrayBuffer(0)}encodeType(){return Ye(-1)}decodeValue(e,r){return this.checkType(r),null}get name(){return"null"}}class Kn extends pt{accept(e,r){return e.visitReserved(this,r)}covariant(e){return!0}encodeValue(){return new ArrayBuffer(0)}encodeType(){return Ye(-16)}decodeValue(e,r){return r.name!==this.name&&r.decodeValue(e,r),null}get name(){return"reserved"}}class Ao extends pt{accept(e,r){return e.visitText(this,r)}covariant(e){if(typeof e=="string")return!0;throw new Error(`Invalid ${this.display()} argument: ${Ge(e)}`)}encodeValue(e){const r=new TextEncoder().encode(e),n=qe(r.byteLength);return Ue(n,r)}encodeType(){return Ye(-15)}decodeValue(e,r){this.checkType(r);const n=Ze(e),i=lr(e,Number(n));return new TextDecoder("utf8",{fatal:!0}).decode(i)}get name(){return"text"}valueToString(e){return'"'+e+'"'}}class vo extends pt{accept(e,r){return e.visitInt(this,r)}covariant(e){if(typeof e=="bigint"||Number.isInteger(e))return!0;throw new Error(`Invalid ${this.display()} argument: ${Ge(e)}`)}encodeValue(e){return Ye(e)}encodeType(){return Ye(-4)}decodeValue(e,r){return this.checkType(r),Wt(e)}get name(){return"int"}valueToString(e){return e.toString()}}class To extends pt{accept(e,r){return e.visitNat(this,r)}covariant(e){if(typeof e=="bigint"&&e>=BigInt(0)||Number.isInteger(e)&&e>=0)return!0;throw new Error(`Invalid ${this.display()} argument: ${Ge(e)}`)}encodeValue(e){return qe(e)}encodeType(){return Ye(-3)}decodeValue(e,r){return this.checkType(r),Ze(e)}get name(){return"nat"}valueToString(e){return e.toString()}}class rs extends pt{constructor(e){if(super(),this._bits=e,e!==32&&e!==64)throw new Error("not a valid float type")}accept(e,r){return e.visitFloat(this,r)}covariant(e){if(typeof e=="number"||e instanceof Number)return!0;throw new Error(`Invalid ${this.display()} argument: ${Ge(e)}`)}encodeValue(e){const r=new ArrayBuffer(this._bits/8),n=new DataView(r);return this._bits===32?n.setFloat32(0,e,!0):n.setFloat64(0,e,!0),r}encodeType(){const e=this._bits===32?-13:-14;return Ye(e)}decodeValue(e,r){this.checkType(r);const n=lr(e,this._bits/8),i=new DataView(n);return this._bits===32?i.getFloat32(0,!0):i.getFloat64(0,!0)}get name(){return"float"+this._bits}valueToString(e){return e.toString()}}class dr extends pt{constructor(e){super(),this._bits=e}accept(e,r){return e.visitFixedInt(this,r)}covariant(e){const r=ki(this._bits-1)*BigInt(-1),n=ki(this._bits-1)-BigInt(1);let i=!1;if(typeof e=="bigint")i=e>=r&&e<=n;else if(Number.isInteger(e)){const c=BigInt(e);i=c>=r&&c<=n}else i=!1;if(i)return!0;throw new Error(`Invalid ${this.display()} argument: ${Ge(e)}`)}encodeValue(e){return mo(e,this._bits/8)}encodeType(){const e=Math.log2(this._bits)-3;return Ye(-9-e)}decodeValue(e,r){this.checkType(r);const n=ru(e,this._bits/8);return this._bits<=32?Number(n):n}get name(){return`int${this._bits}`}valueToString(e){return e.toString()}}class Qt extends pt{constructor(e){super(),this._bits=e}accept(e,r){return e.visitFixedNat(this,r)}covariant(e){const r=ki(this._bits);let n=!1;if(typeof e=="bigint"&&e>=BigInt(0)?n=e<r:Number.isInteger(e)&&e>=0?n=BigInt(e)<r:n=!1,n)return!0;throw new Error(`Invalid ${this.display()} argument: ${Ge(e)}`)}encodeValue(e){return tu(e,this._bits/8)}encodeType(){const e=Math.log2(this._bits)-3;return Ye(-5-e)}decodeValue(e,r){this.checkType(r);const n=bo(e,this._bits/8);return this._bits<=32?Number(n):n}get name(){return`nat${this._bits}`}valueToString(e){return e.toString()}}class ri extends er{constructor(e){super(),this._type=e,this._blobOptimization=!1,e instanceof Qt&&e._bits===8&&(this._blobOptimization=!0)}accept(e,r){return e.visitVec(this,this._type,r)}covariant(e){const r=this._type instanceof Qt?this._type._bits:this._type instanceof dr?this._type._bits:0;if(ArrayBuffer.isView(e)&&r==e.BYTES_PER_ELEMENT*8||Array.isArray(e)&&e.every((n,i)=>{try{return this._type.covariant(n)}catch(c){throw new Error(`Invalid ${this.display()} argument: 

index ${i} -> ${c.message}`)}}))return!0;throw new Error(`Invalid ${this.display()} argument: ${Ge(e)}`)}encodeValue(e){const r=qe(e.length);if(this._blobOptimization)return Ue(r,new Uint8Array(e));if(ArrayBuffer.isView(e))return Ue(r,new Uint8Array(e.buffer));const n=new Pr(new ArrayBuffer(r.byteLength+e.length),0);n.write(r);for(const i of e){const c=this._type.encodeValue(i);n.write(new Uint8Array(c))}return n.buffer}_buildTypeTableImpl(e){this._type.buildTypeTable(e);const r=Ye(-19),n=this._type.encodeType(e);e.add(this,Ue(r,n))}decodeValue(e,r){const n=this.checkType(r);if(!(n instanceof ri))throw new Error("Not a vector type");const i=Number(Ze(e));if(this._type instanceof Qt){if(this._type._bits==8)return new Uint8Array(e.read(i));if(this._type._bits==16)return new Uint16Array(e.read(i*2));if(this._type._bits==32)return new Uint32Array(e.read(i*4));if(this._type._bits==64)return new BigUint64Array(e.read(i*8))}if(this._type instanceof dr){if(this._type._bits==8)return new Int8Array(e.read(i));if(this._type._bits==16)return new Int16Array(e.read(i*2));if(this._type._bits==32)return new Int32Array(e.read(i*4));if(this._type._bits==64)return new BigInt64Array(e.read(i*8))}const c=[];for(let l=0;l<i;l++)c.push(this._type.decodeValue(e,n._type));return c}get name(){return`vec ${this._type.name}`}display(){return`vec ${this._type.display()}`}valueToString(e){return"vec {"+e.map(n=>this._type.valueToString(n)).join("; ")+"}"}}class Or extends er{constructor(e){super(),this._type=e}accept(e,r){return e.visitOpt(this,this._type,r)}covariant(e){try{if(Array.isArray(e)&&(e.length===0||e.length===1&&this._type.covariant(e[0])))return!0}catch(r){throw new Error(`Invalid ${this.display()} argument: ${Ge(e)} 

-> ${r.message}`)}throw new Error(`Invalid ${this.display()} argument: ${Ge(e)}`)}encodeValue(e){return e.length===0?new Uint8Array([0]):Ue(new Uint8Array([1]),this._type.encodeValue(e[0]))}_buildTypeTableImpl(e){this._type.buildTypeTable(e);const r=Ye(-18),n=this._type.encodeType(e);e.add(this,Ue(r,n))}decodeValue(e,r){const n=this.checkType(r);if(!(n instanceof Or))throw new Error("Not an option type");switch(hr(e)){case 0:return[];case 1:return[this._type.decodeValue(e,n._type)];default:throw new Error("Not an option value")}}get name(){return`opt ${this._type.name}`}display(){return`opt ${this._type.display()}`}valueToString(e){return e.length===0?"null":`opt ${this._type.valueToString(e[0])}`}}class en extends er{constructor(e={}){super(),this._fields=Object.entries(e).sort((r,n)=>Ut(r[0])-Ut(n[0]))}accept(e,r){return e.visitRecord(this,this._fields,r)}tryAsTuple(){const e=[];for(let r=0;r<this._fields.length;r++){const[n,i]=this._fields[r];if(n!==`_${r}_`)return null;e.push(i)}return e}covariant(e){if(typeof e=="object"&&this._fields.every(([r,n])=>{if(!e.hasOwnProperty(r))throw new Error(`Record is missing key "${r}".`);try{return n.covariant(e[r])}catch(i){throw new Error(`Invalid ${this.display()} argument: 

field ${r} -> ${i.message}`)}}))return!0;throw new Error(`Invalid ${this.display()} argument: ${Ge(e)}`)}encodeValue(e){const r=this._fields.map(([i])=>e[i]),n=Zr(this._fields,r,([,i],c)=>i.encodeValue(c));return Ue(...n)}_buildTypeTableImpl(e){this._fields.forEach(([c,l])=>l.buildTypeTable(e));const r=Ye(-20),n=qe(this._fields.length),i=this._fields.map(([c,l])=>Ue(qe(Ut(c)),l.encodeType(e)));e.add(this,Ue(r,n,Ue(...i)))}decodeValue(e,r){const n=this.checkType(r);if(!(n instanceof en))throw new Error("Not a record type");const i={};let c=0,l=0;for(;l<n._fields.length;){const[u,y]=n._fields[l];if(c>=this._fields.length){y.decodeValue(e,y),l++;continue}const[_,B]=this._fields[c],N=Ut(this._fields[c][0]),I=Ut(u);if(N===I)i[_]=B.decodeValue(e,y),c++,l++;else if(I>N)if(B instanceof Or||B instanceof Kn)i[_]=[],c++;else throw new Error("Cannot find required field "+_);else y.decodeValue(e,y),l++}for(const[u,y]of this._fields.slice(c))if(y instanceof Or||y instanceof Kn)i[u]=[];else throw new Error("Cannot find required field "+u);return i}get name(){return`record {${this._fields.map(([r,n])=>r+":"+n.name).join("; ")}}`}display(){return`record {${this._fields.map(([r,n])=>r+":"+n.display()).join("; ")}}`}valueToString(e){const r=this._fields.map(([i])=>e[i]);return`record {${Zr(this._fields,r,([i,c],l)=>i+"="+c.valueToString(l)).join("; ")}}`}}class ni extends en{constructor(e){const r={};e.forEach((n,i)=>r["_"+i+"_"]=n),super(r),this._components=e}accept(e,r){return e.visitTuple(this,this._components,r)}covariant(e){if(Array.isArray(e)&&e.length>=this._fields.length&&this._components.every((r,n)=>{try{return r.covariant(e[n])}catch(i){throw new Error(`Invalid ${this.display()} argument: 

index ${n} -> ${i.message}`)}}))return!0;throw new Error(`Invalid ${this.display()} argument: ${Ge(e)}`)}encodeValue(e){const r=Zr(this._components,e,(n,i)=>n.encodeValue(i));return Ue(...r)}decodeValue(e,r){const n=this.checkType(r);if(!(n instanceof ni))throw new Error("not a tuple type");if(n._components.length<this._components.length)throw new Error("tuple mismatch");const i=[];for(const[c,l]of n._components.entries())c>=this._components.length?l.decodeValue(e,l):i.push(this._components[c].decodeValue(e,l));return i}display(){return`record {${this._components.map(r=>r.display()).join("; ")}}`}valueToString(e){return`record {${Zr(this._components,e,(n,i)=>n.valueToString(i)).join("; ")}}`}}class ii extends er{constructor(e={}){super(),this._fields=Object.entries(e).sort((r,n)=>Ut(r[0])-Ut(n[0]))}accept(e,r){return e.visitVariant(this,this._fields,r)}covariant(e){if(typeof e=="object"&&Object.entries(e).length===1&&this._fields.every(([r,n])=>{try{return!e.hasOwnProperty(r)||n.covariant(e[r])}catch(i){throw new Error(`Invalid ${this.display()} argument: 

variant ${r} -> ${i.message}`)}}))return!0;throw new Error(`Invalid ${this.display()} argument: ${Ge(e)}`)}encodeValue(e){for(let r=0;r<this._fields.length;r++){const[n,i]=this._fields[r];if(e.hasOwnProperty(n)){const c=qe(r),l=i.encodeValue(e[n]);return Ue(c,l)}}throw Error("Variant has no data: "+e)}_buildTypeTableImpl(e){this._fields.forEach(([,c])=>{c.buildTypeTable(e)});const r=Ye(-21),n=qe(this._fields.length),i=this._fields.map(([c,l])=>Ue(qe(Ut(c)),l.encodeType(e)));e.add(this,Ue(r,n,...i))}decodeValue(e,r){const n=this.checkType(r);if(!(n instanceof ii))throw new Error("Not a variant type");const i=Number(Ze(e));if(i>=n._fields.length)throw Error("Invalid variant index: "+i);const[c,l]=n._fields[i];for(const[u,y]of this._fields)if(Ut(c)===Ut(u)){const _=y.decodeValue(e,l);return{[u]:_}}throw new Error("Cannot find field hash "+c)}get name(){return`variant {${this._fields.map(([r,n])=>r+":"+n.name).join("; ")}}`}display(){return`variant {${this._fields.map(([r,n])=>r+(n.name==="null"?"":`:${n.display()}`)).join("; ")}}`}valueToString(e){for(const[r,n]of this._fields)if(e.hasOwnProperty(r)){const i=n.valueToString(e[r]);return i==="null"?`variant {${r}}`:`variant {${r}=${i}}`}throw new Error("Variant has no data: "+e)}}class tr extends er{constructor(){super(...arguments),this._id=tr._counter++,this._type=void 0}accept(e,r){if(!this._type)throw Error("Recursive type uninitialized.");return e.visitRec(this,this._type,r)}fill(e){this._type=e}getType(){return this._type}covariant(e){if(this._type&&this._type.covariant(e))return!0;throw new Error(`Invalid ${this.display()} argument: ${Ge(e)}`)}encodeValue(e){if(!this._type)throw Error("Recursive type uninitialized.");return this._type.encodeValue(e)}_buildTypeTableImpl(e){if(!this._type)throw Error("Recursive type uninitialized.");e.add(this,new Uint8Array([])),this._type.buildTypeTable(e),e.merge(this,this._type.name)}decodeValue(e,r){if(!this._type)throw Error("Recursive type uninitialized.");return this._type.decodeValue(e,r)}get name(){return`rec_${this._id}`}display(){if(!this._type)throw Error("Recursive type uninitialized.");return`μ${this.name}.${this._type.name}`}valueToString(e){if(!this._type)throw Error("Recursive type uninitialized.");return this._type.valueToString(e)}}tr._counter=0;function ns(t){if(hr(t)!==1)throw new Error("Cannot decode principal");const r=Number(Ze(t));return ve.fromUint8Array(new Uint8Array(lr(t,r)))}class So extends pt{accept(e,r){return e.visitPrincipal(this,r)}covariant(e){if(e&&e._isPrincipal)return!0;throw new Error(`Invalid ${this.display()} argument: ${Ge(e)}`)}encodeValue(e){const r=e.toUint8Array(),n=qe(r.byteLength);return Ue(new Uint8Array([1]),n,r)}encodeType(){return Ye(-24)}decodeValue(e,r){return this.checkType(r),ns(e)}get name(){return"principal"}valueToString(e){return`${this.name} "${e.toText()}"`}}class is extends er{constructor(e,r,n=[]){super(),this.argTypes=e,this.retTypes=r,this.annotations=n}static argsToString(e,r){if(e.length!==r.length)throw new Error("arity mismatch");return"("+e.map((n,i)=>n.valueToString(r[i])).join(", ")+")"}accept(e,r){return e.visitFunc(this,r)}covariant(e){if(Array.isArray(e)&&e.length===2&&e[0]&&e[0]._isPrincipal&&typeof e[1]=="string")return!0;throw new Error(`Invalid ${this.display()} argument: ${Ge(e)}`)}encodeValue([e,r]){const n=e.toUint8Array(),i=qe(n.byteLength),c=Ue(new Uint8Array([1]),i,n),l=new TextEncoder().encode(r),u=qe(l.byteLength);return Ue(new Uint8Array([1]),c,u,l)}_buildTypeTableImpl(e){this.argTypes.forEach(_=>_.buildTypeTable(e)),this.retTypes.forEach(_=>_.buildTypeTable(e));const r=Ye(-22),n=qe(this.argTypes.length),i=Ue(...this.argTypes.map(_=>_.encodeType(e))),c=qe(this.retTypes.length),l=Ue(...this.retTypes.map(_=>_.encodeType(e))),u=qe(this.annotations.length),y=Ue(...this.annotations.map(_=>this.encodeAnnotation(_)));e.add(this,Ue(r,n,i,c,l,u,y))}decodeValue(e){if(hr(e)!==1)throw new Error("Cannot decode function reference");const n=ns(e),i=Number(Ze(e)),c=lr(e,i),u=new TextDecoder("utf8",{fatal:!0}).decode(c);return[n,u]}get name(){const e=this.argTypes.map(i=>i.name).join(", "),r=this.retTypes.map(i=>i.name).join(", "),n=" "+this.annotations.join(" ");return`(${e}) -> (${r})${n}`}valueToString([e,r]){return`func "${e.toText()}".${r}`}display(){const e=this.argTypes.map(i=>i.display()).join(", "),r=this.retTypes.map(i=>i.display()).join(", "),n=" "+this.annotations.join(" ");return`(${e}) → (${r})${n}`}encodeAnnotation(e){if(e==="query")return new Uint8Array([1]);if(e==="oneway")return new Uint8Array([2]);if(e==="composite_query")return new Uint8Array([3]);throw new Error("Illegal function annotation")}}class No extends er{constructor(e){super(),this._fields=Object.entries(e).sort((r,n)=>r[0]<n[0]?-1:r[0]>n[0]?1:0)}accept(e,r){return e.visitService(this,r)}covariant(e){if(e&&e._isPrincipal)return!0;throw new Error(`Invalid ${this.display()} argument: ${Ge(e)}`)}encodeValue(e){const r=e.toUint8Array(),n=qe(r.length);return Ue(new Uint8Array([1]),n,r)}_buildTypeTableImpl(e){this._fields.forEach(([c,l])=>l.buildTypeTable(e));const r=Ye(-23),n=qe(this._fields.length),i=this._fields.map(([c,l])=>{const u=new TextEncoder().encode(c),y=qe(u.length);return Ue(y,u,l.encodeType(e))});e.add(this,Ue(r,n,...i))}decodeValue(e){return ns(e)}get name(){return`service {${this._fields.map(([r,n])=>r+":"+n.name).join("; ")}}`}valueToString(e){return`service "${e.toText()}"`}}function Ge(t){const e=JSON.stringify(t,(r,n)=>typeof n=="bigint"?`BigInt(${n})`:n);return e&&e.length>_s?e.substring(0,_s-3)+"...":e}function Ci(t,e){if(e.length<t.length)throw Error("Wrong number of message arguments");const r=new nu;t.forEach(y=>y.buildTypeTable(r));const n=new TextEncoder().encode(Bn),i=r.encode(),c=qe(e.length),l=Ue(...t.map(y=>y.encodeType(r))),u=Ue(...Zr(t,e,(y,_)=>{try{y.covariant(_)}catch(B){throw new Error(B.message+`

`)}return y.encodeValue(_)}));return Ue(n,i,c,l,u)}function Io(t,e){const r=new Pr(e);if(e.byteLength<Bn.length)throw new Error("Message length smaller than magic number");const n=lr(r,Bn.length),i=new TextDecoder().decode(n);if(i!==Bn)throw new Error("Wrong magic number: "+JSON.stringify(i));function c(v){const g=[],q=Number(Ze(v));for(let Y=0;Y<q;Y++){const $=Number(Wt(v));switch($){case-18:case-19:{const re=Number(Wt(v));g.push([$,re]);break}case-20:case-21:{const re=[];let P=Number(Ze(v)),L;for(;P--;){const Z=Number(Ze(v));if(Z>=Math.pow(2,32))throw new Error("field id out of 32-bit range");if(typeof L=="number"&&L>=Z)throw new Error("field id collision or not sorted");L=Z;const Q=Number(Wt(v));re.push([Z,Q])}g.push([$,re]);break}case-22:{const re=[];let P=Number(Ze(v));for(;P--;)re.push(Number(Wt(v)));const L=[];let Z=Number(Ze(v));for(;Z--;)L.push(Number(Wt(v)));const Q=[];let D=Number(Ze(v));for(;D--;)switch(Number(Ze(v))){case 1:{Q.push("query");break}case 2:{Q.push("oneway");break}case 3:{Q.push("composite_query");break}default:throw new Error("unknown annotation")}g.push([$,[re,L,Q]]);break}case-23:{let re=Number(Ze(v));const P=[];for(;re--;){const L=Number(Ze(v)),Z=new TextDecoder().decode(lr(v,L)),Q=Wt(v);P.push([Z,Q])}g.push([$,P]);break}default:throw new Error("Illegal op_code: "+$)}}const C=[],W=Number(Ze(v));for(let Y=0;Y<W;Y++)C.push(Number(Wt(v)));return[g,C]}const[l,u]=c(r);if(u.length<t.length)throw new Error("Wrong number of return values");const y=l.map(v=>Do());function _(v){if(v<-24)throw new Error("future value not supported");if(v<0)switch(v){case-1:return Fo;case-2:return Oo;case-3:return ko;case-4:return Mo;case-5:return jo;case-6:return zo;case-7:return Yo;case-8:return Ko;case-9:return qo;case-10:return Vo;case-11:return Go;case-12:return Ho;case-13:return Co;case-14:return $o;case-15:return Po;case-16:return Uo;case-17:return Ro;case-24:return Wo;default:throw new Error("Illegal op_code: "+v)}if(v>=l.length)throw new Error("type index out of range");return y[v]}function B(v){switch(v[0]){case-19:{const g=_(v[1]);return Lo(g)}case-18:{const g=_(v[1]);return Xo(g)}case-20:{const g={};for(const[W,Y]of v[1]){const $=`_${W}_`;g[$]=_(Y)}const q=Jo(g),C=q.tryAsTuple();return Array.isArray(C)?Zo(...C):q}case-21:{const g={};for(const[q,C]of v[1]){const W=`_${q}_`;g[W]=_(C)}return Qo(g)}case-22:{const[g,q,C]=v[1];return ea(g.map(W=>_(W)),q.map(W=>_(W)),C)}case-23:{const g={},q=v[1];for(const[C,W]of q){let Y=_(W);if(Y instanceof tr&&(Y=Y.getType()),!(Y instanceof is))throw new Error("Illegal service definition: services can only contain functions");g[C]=Y}return ta(g)}default:throw new Error("Illegal op_code: "+v[0])}}l.forEach((v,g)=>{if(v[0]===-22){const q=B(v);y[g].fill(q)}}),l.forEach((v,g)=>{if(v[0]!==-22){const q=B(v);y[g].fill(q)}});const N=u.map(v=>_(v)),I=t.map((v,g)=>v.decodeValue(r,N[g]));for(let v=t.length;v<N.length;v++)N[v].decodeValue(r,N[v]);if(r.byteLength>0)throw new Error("decode: Left-over bytes");return I}const Ro=new _o,Uo=new Kn,su=new xo,Oo=new Eo,Fo=new Bo,Po=new Ao,Mo=new vo,ko=new To,Co=new rs(32),$o=new rs(64),qo=new dr(8),Vo=new dr(16),Go=new dr(32),Ho=new dr(64),jo=new Qt(8),zo=new Qt(16),Yo=new Qt(32),Ko=new Qt(64),Wo=new So;function Zo(...t){return new ni(t)}function Lo(t){return new ri(t)}function Xo(t){return new Or(t)}function Jo(t){return new en(t)}function Qo(t){return new ii(t)}function Do(){return new tr}function ea(t,e,r=[]){return new is(t,e,r)}function ta(t){return new No(t)}const ou=Object.freeze(Object.defineProperty({__proto__:null,Bool:Oo,BoolClass:Eo,ConstructType:er,Empty:Ro,EmptyClass:_o,FixedIntClass:dr,FixedNatClass:Qt,Float32:Co,Float64:$o,FloatClass:rs,Func:ea,FuncClass:is,Int:Mo,Int16:Vo,Int32:Go,Int64:Ho,Int8:qo,IntClass:vo,Nat:ko,Nat16:zo,Nat32:Yo,Nat64:Ko,Nat8:jo,NatClass:To,Null:Fo,NullClass:Bo,Opt:Xo,OptClass:Or,PrimitiveType:pt,Principal:Wo,PrincipalClass:So,Rec:Do,RecClass:tr,Record:Jo,RecordClass:en,Reserved:Uo,ReservedClass:Kn,Service:ta,ServiceClass:No,Text:Po,TextClass:Ao,Tuple:Zo,TupleClass:ni,Type:ti,Unknown:su,UnknownClass:xo,Variant:Qo,VariantClass:ii,Vec:Lo,VecClass:ri,Visitor:iu,decode:Io,encode:Ci},Symbol.toStringTag,{value:"Module"}));var ra={},tn={};/*!
 * The buffer module from node.js, for the browser.
 *
 * @author   Feross Aboukhadijeh <https://feross.org>
 * @license  MIT
 */(function(t){var e=Qr,r=Dr,n=typeof Symbol=="function"&&typeof Symbol.for=="function"?Symbol.for("nodejs.util.inspect.custom"):null;t.Buffer=u,t.SlowBuffer=Y,t.INSPECT_MAX_BYTES=50;var i=2147483647;t.kMaxLength=i,u.TYPED_ARRAY_SUPPORT=c(),!u.TYPED_ARRAY_SUPPORT&&typeof console<"u"&&typeof console.error=="function"&&console.error("This browser lacks typed array (Uint8Array) support which is required by `buffer` v5.x. Use `buffer` v4.x if you require old browser support.");function c(){try{var h=new Uint8Array(1),s={foo:function(){return 42}};return Object.setPrototypeOf(s,Uint8Array.prototype),Object.setPrototypeOf(h,s),h.foo()===42}catch{return!1}}Object.defineProperty(u.prototype,"parent",{enumerable:!0,get:function(){if(u.isBuffer(this))return this.buffer}}),Object.defineProperty(u.prototype,"offset",{enumerable:!0,get:function(){if(u.isBuffer(this))return this.byteOffset}});function l(h){if(h>i)throw new RangeError('The value "'+h+'" is invalid for option "size"');var s=new Uint8Array(h);return Object.setPrototypeOf(s,u.prototype),s}function u(h,s,o){if(typeof h=="number"){if(typeof s=="string")throw new TypeError('The "string" argument must be of type string. Received type number');return N(h)}return y(h,s,o)}u.poolSize=8192;function y(h,s,o){if(typeof h=="string")return I(h,s);if(ArrayBuffer.isView(h))return g(h);if(h==null)throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof h);if(M(h,ArrayBuffer)||h&&M(h.buffer,ArrayBuffer)||typeof SharedArrayBuffer<"u"&&(M(h,SharedArrayBuffer)||h&&M(h.buffer,SharedArrayBuffer)))return q(h,s,o);if(typeof h=="number")throw new TypeError('The "value" argument must not be of type number. Received type number');var p=h.valueOf&&h.valueOf();if(p!=null&&p!==h)return u.from(p,s,o);var b=C(h);if(b)return b;if(typeof Symbol<"u"&&Symbol.toPrimitive!=null&&typeof h[Symbol.toPrimitive]=="function")return u.from(h[Symbol.toPrimitive]("string"),s,o);throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof h)}u.from=function(h,s,o){return y(h,s,o)},Object.setPrototypeOf(u.prototype,Uint8Array.prototype),Object.setPrototypeOf(u,Uint8Array);function _(h){if(typeof h!="number")throw new TypeError('"size" argument must be of type number');if(h<0)throw new RangeError('The value "'+h+'" is invalid for option "size"')}function B(h,s,o){return _(h),h<=0?l(h):s!==void 0?typeof o=="string"?l(h).fill(s,o):l(h).fill(s):l(h)}u.alloc=function(h,s,o){return B(h,s,o)};function N(h){return _(h),l(h<0?0:W(h)|0)}u.allocUnsafe=function(h){return N(h)},u.allocUnsafeSlow=function(h){return N(h)};function I(h,s){if((typeof s!="string"||s==="")&&(s="utf8"),!u.isEncoding(s))throw new TypeError("Unknown encoding: "+s);var o=$(h,s)|0,p=l(o),b=p.write(h,s);return b!==o&&(p=p.slice(0,b)),p}function v(h){for(var s=h.length<0?0:W(h.length)|0,o=l(s),p=0;p<s;p+=1)o[p]=h[p]&255;return o}function g(h){if(M(h,Uint8Array)){var s=new Uint8Array(h);return q(s.buffer,s.byteOffset,s.byteLength)}return v(h)}function q(h,s,o){if(s<0||h.byteLength<s)throw new RangeError('"offset" is outside of buffer bounds');if(h.byteLength<s+(o||0))throw new RangeError('"length" is outside of buffer bounds');var p;return s===void 0&&o===void 0?p=new Uint8Array(h):o===void 0?p=new Uint8Array(h,s):p=new Uint8Array(h,s,o),Object.setPrototypeOf(p,u.prototype),p}function C(h){if(u.isBuffer(h)){var s=W(h.length)|0,o=l(s);return o.length===0||h.copy(o,0,0,s),o}if(h.length!==void 0)return typeof h.length!="number"||U(h.length)?l(0):v(h);if(h.type==="Buffer"&&Array.isArray(h.data))return v(h.data)}function W(h){if(h>=i)throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+i.toString(16)+" bytes");return h|0}function Y(h){return+h!=h&&(h=0),u.alloc(+h)}u.isBuffer=function(s){return s!=null&&s._isBuffer===!0&&s!==u.prototype},u.compare=function(s,o){if(M(s,Uint8Array)&&(s=u.from(s,s.offset,s.byteLength)),M(o,Uint8Array)&&(o=u.from(o,o.offset,o.byteLength)),!u.isBuffer(s)||!u.isBuffer(o))throw new TypeError('The "buf1", "buf2" arguments must be one of type Buffer or Uint8Array');if(s===o)return 0;for(var p=s.length,b=o.length,T=0,V=Math.min(p,b);T<V;++T)if(s[T]!==o[T]){p=s[T],b=o[T];break}return p<b?-1:b<p?1:0},u.isEncoding=function(s){switch(String(s).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},u.concat=function(s,o){if(!Array.isArray(s))throw new TypeError('"list" argument must be an Array of Buffers');if(s.length===0)return u.alloc(0);var p;if(o===void 0)for(o=0,p=0;p<s.length;++p)o+=s[p].length;var b=u.allocUnsafe(o),T=0;for(p=0;p<s.length;++p){var V=s[p];if(M(V,Uint8Array))T+V.length>b.length?u.from(V).copy(b,T):Uint8Array.prototype.set.call(b,V,T);else if(u.isBuffer(V))V.copy(b,T);else throw new TypeError('"list" argument must be an Array of Buffers');T+=V.length}return b};function $(h,s){if(u.isBuffer(h))return h.length;if(ArrayBuffer.isView(h)||M(h,ArrayBuffer))return h.byteLength;if(typeof h!="string")throw new TypeError('The "string" argument must be one of type string, Buffer, or ArrayBuffer. Received type '+typeof h);var o=h.length,p=arguments.length>2&&arguments[2]===!0;if(!p&&o===0)return 0;for(var b=!1;;)switch(s){case"ascii":case"latin1":case"binary":return o;case"utf8":case"utf-8":return te(h).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return o*2;case"hex":return o>>>1;case"base64":return x(h).length;default:if(b)return p?-1:te(h).length;s=(""+s).toLowerCase(),b=!0}}u.byteLength=$;function re(h,s,o){var p=!1;if((s===void 0||s<0)&&(s=0),s>this.length||((o===void 0||o>this.length)&&(o=this.length),o<=0)||(o>>>=0,s>>>=0,o<=s))return"";for(h||(h="utf8");;)switch(h){case"hex":return ie(this,s,o);case"utf8":case"utf-8":return O(this,s,o);case"ascii":return G(this,s,o);case"latin1":case"binary":return X(this,s,o);case"base64":return S(this,s,o);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return we(this,s,o);default:if(p)throw new TypeError("Unknown encoding: "+h);h=(h+"").toLowerCase(),p=!0}}u.prototype._isBuffer=!0;function P(h,s,o){var p=h[s];h[s]=h[o],h[o]=p}u.prototype.swap16=function(){var s=this.length;if(s%2!==0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(var o=0;o<s;o+=2)P(this,o,o+1);return this},u.prototype.swap32=function(){var s=this.length;if(s%4!==0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(var o=0;o<s;o+=4)P(this,o,o+3),P(this,o+1,o+2);return this},u.prototype.swap64=function(){var s=this.length;if(s%8!==0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(var o=0;o<s;o+=8)P(this,o,o+7),P(this,o+1,o+6),P(this,o+2,o+5),P(this,o+3,o+4);return this},u.prototype.toString=function(){var s=this.length;return s===0?"":arguments.length===0?O(this,0,s):re.apply(this,arguments)},u.prototype.toLocaleString=u.prototype.toString,u.prototype.equals=function(s){if(!u.isBuffer(s))throw new TypeError("Argument must be a Buffer");return this===s?!0:u.compare(this,s)===0},u.prototype.inspect=function(){var s="",o=t.INSPECT_MAX_BYTES;return s=this.toString("hex",0,o).replace(/(.{2})/g,"$1 ").trim(),this.length>o&&(s+=" ... "),"<Buffer "+s+">"},n&&(u.prototype[n]=u.prototype.inspect),u.prototype.compare=function(s,o,p,b,T){if(M(s,Uint8Array)&&(s=u.from(s,s.offset,s.byteLength)),!u.isBuffer(s))throw new TypeError('The "target" argument must be one of type Buffer or Uint8Array. Received type '+typeof s);if(o===void 0&&(o=0),p===void 0&&(p=s?s.length:0),b===void 0&&(b=0),T===void 0&&(T=this.length),o<0||p>s.length||b<0||T>this.length)throw new RangeError("out of range index");if(b>=T&&o>=p)return 0;if(b>=T)return-1;if(o>=p)return 1;if(o>>>=0,p>>>=0,b>>>=0,T>>>=0,this===s)return 0;for(var V=T-b,ne=p-o,pe=Math.min(V,ne),ye=this.slice(b,T),xe=s.slice(o,p),d=0;d<pe;++d)if(ye[d]!==xe[d]){V=ye[d],ne=xe[d];break}return V<ne?-1:ne<V?1:0};function L(h,s,o,p,b){if(h.length===0)return-1;if(typeof o=="string"?(p=o,o=0):o>2147483647?o=2147483647:o<-2147483648&&(o=-2147483648),o=+o,U(o)&&(o=b?0:h.length-1),o<0&&(o=h.length+o),o>=h.length){if(b)return-1;o=h.length-1}else if(o<0)if(b)o=0;else return-1;if(typeof s=="string"&&(s=u.from(s,p)),u.isBuffer(s))return s.length===0?-1:Z(h,s,o,p,b);if(typeof s=="number")return s=s&255,typeof Uint8Array.prototype.indexOf=="function"?b?Uint8Array.prototype.indexOf.call(h,s,o):Uint8Array.prototype.lastIndexOf.call(h,s,o):Z(h,[s],o,p,b);throw new TypeError("val must be string, number or Buffer")}function Z(h,s,o,p,b){var T=1,V=h.length,ne=s.length;if(p!==void 0&&(p=String(p).toLowerCase(),p==="ucs2"||p==="ucs-2"||p==="utf16le"||p==="utf-16le")){if(h.length<2||s.length<2)return-1;T=2,V/=2,ne/=2,o/=2}function pe(f,E){return T===1?f[E]:f.readUInt16BE(E*T)}var ye;if(b){var xe=-1;for(ye=o;ye<V;ye++)if(pe(h,ye)===pe(s,xe===-1?0:ye-xe)){if(xe===-1&&(xe=ye),ye-xe+1===ne)return xe*T}else xe!==-1&&(ye-=ye-xe),xe=-1}else for(o+ne>V&&(o=V-ne),ye=o;ye>=0;ye--){for(var d=!0,a=0;a<ne;a++)if(pe(h,ye+a)!==pe(s,a)){d=!1;break}if(d)return ye}return-1}u.prototype.includes=function(s,o,p){return this.indexOf(s,o,p)!==-1},u.prototype.indexOf=function(s,o,p){return L(this,s,o,p,!0)},u.prototype.lastIndexOf=function(s,o,p){return L(this,s,o,p,!1)};function Q(h,s,o,p){o=Number(o)||0;var b=h.length-o;p?(p=Number(p),p>b&&(p=b)):p=b;var T=s.length;p>T/2&&(p=T/2);for(var V=0;V<p;++V){var ne=parseInt(s.substr(V*2,2),16);if(U(ne))return V;h[o+V]=ne}return V}function D(h,s,o,p){return A(te(s,h.length-o),h,o,p)}function J(h,s,o,p){return A(ae(s),h,o,p)}function he(h,s,o,p){return A(x(s),h,o,p)}function le(h,s,o,p){return A(m(s,h.length-o),h,o,p)}u.prototype.write=function(s,o,p,b){if(o===void 0)b="utf8",p=this.length,o=0;else if(p===void 0&&typeof o=="string")b=o,p=this.length,o=0;else if(isFinite(o))o=o>>>0,isFinite(p)?(p=p>>>0,b===void 0&&(b="utf8")):(b=p,p=void 0);else throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");var T=this.length-o;if((p===void 0||p>T)&&(p=T),s.length>0&&(p<0||o<0)||o>this.length)throw new RangeError("Attempt to write outside buffer bounds");b||(b="utf8");for(var V=!1;;)switch(b){case"hex":return Q(this,s,o,p);case"utf8":case"utf-8":return D(this,s,o,p);case"ascii":case"latin1":case"binary":return J(this,s,o,p);case"base64":return he(this,s,o,p);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return le(this,s,o,p);default:if(V)throw new TypeError("Unknown encoding: "+b);b=(""+b).toLowerCase(),V=!0}},u.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};function S(h,s,o){return s===0&&o===h.length?e.fromByteArray(h):e.fromByteArray(h.slice(s,o))}function O(h,s,o){o=Math.min(h.length,o);for(var p=[],b=s;b<o;){var T=h[b],V=null,ne=T>239?4:T>223?3:T>191?2:1;if(b+ne<=o){var pe,ye,xe,d;switch(ne){case 1:T<128&&(V=T);break;case 2:pe=h[b+1],(pe&192)===128&&(d=(T&31)<<6|pe&63,d>127&&(V=d));break;case 3:pe=h[b+1],ye=h[b+2],(pe&192)===128&&(ye&192)===128&&(d=(T&15)<<12|(pe&63)<<6|ye&63,d>2047&&(d<55296||d>57343)&&(V=d));break;case 4:pe=h[b+1],ye=h[b+2],xe=h[b+3],(pe&192)===128&&(ye&192)===128&&(xe&192)===128&&(d=(T&15)<<18|(pe&63)<<12|(ye&63)<<6|xe&63,d>65535&&d<1114112&&(V=d))}}V===null?(V=65533,ne=1):V>65535&&(V-=65536,p.push(V>>>10&1023|55296),V=56320|V&1023),p.push(V),b+=ne}return H(p)}var K=4096;function H(h){var s=h.length;if(s<=K)return String.fromCharCode.apply(String,h);for(var o="",p=0;p<s;)o+=String.fromCharCode.apply(String,h.slice(p,p+=K));return o}function G(h,s,o){var p="";o=Math.min(h.length,o);for(var b=s;b<o;++b)p+=String.fromCharCode(h[b]&127);return p}function X(h,s,o){var p="";o=Math.min(h.length,o);for(var b=s;b<o;++b)p+=String.fromCharCode(h[b]);return p}function ie(h,s,o){var p=h.length;(!s||s<0)&&(s=0),(!o||o<0||o>p)&&(o=p);for(var b="",T=s;T<o;++T)b+=k[h[T]];return b}function we(h,s,o){for(var p=h.slice(s,o),b="",T=0;T<p.length-1;T+=2)b+=String.fromCharCode(p[T]+p[T+1]*256);return b}u.prototype.slice=function(s,o){var p=this.length;s=~~s,o=o===void 0?p:~~o,s<0?(s+=p,s<0&&(s=0)):s>p&&(s=p),o<0?(o+=p,o<0&&(o=0)):o>p&&(o=p),o<s&&(o=s);var b=this.subarray(s,o);return Object.setPrototypeOf(b,u.prototype),b};function oe(h,s,o){if(h%1!==0||h<0)throw new RangeError("offset is not uint");if(h+s>o)throw new RangeError("Trying to access beyond buffer length")}u.prototype.readUintLE=u.prototype.readUIntLE=function(s,o,p){s=s>>>0,o=o>>>0,p||oe(s,o,this.length);for(var b=this[s],T=1,V=0;++V<o&&(T*=256);)b+=this[s+V]*T;return b},u.prototype.readUintBE=u.prototype.readUIntBE=function(s,o,p){s=s>>>0,o=o>>>0,p||oe(s,o,this.length);for(var b=this[s+--o],T=1;o>0&&(T*=256);)b+=this[s+--o]*T;return b},u.prototype.readUint8=u.prototype.readUInt8=function(s,o){return s=s>>>0,o||oe(s,1,this.length),this[s]},u.prototype.readUint16LE=u.prototype.readUInt16LE=function(s,o){return s=s>>>0,o||oe(s,2,this.length),this[s]|this[s+1]<<8},u.prototype.readUint16BE=u.prototype.readUInt16BE=function(s,o){return s=s>>>0,o||oe(s,2,this.length),this[s]<<8|this[s+1]},u.prototype.readUint32LE=u.prototype.readUInt32LE=function(s,o){return s=s>>>0,o||oe(s,4,this.length),(this[s]|this[s+1]<<8|this[s+2]<<16)+this[s+3]*16777216},u.prototype.readUint32BE=u.prototype.readUInt32BE=function(s,o){return s=s>>>0,o||oe(s,4,this.length),this[s]*16777216+(this[s+1]<<16|this[s+2]<<8|this[s+3])},u.prototype.readIntLE=function(s,o,p){s=s>>>0,o=o>>>0,p||oe(s,o,this.length);for(var b=this[s],T=1,V=0;++V<o&&(T*=256);)b+=this[s+V]*T;return T*=128,b>=T&&(b-=Math.pow(2,8*o)),b},u.prototype.readIntBE=function(s,o,p){s=s>>>0,o=o>>>0,p||oe(s,o,this.length);for(var b=o,T=1,V=this[s+--b];b>0&&(T*=256);)V+=this[s+--b]*T;return T*=128,V>=T&&(V-=Math.pow(2,8*o)),V},u.prototype.readInt8=function(s,o){return s=s>>>0,o||oe(s,1,this.length),this[s]&128?(255-this[s]+1)*-1:this[s]},u.prototype.readInt16LE=function(s,o){s=s>>>0,o||oe(s,2,this.length);var p=this[s]|this[s+1]<<8;return p&32768?p|4294901760:p},u.prototype.readInt16BE=function(s,o){s=s>>>0,o||oe(s,2,this.length);var p=this[s+1]|this[s]<<8;return p&32768?p|4294901760:p},u.prototype.readInt32LE=function(s,o){return s=s>>>0,o||oe(s,4,this.length),this[s]|this[s+1]<<8|this[s+2]<<16|this[s+3]<<24},u.prototype.readInt32BE=function(s,o){return s=s>>>0,o||oe(s,4,this.length),this[s]<<24|this[s+1]<<16|this[s+2]<<8|this[s+3]},u.prototype.readFloatLE=function(s,o){return s=s>>>0,o||oe(s,4,this.length),r.read(this,s,!0,23,4)},u.prototype.readFloatBE=function(s,o){return s=s>>>0,o||oe(s,4,this.length),r.read(this,s,!1,23,4)},u.prototype.readDoubleLE=function(s,o){return s=s>>>0,o||oe(s,8,this.length),r.read(this,s,!0,52,8)},u.prototype.readDoubleBE=function(s,o){return s=s>>>0,o||oe(s,8,this.length),r.read(this,s,!1,52,8)};function fe(h,s,o,p,b,T){if(!u.isBuffer(h))throw new TypeError('"buffer" argument must be a Buffer instance');if(s>b||s<T)throw new RangeError('"value" argument is out of bounds');if(o+p>h.length)throw new RangeError("Index out of range")}u.prototype.writeUintLE=u.prototype.writeUIntLE=function(s,o,p,b){if(s=+s,o=o>>>0,p=p>>>0,!b){var T=Math.pow(2,8*p)-1;fe(this,s,o,p,T,0)}var V=1,ne=0;for(this[o]=s&255;++ne<p&&(V*=256);)this[o+ne]=s/V&255;return o+p},u.prototype.writeUintBE=u.prototype.writeUIntBE=function(s,o,p,b){if(s=+s,o=o>>>0,p=p>>>0,!b){var T=Math.pow(2,8*p)-1;fe(this,s,o,p,T,0)}var V=p-1,ne=1;for(this[o+V]=s&255;--V>=0&&(ne*=256);)this[o+V]=s/ne&255;return o+p},u.prototype.writeUint8=u.prototype.writeUInt8=function(s,o,p){return s=+s,o=o>>>0,p||fe(this,s,o,1,255,0),this[o]=s&255,o+1},u.prototype.writeUint16LE=u.prototype.writeUInt16LE=function(s,o,p){return s=+s,o=o>>>0,p||fe(this,s,o,2,65535,0),this[o]=s&255,this[o+1]=s>>>8,o+2},u.prototype.writeUint16BE=u.prototype.writeUInt16BE=function(s,o,p){return s=+s,o=o>>>0,p||fe(this,s,o,2,65535,0),this[o]=s>>>8,this[o+1]=s&255,o+2},u.prototype.writeUint32LE=u.prototype.writeUInt32LE=function(s,o,p){return s=+s,o=o>>>0,p||fe(this,s,o,4,4294967295,0),this[o+3]=s>>>24,this[o+2]=s>>>16,this[o+1]=s>>>8,this[o]=s&255,o+4},u.prototype.writeUint32BE=u.prototype.writeUInt32BE=function(s,o,p){return s=+s,o=o>>>0,p||fe(this,s,o,4,4294967295,0),this[o]=s>>>24,this[o+1]=s>>>16,this[o+2]=s>>>8,this[o+3]=s&255,o+4},u.prototype.writeIntLE=function(s,o,p,b){if(s=+s,o=o>>>0,!b){var T=Math.pow(2,8*p-1);fe(this,s,o,p,T-1,-T)}var V=0,ne=1,pe=0;for(this[o]=s&255;++V<p&&(ne*=256);)s<0&&pe===0&&this[o+V-1]!==0&&(pe=1),this[o+V]=(s/ne>>0)-pe&255;return o+p},u.prototype.writeIntBE=function(s,o,p,b){if(s=+s,o=o>>>0,!b){var T=Math.pow(2,8*p-1);fe(this,s,o,p,T-1,-T)}var V=p-1,ne=1,pe=0;for(this[o+V]=s&255;--V>=0&&(ne*=256);)s<0&&pe===0&&this[o+V+1]!==0&&(pe=1),this[o+V]=(s/ne>>0)-pe&255;return o+p},u.prototype.writeInt8=function(s,o,p){return s=+s,o=o>>>0,p||fe(this,s,o,1,127,-128),s<0&&(s=255+s+1),this[o]=s&255,o+1},u.prototype.writeInt16LE=function(s,o,p){return s=+s,o=o>>>0,p||fe(this,s,o,2,32767,-32768),this[o]=s&255,this[o+1]=s>>>8,o+2},u.prototype.writeInt16BE=function(s,o,p){return s=+s,o=o>>>0,p||fe(this,s,o,2,32767,-32768),this[o]=s>>>8,this[o+1]=s&255,o+2},u.prototype.writeInt32LE=function(s,o,p){return s=+s,o=o>>>0,p||fe(this,s,o,4,2147483647,-2147483648),this[o]=s&255,this[o+1]=s>>>8,this[o+2]=s>>>16,this[o+3]=s>>>24,o+4},u.prototype.writeInt32BE=function(s,o,p){return s=+s,o=o>>>0,p||fe(this,s,o,4,2147483647,-2147483648),s<0&&(s=4294967295+s+1),this[o]=s>>>24,this[o+1]=s>>>16,this[o+2]=s>>>8,this[o+3]=s&255,o+4};function ee(h,s,o,p,b,T){if(o+p>h.length)throw new RangeError("Index out of range");if(o<0)throw new RangeError("Index out of range")}function w(h,s,o,p,b){return s=+s,o=o>>>0,b||ee(h,s,o,4),r.write(h,s,o,p,23,4),o+4}u.prototype.writeFloatLE=function(s,o,p){return w(this,s,o,!0,p)},u.prototype.writeFloatBE=function(s,o,p){return w(this,s,o,!1,p)};function se(h,s,o,p,b){return s=+s,o=o>>>0,b||ee(h,s,o,8),r.write(h,s,o,p,52,8),o+8}u.prototype.writeDoubleLE=function(s,o,p){return se(this,s,o,!0,p)},u.prototype.writeDoubleBE=function(s,o,p){return se(this,s,o,!1,p)},u.prototype.copy=function(s,o,p,b){if(!u.isBuffer(s))throw new TypeError("argument should be a Buffer");if(p||(p=0),!b&&b!==0&&(b=this.length),o>=s.length&&(o=s.length),o||(o=0),b>0&&b<p&&(b=p),b===p||s.length===0||this.length===0)return 0;if(o<0)throw new RangeError("targetStart out of bounds");if(p<0||p>=this.length)throw new RangeError("Index out of range");if(b<0)throw new RangeError("sourceEnd out of bounds");b>this.length&&(b=this.length),s.length-o<b-p&&(b=s.length-o+p);var T=b-p;return this===s&&typeof Uint8Array.prototype.copyWithin=="function"?this.copyWithin(o,p,b):Uint8Array.prototype.set.call(s,this.subarray(p,b),o),T},u.prototype.fill=function(s,o,p,b){if(typeof s=="string"){if(typeof o=="string"?(b=o,o=0,p=this.length):typeof p=="string"&&(b=p,p=this.length),b!==void 0&&typeof b!="string")throw new TypeError("encoding must be a string");if(typeof b=="string"&&!u.isEncoding(b))throw new TypeError("Unknown encoding: "+b);if(s.length===1){var T=s.charCodeAt(0);(b==="utf8"&&T<128||b==="latin1")&&(s=T)}}else typeof s=="number"?s=s&255:typeof s=="boolean"&&(s=Number(s));if(o<0||this.length<o||this.length<p)throw new RangeError("Out of range index");if(p<=o)return this;o=o>>>0,p=p===void 0?this.length:p>>>0,s||(s=0);var V;if(typeof s=="number")for(V=o;V<p;++V)this[V]=s;else{var ne=u.isBuffer(s)?s:u.from(s,b),pe=ne.length;if(pe===0)throw new TypeError('The value "'+s+'" is invalid for argument "value"');for(V=0;V<p-o;++V)this[V+o]=ne[V%pe]}return this};var ue=/[^+/0-9A-Za-z-_]/g;function de(h){if(h=h.split("=")[0],h=h.trim().replace(ue,""),h.length<2)return"";for(;h.length%4!==0;)h=h+"=";return h}function te(h,s){s=s||1/0;for(var o,p=h.length,b=null,T=[],V=0;V<p;++V){if(o=h.charCodeAt(V),o>55295&&o<57344){if(!b){if(o>56319){(s-=3)>-1&&T.push(239,191,189);continue}else if(V+1===p){(s-=3)>-1&&T.push(239,191,189);continue}b=o;continue}if(o<56320){(s-=3)>-1&&T.push(239,191,189),b=o;continue}o=(b-55296<<10|o-56320)+65536}else b&&(s-=3)>-1&&T.push(239,191,189);if(b=null,o<128){if((s-=1)<0)break;T.push(o)}else if(o<2048){if((s-=2)<0)break;T.push(o>>6|192,o&63|128)}else if(o<65536){if((s-=3)<0)break;T.push(o>>12|224,o>>6&63|128,o&63|128)}else if(o<1114112){if((s-=4)<0)break;T.push(o>>18|240,o>>12&63|128,o>>6&63|128,o&63|128)}else throw new Error("Invalid code point")}return T}function ae(h){for(var s=[],o=0;o<h.length;++o)s.push(h.charCodeAt(o)&255);return s}function m(h,s){for(var o,p,b,T=[],V=0;V<h.length&&!((s-=2)<0);++V)o=h.charCodeAt(V),p=o>>8,b=o%256,T.push(b),T.push(p);return T}function x(h){return e.toByteArray(de(h))}function A(h,s,o,p){for(var b=0;b<p&&!(b+o>=s.length||b>=h.length);++b)s[b+o]=h[b];return b}function M(h,s){return h instanceof s||h!=null&&h.constructor!=null&&h.constructor.name!=null&&h.constructor.name===s.name}function U(h){return h!==h}var k=function(){for(var h="0123456789abcdef",s=new Array(256),o=0;o<16;++o)for(var p=o*16,b=0;b<16;++b)s[p+b]=h[o]+h[b];return s}()})(tn);var na={exports:{}};(function(t){(function(e){var r,n=/^-?(?:\d+(?:\.\d*)?|\.\d+)(?:e[+-]?\d+)?$/i,i=Math.ceil,c=Math.floor,l="[BigNumber Error] ",u=l+"Number primitive has more than 15 significant digits: ",y=1e14,_=14,B=9007199254740991,N=[1,10,100,1e3,1e4,1e5,1e6,1e7,1e8,1e9,1e10,1e11,1e12,1e13],I=1e7,v=1e9;function g(L){var Z,Q,D,J=w.prototype={constructor:w,toString:null,valueOf:null},he=new w(1),le=20,S=4,O=-7,K=21,H=-1e7,G=1e7,X=!1,ie=1,we=0,oe={prefix:"",groupSize:3,secondaryGroupSize:0,groupSeparator:",",decimalSeparator:".",fractionGroupSize:0,fractionGroupSeparator:" ",suffix:""},fe="0123456789abcdefghijklmnopqrstuvwxyz",ee=!0;function w(m,x){var A,M,U,k,h,s,o,p,b=this;if(!(b instanceof w))return new w(m,x);if(x==null){if(m&&m._isBigNumber===!0){b.s=m.s,!m.c||m.e>G?b.c=b.e=null:m.e<H?b.c=[b.e=0]:(b.e=m.e,b.c=m.c.slice());return}if((s=typeof m=="number")&&m*0==0){if(b.s=1/m<0?(m=-m,-1):1,m===~~m){for(k=0,h=m;h>=10;h/=10,k++);k>G?b.c=b.e=null:(b.e=k,b.c=[m]);return}p=String(m)}else{if(!n.test(p=String(m)))return D(b,p,s);b.s=p.charCodeAt(0)==45?(p=p.slice(1),-1):1}(k=p.indexOf("."))>-1&&(p=p.replace(".","")),(h=p.search(/e/i))>0?(k<0&&(k=h),k+=+p.slice(h+1),p=p.substring(0,h)):k<0&&(k=p.length)}else{if(Y(x,2,fe.length,"Base"),x==10&&ee)return b=new w(m),te(b,le+b.e+1,S);if(p=String(m),s=typeof m=="number"){if(m*0!=0)return D(b,p,s,x);if(b.s=1/m<0?(p=p.slice(1),-1):1,w.DEBUG&&p.replace(/^0\.0*|\./,"").length>15)throw Error(u+m)}else b.s=p.charCodeAt(0)===45?(p=p.slice(1),-1):1;for(A=fe.slice(0,x),k=h=0,o=p.length;h<o;h++)if(A.indexOf(M=p.charAt(h))<0){if(M=="."){if(h>k){k=o;continue}}else if(!U&&(p==p.toUpperCase()&&(p=p.toLowerCase())||p==p.toLowerCase()&&(p=p.toUpperCase()))){U=!0,h=-1,k=0;continue}return D(b,String(m),s,x)}s=!1,p=Q(p,x,10,b.s),(k=p.indexOf("."))>-1?p=p.replace(".",""):k=p.length}for(h=0;p.charCodeAt(h)===48;h++);for(o=p.length;p.charCodeAt(--o)===48;);if(p=p.slice(h,++o)){if(o-=h,s&&w.DEBUG&&o>15&&(m>B||m!==c(m)))throw Error(u+b.s*m);if((k=k-h-1)>G)b.c=b.e=null;else if(k<H)b.c=[b.e=0];else{if(b.e=k,b.c=[],h=(k+1)%_,k<0&&(h+=_),h<o){for(h&&b.c.push(+p.slice(0,h)),o-=_;h<o;)b.c.push(+p.slice(h,h+=_));h=_-(p=p.slice(h)).length}else h-=o;for(;h--;p+="0");b.c.push(+p)}}else b.c=[b.e=0]}w.clone=g,w.ROUND_UP=0,w.ROUND_DOWN=1,w.ROUND_CEIL=2,w.ROUND_FLOOR=3,w.ROUND_HALF_UP=4,w.ROUND_HALF_DOWN=5,w.ROUND_HALF_EVEN=6,w.ROUND_HALF_CEIL=7,w.ROUND_HALF_FLOOR=8,w.EUCLID=9,w.config=w.set=function(m){var x,A;if(m!=null)if(typeof m=="object"){if(m.hasOwnProperty(x="DECIMAL_PLACES")&&(A=m[x],Y(A,0,v,x),le=A),m.hasOwnProperty(x="ROUNDING_MODE")&&(A=m[x],Y(A,0,8,x),S=A),m.hasOwnProperty(x="EXPONENTIAL_AT")&&(A=m[x],A&&A.pop?(Y(A[0],-v,0,x),Y(A[1],0,v,x),O=A[0],K=A[1]):(Y(A,-v,v,x),O=-(K=A<0?-A:A))),m.hasOwnProperty(x="RANGE"))if(A=m[x],A&&A.pop)Y(A[0],-v,-1,x),Y(A[1],1,v,x),H=A[0],G=A[1];else if(Y(A,-v,v,x),A)H=-(G=A<0?-A:A);else throw Error(l+x+" cannot be zero: "+A);if(m.hasOwnProperty(x="CRYPTO"))if(A=m[x],A===!!A)if(A)if(typeof crypto<"u"&&crypto&&(crypto.getRandomValues||crypto.randomBytes))X=A;else throw X=!A,Error(l+"crypto unavailable");else X=A;else throw Error(l+x+" not true or false: "+A);if(m.hasOwnProperty(x="MODULO_MODE")&&(A=m[x],Y(A,0,9,x),ie=A),m.hasOwnProperty(x="POW_PRECISION")&&(A=m[x],Y(A,0,v,x),we=A),m.hasOwnProperty(x="FORMAT"))if(A=m[x],typeof A=="object")oe=A;else throw Error(l+x+" not an object: "+A);if(m.hasOwnProperty(x="ALPHABET"))if(A=m[x],typeof A=="string"&&!/^.?$|[+\-.\s]|(.).*\1/.test(A))ee=A.slice(0,10)=="0123456789",fe=A;else throw Error(l+x+" invalid: "+A)}else throw Error(l+"Object expected: "+m);return{DECIMAL_PLACES:le,ROUNDING_MODE:S,EXPONENTIAL_AT:[O,K],RANGE:[H,G],CRYPTO:X,MODULO_MODE:ie,POW_PRECISION:we,FORMAT:oe,ALPHABET:fe}},w.isBigNumber=function(m){if(!m||m._isBigNumber!==!0)return!1;if(!w.DEBUG)return!0;var x,A,M=m.c,U=m.e,k=m.s;e:if({}.toString.call(M)=="[object Array]"){if((k===1||k===-1)&&U>=-v&&U<=v&&U===c(U)){if(M[0]===0){if(U===0&&M.length===1)return!0;break e}if(x=(U+1)%_,x<1&&(x+=_),String(M[0]).length==x){for(x=0;x<M.length;x++)if(A=M[x],A<0||A>=y||A!==c(A))break e;if(A!==0)return!0}}}else if(M===null&&U===null&&(k===null||k===1||k===-1))return!0;throw Error(l+"Invalid BigNumber: "+m)},w.maximum=w.max=function(){return ue(arguments,-1)},w.minimum=w.min=function(){return ue(arguments,1)},w.random=function(){var m=9007199254740992,x=Math.random()*m&2097151?function(){return c(Math.random()*m)}:function(){return(Math.random()*1073741824|0)*8388608+(Math.random()*8388608|0)};return function(A){var M,U,k,h,s,o=0,p=[],b=new w(he);if(A==null?A=le:Y(A,0,v),h=i(A/_),X)if(crypto.getRandomValues){for(M=crypto.getRandomValues(new Uint32Array(h*=2));o<h;)s=M[o]*131072+(M[o+1]>>>11),s>=9e15?(U=crypto.getRandomValues(new Uint32Array(2)),M[o]=U[0],M[o+1]=U[1]):(p.push(s%1e14),o+=2);o=h/2}else if(crypto.randomBytes){for(M=crypto.randomBytes(h*=7);o<h;)s=(M[o]&31)*281474976710656+M[o+1]*1099511627776+M[o+2]*4294967296+M[o+3]*16777216+(M[o+4]<<16)+(M[o+5]<<8)+M[o+6],s>=9e15?crypto.randomBytes(7).copy(M,o):(p.push(s%1e14),o+=7);o=h/7}else throw X=!1,Error(l+"crypto unavailable");if(!X)for(;o<h;)s=x(),s<9e15&&(p[o++]=s%1e14);for(h=p[--o],A%=_,h&&A&&(s=N[_-A],p[o]=c(h/s)*s);p[o]===0;p.pop(),o--);if(o<0)p=[k=0];else{for(k=-1;p[0]===0;p.splice(0,1),k-=_);for(o=1,s=p[0];s>=10;s/=10,o++);o<_&&(k-=_-o)}return b.e=k,b.c=p,b}}(),w.sum=function(){for(var m=1,x=arguments,A=new w(x[0]);m<x.length;)A=A.plus(x[m++]);return A},Q=function(){var m="0123456789";function x(A,M,U,k){for(var h,s=[0],o,p=0,b=A.length;p<b;){for(o=s.length;o--;s[o]*=M);for(s[0]+=k.indexOf(A.charAt(p++)),h=0;h<s.length;h++)s[h]>U-1&&(s[h+1]==null&&(s[h+1]=0),s[h+1]+=s[h]/U|0,s[h]%=U)}return s.reverse()}return function(A,M,U,k,h){var s,o,p,b,T,V,ne,pe,ye=A.indexOf("."),xe=le,d=S;for(ye>=0&&(b=we,we=0,A=A.replace(".",""),pe=new w(M),V=pe.pow(A.length-ye),we=b,pe.c=x(P(C(V.c),V.e,"0"),10,U,m),pe.e=pe.c.length),ne=x(A,M,U,h?(s=fe,m):(s=m,fe)),p=b=ne.length;ne[--b]==0;ne.pop());if(!ne[0])return s.charAt(0);if(ye<0?--p:(V.c=ne,V.e=p,V.s=k,V=Z(V,pe,xe,d,U),ne=V.c,T=V.r,p=V.e),o=p+xe+1,ye=ne[o],b=U/2,T=T||o<0||ne[o+1]!=null,T=d<4?(ye!=null||T)&&(d==0||d==(V.s<0?3:2)):ye>b||ye==b&&(d==4||T||d==6&&ne[o-1]&1||d==(V.s<0?8:7)),o<1||!ne[0])A=T?P(s.charAt(1),-xe,s.charAt(0)):s.charAt(0);else{if(ne.length=o,T)for(--U;++ne[--o]>U;)ne[o]=0,o||(++p,ne=[1].concat(ne));for(b=ne.length;!ne[--b];);for(ye=0,A="";ye<=b;A+=s.charAt(ne[ye++]));A=P(A,p,s.charAt(0))}return A}}(),Z=function(){function m(M,U,k){var h,s,o,p,b=0,T=M.length,V=U%I,ne=U/I|0;for(M=M.slice();T--;)o=M[T]%I,p=M[T]/I|0,h=ne*o+p*V,s=V*o+h%I*I+b,b=(s/k|0)+(h/I|0)+ne*p,M[T]=s%k;return b&&(M=[b].concat(M)),M}function x(M,U,k,h){var s,o;if(k!=h)o=k>h?1:-1;else for(s=o=0;s<k;s++)if(M[s]!=U[s]){o=M[s]>U[s]?1:-1;break}return o}function A(M,U,k,h){for(var s=0;k--;)M[k]-=s,s=M[k]<U[k]?1:0,M[k]=s*h+M[k]-U[k];for(;!M[0]&&M.length>1;M.splice(0,1));}return function(M,U,k,h,s){var o,p,b,T,V,ne,pe,ye,xe,d,a,f,E,F,z,j,_e,Ae=M.s==U.s?1:-1,Ee=M.c,be=U.c;if(!Ee||!Ee[0]||!be||!be[0])return new w(!M.s||!U.s||(Ee?be&&Ee[0]==be[0]:!be)?NaN:Ee&&Ee[0]==0||!be?Ae*0:Ae/0);for(ye=new w(Ae),xe=ye.c=[],p=M.e-U.e,Ae=k+p+1,s||(s=y,p=q(M.e/_)-q(U.e/_),Ae=Ae/_|0),b=0;be[b]==(Ee[b]||0);b++);if(be[b]>(Ee[b]||0)&&p--,Ae<0)xe.push(1),T=!0;else{for(F=Ee.length,j=be.length,b=0,Ae+=2,V=c(s/(be[0]+1)),V>1&&(be=m(be,V,s),Ee=m(Ee,V,s),j=be.length,F=Ee.length),E=j,d=Ee.slice(0,j),a=d.length;a<j;d[a++]=0);_e=be.slice(),_e=[0].concat(_e),z=be[0],be[1]>=s/2&&z++;do{if(V=0,o=x(be,d,j,a),o<0){if(f=d[0],j!=a&&(f=f*s+(d[1]||0)),V=c(f/z),V>1)for(V>=s&&(V=s-1),ne=m(be,V,s),pe=ne.length,a=d.length;x(ne,d,pe,a)==1;)V--,A(ne,j<pe?_e:be,pe,s),pe=ne.length,o=1;else V==0&&(o=V=1),ne=be.slice(),pe=ne.length;if(pe<a&&(ne=[0].concat(ne)),A(d,ne,a,s),a=d.length,o==-1)for(;x(be,d,j,a)<1;)V++,A(d,j<a?_e:be,a,s),a=d.length}else o===0&&(V++,d=[0]);xe[b++]=V,d[0]?d[a++]=Ee[E]||0:(d=[Ee[E]],a=1)}while((E++<F||d[0]!=null)&&Ae--);T=d[0]!=null,xe[0]||xe.splice(0,1)}if(s==y){for(b=1,Ae=xe[0];Ae>=10;Ae/=10,b++);te(ye,k+(ye.e=b+p*_-1)+1,h,T)}else ye.e=p,ye.r=+T;return ye}}();function se(m,x,A,M){var U,k,h,s,o;if(A==null?A=S:Y(A,0,8),!m.c)return m.toString();if(U=m.c[0],h=m.e,x==null)o=C(m.c),o=M==1||M==2&&(h<=O||h>=K)?re(o,h):P(o,h,"0");else if(m=te(new w(m),x,A),k=m.e,o=C(m.c),s=o.length,M==1||M==2&&(x<=k||k<=O)){for(;s<x;o+="0",s++);o=re(o,k)}else if(x-=h,o=P(o,k,"0"),k+1>s){if(--x>0)for(o+=".";x--;o+="0");}else if(x+=k-s,x>0)for(k+1==s&&(o+=".");x--;o+="0");return m.s<0&&U?"-"+o:o}function ue(m,x){for(var A,M,U=1,k=new w(m[0]);U<m.length;U++)M=new w(m[U]),(!M.s||(A=W(k,M))===x||A===0&&k.s===x)&&(k=M);return k}function de(m,x,A){for(var M=1,U=x.length;!x[--U];x.pop());for(U=x[0];U>=10;U/=10,M++);return(A=M+A*_-1)>G?m.c=m.e=null:A<H?m.c=[m.e=0]:(m.e=A,m.c=x),m}D=function(){var m=/^(-?)0([xbo])(?=\w[\w.]*$)/i,x=/^([^.]+)\.$/,A=/^\.([^.]+)$/,M=/^-?(Infinity|NaN)$/,U=/^\s*\+(?=[\w.])|^\s+|\s+$/g;return function(k,h,s,o){var p,b=s?h:h.replace(U,"");if(M.test(b))k.s=isNaN(b)?null:b<0?-1:1;else{if(!s&&(b=b.replace(m,function(T,V,ne){return p=(ne=ne.toLowerCase())=="x"?16:ne=="b"?2:8,!o||o==p?V:T}),o&&(p=o,b=b.replace(x,"$1").replace(A,"0.$1")),h!=b))return new w(b,p);if(w.DEBUG)throw Error(l+"Not a"+(o?" base "+o:"")+" number: "+h);k.s=null}k.c=k.e=null}}();function te(m,x,A,M){var U,k,h,s,o,p,b,T=m.c,V=N;if(T){e:{for(U=1,s=T[0];s>=10;s/=10,U++);if(k=x-U,k<0)k+=_,h=x,o=T[p=0],b=c(o/V[U-h-1]%10);else if(p=i((k+1)/_),p>=T.length)if(M){for(;T.length<=p;T.push(0));o=b=0,U=1,k%=_,h=k-_+1}else break e;else{for(o=s=T[p],U=1;s>=10;s/=10,U++);k%=_,h=k-_+U,b=h<0?0:c(o/V[U-h-1]%10)}if(M=M||x<0||T[p+1]!=null||(h<0?o:o%V[U-h-1]),M=A<4?(b||M)&&(A==0||A==(m.s<0?3:2)):b>5||b==5&&(A==4||M||A==6&&(k>0?h>0?o/V[U-h]:0:T[p-1])%10&1||A==(m.s<0?8:7)),x<1||!T[0])return T.length=0,M?(x-=m.e+1,T[0]=V[(_-x%_)%_],m.e=-x||0):T[0]=m.e=0,m;if(k==0?(T.length=p,s=1,p--):(T.length=p+1,s=V[_-k],T[p]=h>0?c(o/V[U-h]%V[h])*s:0),M)for(;;)if(p==0){for(k=1,h=T[0];h>=10;h/=10,k++);for(h=T[0]+=s,s=1;h>=10;h/=10,s++);k!=s&&(m.e++,T[0]==y&&(T[0]=1));break}else{if(T[p]+=s,T[p]!=y)break;T[p--]=0,s=1}for(k=T.length;T[--k]===0;T.pop());}m.e>G?m.c=m.e=null:m.e<H&&(m.c=[m.e=0])}return m}function ae(m){var x,A=m.e;return A===null?m.toString():(x=C(m.c),x=A<=O||A>=K?re(x,A):P(x,A,"0"),m.s<0?"-"+x:x)}return J.absoluteValue=J.abs=function(){var m=new w(this);return m.s<0&&(m.s=1),m},J.comparedTo=function(m,x){return W(this,new w(m,x))},J.decimalPlaces=J.dp=function(m,x){var A,M,U,k=this;if(m!=null)return Y(m,0,v),x==null?x=S:Y(x,0,8),te(new w(k),m+k.e+1,x);if(!(A=k.c))return null;if(M=((U=A.length-1)-q(this.e/_))*_,U=A[U])for(;U%10==0;U/=10,M--);return M<0&&(M=0),M},J.dividedBy=J.div=function(m,x){return Z(this,new w(m,x),le,S)},J.dividedToIntegerBy=J.idiv=function(m,x){return Z(this,new w(m,x),0,1)},J.exponentiatedBy=J.pow=function(m,x){var A,M,U,k,h,s,o,p,b,T=this;if(m=new w(m),m.c&&!m.isInteger())throw Error(l+"Exponent not an integer: "+ae(m));if(x!=null&&(x=new w(x)),s=m.e>14,!T.c||!T.c[0]||T.c[0]==1&&!T.e&&T.c.length==1||!m.c||!m.c[0])return b=new w(Math.pow(+ae(T),s?m.s*(2-$(m)):+ae(m))),x?b.mod(x):b;if(o=m.s<0,x){if(x.c?!x.c[0]:!x.s)return new w(NaN);M=!o&&T.isInteger()&&x.isInteger(),M&&(T=T.mod(x))}else{if(m.e>9&&(T.e>0||T.e<-1||(T.e==0?T.c[0]>1||s&&T.c[1]>=24e7:T.c[0]<8e13||s&&T.c[0]<=9999975e7)))return k=T.s<0&&$(m)?-0:0,T.e>-1&&(k=1/k),new w(o?1/k:k);we&&(k=i(we/_+2))}for(s?(A=new w(.5),o&&(m.s=1),p=$(m)):(U=Math.abs(+ae(m)),p=U%2),b=new w(he);;){if(p){if(b=b.times(T),!b.c)break;k?b.c.length>k&&(b.c.length=k):M&&(b=b.mod(x))}if(U){if(U=c(U/2),U===0)break;p=U%2}else if(m=m.times(A),te(m,m.e+1,1),m.e>14)p=$(m);else{if(U=+ae(m),U===0)break;p=U%2}T=T.times(T),k?T.c&&T.c.length>k&&(T.c.length=k):M&&(T=T.mod(x))}return M?b:(o&&(b=he.div(b)),x?b.mod(x):k?te(b,we,S,h):b)},J.integerValue=function(m){var x=new w(this);return m==null?m=S:Y(m,0,8),te(x,x.e+1,m)},J.isEqualTo=J.eq=function(m,x){return W(this,new w(m,x))===0},J.isFinite=function(){return!!this.c},J.isGreaterThan=J.gt=function(m,x){return W(this,new w(m,x))>0},J.isGreaterThanOrEqualTo=J.gte=function(m,x){return(x=W(this,new w(m,x)))===1||x===0},J.isInteger=function(){return!!this.c&&q(this.e/_)>this.c.length-2},J.isLessThan=J.lt=function(m,x){return W(this,new w(m,x))<0},J.isLessThanOrEqualTo=J.lte=function(m,x){return(x=W(this,new w(m,x)))===-1||x===0},J.isNaN=function(){return!this.s},J.isNegative=function(){return this.s<0},J.isPositive=function(){return this.s>0},J.isZero=function(){return!!this.c&&this.c[0]==0},J.minus=function(m,x){var A,M,U,k,h=this,s=h.s;if(m=new w(m,x),x=m.s,!s||!x)return new w(NaN);if(s!=x)return m.s=-x,h.plus(m);var o=h.e/_,p=m.e/_,b=h.c,T=m.c;if(!o||!p){if(!b||!T)return b?(m.s=-x,m):new w(T?h:NaN);if(!b[0]||!T[0])return T[0]?(m.s=-x,m):new w(b[0]?h:S==3?-0:0)}if(o=q(o),p=q(p),b=b.slice(),s=o-p){for((k=s<0)?(s=-s,U=b):(p=o,U=T),U.reverse(),x=s;x--;U.push(0));U.reverse()}else for(M=(k=(s=b.length)<(x=T.length))?s:x,s=x=0;x<M;x++)if(b[x]!=T[x]){k=b[x]<T[x];break}if(k&&(U=b,b=T,T=U,m.s=-m.s),x=(M=T.length)-(A=b.length),x>0)for(;x--;b[A++]=0);for(x=y-1;M>s;){if(b[--M]<T[M]){for(A=M;A&&!b[--A];b[A]=x);--b[A],b[M]+=y}b[M]-=T[M]}for(;b[0]==0;b.splice(0,1),--p);return b[0]?de(m,b,p):(m.s=S==3?-1:1,m.c=[m.e=0],m)},J.modulo=J.mod=function(m,x){var A,M,U=this;return m=new w(m,x),!U.c||!m.s||m.c&&!m.c[0]?new w(NaN):!m.c||U.c&&!U.c[0]?new w(U):(ie==9?(M=m.s,m.s=1,A=Z(U,m,0,3),m.s=M,A.s*=M):A=Z(U,m,0,ie),m=U.minus(A.times(m)),!m.c[0]&&ie==1&&(m.s=U.s),m)},J.multipliedBy=J.times=function(m,x){var A,M,U,k,h,s,o,p,b,T,V,ne,pe,ye,xe,d=this,a=d.c,f=(m=new w(m,x)).c;if(!a||!f||!a[0]||!f[0])return!d.s||!m.s||a&&!a[0]&&!f||f&&!f[0]&&!a?m.c=m.e=m.s=null:(m.s*=d.s,!a||!f?m.c=m.e=null:(m.c=[0],m.e=0)),m;for(M=q(d.e/_)+q(m.e/_),m.s*=d.s,o=a.length,T=f.length,o<T&&(pe=a,a=f,f=pe,U=o,o=T,T=U),U=o+T,pe=[];U--;pe.push(0));for(ye=y,xe=I,U=T;--U>=0;){for(A=0,V=f[U]%xe,ne=f[U]/xe|0,h=o,k=U+h;k>U;)p=a[--h]%xe,b=a[h]/xe|0,s=ne*p+b*V,p=V*p+s%xe*xe+pe[k]+A,A=(p/ye|0)+(s/xe|0)+ne*b,pe[k--]=p%ye;pe[k]=A}return A?++M:pe.splice(0,1),de(m,pe,M)},J.negated=function(){var m=new w(this);return m.s=-m.s||null,m},J.plus=function(m,x){var A,M=this,U=M.s;if(m=new w(m,x),x=m.s,!U||!x)return new w(NaN);if(U!=x)return m.s=-x,M.minus(m);var k=M.e/_,h=m.e/_,s=M.c,o=m.c;if(!k||!h){if(!s||!o)return new w(U/0);if(!s[0]||!o[0])return o[0]?m:new w(s[0]?M:U*0)}if(k=q(k),h=q(h),s=s.slice(),U=k-h){for(U>0?(h=k,A=o):(U=-U,A=s),A.reverse();U--;A.push(0));A.reverse()}for(U=s.length,x=o.length,U-x<0&&(A=o,o=s,s=A,x=U),U=0;x;)U=(s[--x]=s[x]+o[x]+U)/y|0,s[x]=y===s[x]?0:s[x]%y;return U&&(s=[U].concat(s),++h),de(m,s,h)},J.precision=J.sd=function(m,x){var A,M,U,k=this;if(m!=null&&m!==!!m)return Y(m,1,v),x==null?x=S:Y(x,0,8),te(new w(k),m,x);if(!(A=k.c))return null;if(U=A.length-1,M=U*_+1,U=A[U]){for(;U%10==0;U/=10,M--);for(U=A[0];U>=10;U/=10,M++);}return m&&k.e+1>M&&(M=k.e+1),M},J.shiftedBy=function(m){return Y(m,-B,B),this.times("1e"+m)},J.squareRoot=J.sqrt=function(){var m,x,A,M,U,k=this,h=k.c,s=k.s,o=k.e,p=le+4,b=new w("0.5");if(s!==1||!h||!h[0])return new w(!s||s<0&&(!h||h[0])?NaN:h?k:1/0);if(s=Math.sqrt(+ae(k)),s==0||s==1/0?(x=C(h),(x.length+o)%2==0&&(x+="0"),s=Math.sqrt(+x),o=q((o+1)/2)-(o<0||o%2),s==1/0?x="5e"+o:(x=s.toExponential(),x=x.slice(0,x.indexOf("e")+1)+o),A=new w(x)):A=new w(s+""),A.c[0]){for(o=A.e,s=o+p,s<3&&(s=0);;)if(U=A,A=b.times(U.plus(Z(k,U,p,1))),C(U.c).slice(0,s)===(x=C(A.c)).slice(0,s))if(A.e<o&&--s,x=x.slice(s-3,s+1),x=="9999"||!M&&x=="4999"){if(!M&&(te(U,U.e+le+2,0),U.times(U).eq(k))){A=U;break}p+=4,s+=4,M=1}else{(!+x||!+x.slice(1)&&x.charAt(0)=="5")&&(te(A,A.e+le+2,1),m=!A.times(A).eq(k));break}}return te(A,A.e+le+1,S,m)},J.toExponential=function(m,x){return m!=null&&(Y(m,0,v),m++),se(this,m,x,1)},J.toFixed=function(m,x){return m!=null&&(Y(m,0,v),m=m+this.e+1),se(this,m,x)},J.toFormat=function(m,x,A){var M,U=this;if(A==null)m!=null&&x&&typeof x=="object"?(A=x,x=null):m&&typeof m=="object"?(A=m,m=x=null):A=oe;else if(typeof A!="object")throw Error(l+"Argument not an object: "+A);if(M=U.toFixed(m,x),U.c){var k,h=M.split("."),s=+A.groupSize,o=+A.secondaryGroupSize,p=A.groupSeparator||"",b=h[0],T=h[1],V=U.s<0,ne=V?b.slice(1):b,pe=ne.length;if(o&&(k=s,s=o,o=k,pe-=k),s>0&&pe>0){for(k=pe%s||s,b=ne.substr(0,k);k<pe;k+=s)b+=p+ne.substr(k,s);o>0&&(b+=p+ne.slice(k)),V&&(b="-"+b)}M=T?b+(A.decimalSeparator||"")+((o=+A.fractionGroupSize)?T.replace(new RegExp("\\d{"+o+"}\\B","g"),"$&"+(A.fractionGroupSeparator||"")):T):b}return(A.prefix||"")+M+(A.suffix||"")},J.toFraction=function(m){var x,A,M,U,k,h,s,o,p,b,T,V,ne=this,pe=ne.c;if(m!=null&&(s=new w(m),!s.isInteger()&&(s.c||s.s!==1)||s.lt(he)))throw Error(l+"Argument "+(s.isInteger()?"out of range: ":"not an integer: ")+ae(s));if(!pe)return new w(ne);for(x=new w(he),p=A=new w(he),M=o=new w(he),V=C(pe),k=x.e=V.length-ne.e-1,x.c[0]=N[(h=k%_)<0?_+h:h],m=!m||s.comparedTo(x)>0?k>0?x:p:s,h=G,G=1/0,s=new w(V),o.c[0]=0;b=Z(s,x,0,1),U=A.plus(b.times(M)),U.comparedTo(m)!=1;)A=M,M=U,p=o.plus(b.times(U=p)),o=U,x=s.minus(b.times(U=x)),s=U;return U=Z(m.minus(A),M,0,1),o=o.plus(U.times(p)),A=A.plus(U.times(M)),o.s=p.s=ne.s,k=k*2,T=Z(p,M,k,S).minus(ne).abs().comparedTo(Z(o,A,k,S).minus(ne).abs())<1?[p,M]:[o,A],G=h,T},J.toNumber=function(){return+ae(this)},J.toPrecision=function(m,x){return m!=null&&Y(m,1,v),se(this,m,x,2)},J.toString=function(m){var x,A=this,M=A.s,U=A.e;return U===null?M?(x="Infinity",M<0&&(x="-"+x)):x="NaN":(m==null?x=U<=O||U>=K?re(C(A.c),U):P(C(A.c),U,"0"):m===10&&ee?(A=te(new w(A),le+U+1,S),x=P(C(A.c),A.e,"0")):(Y(m,2,fe.length,"Base"),x=Q(P(C(A.c),U,"0"),10,m,M,!0)),M<0&&A.c[0]&&(x="-"+x)),x},J.valueOf=J.toJSON=function(){return ae(this)},J._isBigNumber=!0,L!=null&&w.set(L),w}function q(L){var Z=L|0;return L>0||L===Z?Z:Z-1}function C(L){for(var Z,Q,D=1,J=L.length,he=L[0]+"";D<J;){for(Z=L[D++]+"",Q=_-Z.length;Q--;Z="0"+Z);he+=Z}for(J=he.length;he.charCodeAt(--J)===48;);return he.slice(0,J+1||1)}function W(L,Z){var Q,D,J=L.c,he=Z.c,le=L.s,S=Z.s,O=L.e,K=Z.e;if(!le||!S)return null;if(Q=J&&!J[0],D=he&&!he[0],Q||D)return Q?D?0:-S:le;if(le!=S)return le;if(Q=le<0,D=O==K,!J||!he)return D?0:!J^Q?1:-1;if(!D)return O>K^Q?1:-1;for(S=(O=J.length)<(K=he.length)?O:K,le=0;le<S;le++)if(J[le]!=he[le])return J[le]>he[le]^Q?1:-1;return O==K?0:O>K^Q?1:-1}function Y(L,Z,Q,D){if(L<Z||L>Q||L!==c(L))throw Error(l+(D||"Argument")+(typeof L=="number"?L<Z||L>Q?" out of range: ":" not an integer: ":" not a primitive number: ")+String(L))}function $(L){var Z=L.c.length-1;return q(L.e/_)==Z&&L.c[Z]%2!=0}function re(L,Z){return(L.length>1?L.charAt(0)+"."+L.slice(1):L)+(Z<0?"e":"e+")+Z}function P(L,Z,Q){var D,J;if(Z<0){for(J=Q+".";++Z;J+=Q);L=J+L}else if(D=L.length,++Z>D){for(J=Q,Z-=D;--Z;J+=Q);L+=J}else Z<D&&(L=L.slice(0,Z)+"."+L.slice(Z));return L}r=g(),r.default=r.BigNumber=r,t.exports?t.exports=r:(e||(e=typeof self<"u"&&self?self:window),e.BigNumber=r)})(Rr)})(na);var si=na.exports,au=function(e,r,n){var i=new e.Uint8Array(n),c=r.pushInt,l=r.pushInt32,u=r.pushInt32Neg,y=r.pushInt64,_=r.pushInt64Neg,B=r.pushFloat,N=r.pushFloatSingle,I=r.pushFloatDouble,v=r.pushTrue,g=r.pushFalse,q=r.pushUndefined,C=r.pushNull,W=r.pushInfinity,Y=r.pushInfinityNeg,$=r.pushNaN,re=r.pushNaNNeg,P=r.pushArrayStart,L=r.pushArrayStartFixed,Z=r.pushArrayStartFixed32,Q=r.pushArrayStartFixed64,D=r.pushObjectStart,J=r.pushObjectStartFixed,he=r.pushObjectStartFixed32,le=r.pushObjectStartFixed64,S=r.pushByteString,O=r.pushByteStringStart,K=r.pushUtf8String,H=r.pushUtf8StringStart,G=r.pushSimpleUnassigned,X=r.pushTagStart,ie=r.pushTagStart4,we=r.pushTagStart8,oe=r.pushTagUnassigned,fe=r.pushBreak,ee=e.Math.pow,w=0,se=0,ue=0;function de(R){for(R=R|0,w=0,se=R;(w|0)<(se|0)&&(ue=bc[i[w]&255](i[w]|0)|0,!((ue|0)>0)););return ue|0}function te(R){return R=R|0,((w|0)+(R|0)|0)<(se|0)?0:1}function ae(R){return R=R|0,i[R|0]<<8|i[R+1|0]|0}function m(R){return R=R|0,i[R|0]<<24|i[R+1|0]<<16|i[R+2|0]<<8|i[R+3|0]|0}function x(R){return R=R|0,c(R|0),w=w+1|0,0}function A(R){return R=R|0,te(1)|0?1:(c(i[w+1|0]|0),w=w+2|0,0)}function M(R){return R=R|0,te(2)|0?1:(c(ae(w+1|0)|0),w=w+3|0,0)}function U(R){return R=R|0,te(4)|0?1:(l(ae(w+1|0)|0,ae(w+3|0)|0),w=w+5|0,0)}function k(R){return R=R|0,te(8)|0?1:(y(ae(w+1|0)|0,ae(w+3|0)|0,ae(w+5|0)|0,ae(w+7|0)|0),w=w+9|0,0)}function h(R){return R=R|0,c(-1-(R-32|0)|0),w=w+1|0,0}function s(R){return R=R|0,te(1)|0?1:(c(-1-(i[w+1|0]|0)|0),w=w+2|0,0)}function o(R){R=R|0;var Ne=0;return te(2)|0?1:(Ne=ae(w+1|0)|0,c(-1-(Ne|0)|0),w=w+3|0,0)}function p(R){return R=R|0,te(4)|0?1:(u(ae(w+1|0)|0,ae(w+3|0)|0),w=w+5|0,0)}function b(R){return R=R|0,te(8)|0?1:(_(ae(w+1|0)|0,ae(w+3|0)|0,ae(w+5|0)|0,ae(w+7|0)|0),w=w+9|0,0)}function T(R){R=R|0;var Ne=0,Ie=0,Te=0;return Te=R-64|0,te(Te|0)|0?1:(Ne=w+1|0,Ie=(w+1|0)+(Te|0)|0,S(Ne|0,Ie|0),w=Ie|0,0)}function V(R){R=R|0;var Ne=0,Ie=0,Te=0;return te(1)|0||(Te=i[w+1|0]|0,Ne=w+2|0,Ie=(w+2|0)+(Te|0)|0,te(Te+1|0)|0)?1:(S(Ne|0,Ie|0),w=Ie|0,0)}function ne(R){R=R|0;var Ne=0,Ie=0,Te=0;return te(2)|0||(Te=ae(w+1|0)|0,Ne=w+3|0,Ie=(w+3|0)+(Te|0)|0,te(Te+2|0)|0)?1:(S(Ne|0,Ie|0),w=Ie|0,0)}function pe(R){R=R|0;var Ne=0,Ie=0,Te=0;return te(4)|0||(Te=m(w+1|0)|0,Ne=w+5|0,Ie=(w+5|0)+(Te|0)|0,te(Te+4|0)|0)?1:(S(Ne|0,Ie|0),w=Ie|0,0)}function ye(R){return R=R|0,1}function xe(R){return R=R|0,O(),w=w+1|0,0}function d(R){R=R|0;var Ne=0,Ie=0,Te=0;return Te=R-96|0,te(Te|0)|0?1:(Ne=w+1|0,Ie=(w+1|0)+(Te|0)|0,K(Ne|0,Ie|0),w=Ie|0,0)}function a(R){R=R|0;var Ne=0,Ie=0,Te=0;return te(1)|0||(Te=i[w+1|0]|0,Ne=w+2|0,Ie=(w+2|0)+(Te|0)|0,te(Te+1|0)|0)?1:(K(Ne|0,Ie|0),w=Ie|0,0)}function f(R){R=R|0;var Ne=0,Ie=0,Te=0;return te(2)|0||(Te=ae(w+1|0)|0,Ne=w+3|0,Ie=(w+3|0)+(Te|0)|0,te(Te+2|0)|0)?1:(K(Ne|0,Ie|0),w=Ie|0,0)}function E(R){R=R|0;var Ne=0,Ie=0,Te=0;return te(4)|0||(Te=m(w+1|0)|0,Ne=w+5|0,Ie=(w+5|0)+(Te|0)|0,te(Te+4|0)|0)?1:(K(Ne|0,Ie|0),w=Ie|0,0)}function F(R){return R=R|0,1}function z(R){return R=R|0,H(),w=w+1|0,0}function j(R){return R=R|0,L(R-128|0),w=w+1|0,0}function _e(R){return R=R|0,te(1)|0?1:(L(i[w+1|0]|0),w=w+2|0,0)}function Ae(R){return R=R|0,te(2)|0?1:(L(ae(w+1|0)|0),w=w+3|0,0)}function Ee(R){return R=R|0,te(4)|0?1:(Z(ae(w+1|0)|0,ae(w+3|0)|0),w=w+5|0,0)}function be(R){return R=R|0,te(8)|0?1:(Q(ae(w+1|0)|0,ae(w+3|0)|0,ae(w+5|0)|0,ae(w+7|0)|0),w=w+9|0,0)}function Re(R){return R=R|0,P(),w=w+1|0,0}function Me(R){R=R|0;var Ne=0;return Ne=R-160|0,te(Ne|0)|0?1:(J(Ne|0),w=w+1|0,0)}function hi(R){return R=R|0,te(1)|0?1:(J(i[w+1|0]|0),w=w+2|0,0)}function di(R){return R=R|0,te(2)|0?1:(J(ae(w+1|0)|0),w=w+3|0,0)}function pi(R){return R=R|0,te(4)|0?1:(he(ae(w+1|0)|0,ae(w+3|0)|0),w=w+5|0,0)}function yi(R){return R=R|0,te(8)|0?1:(le(ae(w+1|0)|0,ae(w+3|0)|0,ae(w+5|0)|0,ae(w+7|0)|0),w=w+9|0,0)}function gi(R){return R=R|0,D(),w=w+1|0,0}function Gt(R){return R=R|0,X(R-192|0|0),w=w+1|0,0}function ml(R){return R=R|0,X(R|0),w=w+1|0,0}function bl(R){return R=R|0,X(R|0),w=w+1|0,0}function _l(R){return R=R|0,X(R|0),w=w+1|0,0}function xl(R){return R=R|0,X(R|0),w=w+1|0,0}function We(R){return R=R|0,X(R-192|0|0),w=w+1|0,0}function El(R){return R=R|0,X(R|0),w=w+1|0,0}function Bl(R){return R=R|0,X(R|0),w=w+1|0,0}function Al(R){return R=R|0,X(R|0),w=w+1|0,0}function oc(R){return R=R|0,te(1)|0?1:(X(i[w+1|0]|0),w=w+2|0,0)}function ac(R){return R=R|0,te(2)|0?1:(X(ae(w+1|0)|0),w=w+3|0,0)}function cc(R){return R=R|0,te(4)|0?1:(ie(ae(w+1|0)|0,ae(w+3|0)|0),w=w+5|0,0)}function uc(R){return R=R|0,te(8)|0?1:(we(ae(w+1|0)|0,ae(w+3|0)|0,ae(w+5|0)|0,ae(w+7|0)|0),w=w+9|0,0)}function He(R){return R=R|0,G((R|0)-224|0),w=w+1|0,0}function fc(R){return R=R|0,g(),w=w+1|0,0}function lc(R){return R=R|0,v(),w=w+1|0,0}function hc(R){return R=R|0,C(),w=w+1|0,0}function dc(R){return R=R|0,q(),w=w+1|0,0}function pc(R){return R=R|0,te(1)|0?1:(G(i[w+1|0]|0),w=w+2|0,0)}function yc(R){R=R|0;var Ne=0,Ie=0,Te=1,on=0,kr=0,vl=0;return te(2)|0?1:(Ne=i[w+1|0]|0,Ie=i[w+2|0]|0,(Ne|0)&128&&(Te=-1),on=+(((Ne|0)&124)>>2),kr=+(((Ne|0)&3)<<8|Ie),+on==0?B(+(+Te*5960464477539063e-23*+kr)):+on==31?+Te==1?+kr>0?$():W():+kr>0?re():Y():B(+(+Te*ee(2,+(+on-25))*+(1024+kr))),w=w+3|0,0)}function gc(R){return R=R|0,te(4)|0?1:(N(i[w+1|0]|0,i[w+2|0]|0,i[w+3|0]|0,i[w+4|0]|0),w=w+5|0,0)}function wc(R){return R=R|0,te(8)|0?1:(I(i[w+1|0]|0,i[w+2|0]|0,i[w+3|0]|0,i[w+4|0]|0,i[w+5|0]|0,i[w+6|0]|0,i[w+7|0]|0,i[w+8|0]|0),w=w+9|0,0)}function Fe(R){return R=R|0,1}function mc(R){return R=R|0,fe(),w=w+1|0,0}var bc=[x,x,x,x,x,x,x,x,x,x,x,x,x,x,x,x,x,x,x,x,x,x,x,x,A,M,U,k,Fe,Fe,Fe,Fe,h,h,h,h,h,h,h,h,h,h,h,h,h,h,h,h,h,h,h,h,h,h,h,h,s,o,p,b,Fe,Fe,Fe,Fe,T,T,T,T,T,T,T,T,T,T,T,T,T,T,T,T,T,T,T,T,T,T,T,T,V,ne,pe,ye,Fe,Fe,Fe,xe,d,d,d,d,d,d,d,d,d,d,d,d,d,d,d,d,d,d,d,d,d,d,d,d,a,f,E,F,Fe,Fe,Fe,z,j,j,j,j,j,j,j,j,j,j,j,j,j,j,j,j,j,j,j,j,j,j,j,j,_e,Ae,Ee,be,Fe,Fe,Fe,Re,Me,Me,Me,Me,Me,Me,Me,Me,Me,Me,Me,Me,Me,Me,Me,Me,Me,Me,Me,Me,Me,Me,Me,Me,hi,di,pi,yi,Fe,Fe,Fe,gi,Gt,Gt,Gt,Gt,Gt,Gt,We,We,We,We,We,We,We,We,We,We,We,We,We,We,We,We,We,We,oc,ac,cc,uc,Fe,Fe,Fe,Fe,He,He,He,He,He,He,He,He,He,He,He,He,He,He,He,He,He,He,He,He,fc,lc,hc,dc,pc,yc,gc,wc,Fe,Fe,Fe,mc];return{parse:de}},oi={},nt={};const ss=si.BigNumber;nt.MT={POS_INT:0,NEG_INT:1,BYTE_STRING:2,UTF8_STRING:3,ARRAY:4,MAP:5,TAG:6,SIMPLE_FLOAT:7};nt.TAG={DATE_STRING:0,DATE_EPOCH:1,POS_BIGINT:2,NEG_BIGINT:3,DECIMAL_FRAC:4,BIGFLOAT:5,BASE64URL_EXPECTED:21,BASE64_EXPECTED:22,BASE16_EXPECTED:23,CBOR:24,URI:32,BASE64URL:33,BASE64:34,REGEXP:35,MIME:36};nt.NUMBYTES={ZERO:0,ONE:24,TWO:25,FOUR:26,EIGHT:27,INDEFINITE:31};nt.SIMPLE={FALSE:20,TRUE:21,NULL:22,UNDEFINED:23};nt.SYMS={NULL:Symbol("null"),UNDEFINED:Symbol("undef"),PARENT:Symbol("parent"),BREAK:Symbol("break"),STREAM:Symbol("stream")};nt.SHIFT32=Math.pow(2,32);nt.SHIFT16=Math.pow(2,16);nt.MAX_SAFE_HIGH=2097151;nt.NEG_ONE=new ss(-1);nt.TEN=new ss(10);nt.TWO=new ss(2);nt.PARENT={ARRAY:0,OBJECT:1,MAP:2,TAG:3,BYTE_STRING:4,UTF8_STRING:5};(function(t){const{Buffer:e}=tn,r=si.BigNumber,n=nt,i=n.SHIFT32,c=n.SHIFT16,l=2097151;t.parseHalf=function(_){var B,N,I;return I=_[0]&128?-1:1,B=(_[0]&124)>>2,N=(_[0]&3)<<8|_[1],B?B===31?I*(N?0/0:1/0):I*Math.pow(2,B-25)*(1024+N):I*5960464477539063e-23*N};function u(y){return y<16?"0"+y.toString(16):y.toString(16)}t.arrayBufferToBignumber=function(y){const _=y.byteLength;let B="";for(let N=0;N<_;N++)B+=u(y[N]);return new r(B,16)},t.buildMap=y=>{const _=new Map,B=Object.keys(y),N=B.length;for(let I=0;I<N;I++)_.set(B[I],y[B[I]]);return _},t.buildInt32=(y,_)=>y*c+_,t.buildInt64=(y,_,B,N)=>{const I=t.buildInt32(y,_),v=t.buildInt32(B,N);return I>l?new r(I).times(i).plus(v):I*i+v},t.writeHalf=function(_,B){const N=e.allocUnsafe(4);N.writeFloatBE(B,0);const I=N.readUInt32BE(0);if(I&8191)return!1;var v=I>>16&32768;const g=I>>23&255,q=I&8388607;if(g>=113&&g<=142)v+=(g-112<<10)+(q>>13);else if(g>=103&&g<113){if(q&(1<<126-g)-1)return!1;v+=q+8388608>>126-g}else return!1;return _.writeUInt16BE(v,0),!0},t.keySorter=function(y,_){var B=y[0].byteLength,N=_[0].byteLength;return B>N?1:N>B?-1:y[0].compare(_[0])},t.isNegativeZero=y=>y===0&&1/y<0,t.nextPowerOf2=y=>{let _=0;if(y&&!(y&y-1))return y;for(;y!==0;)y>>=1,_+=1;return 1<<_}})(oi);const os=nt,cu=os.MT,un=os.SIMPLE,xi=os.SYMS;let uu=class $i{constructor(e){if(typeof e!="number")throw new Error("Invalid Simple type: "+typeof e);if(e<0||e>255||(e|0)!==e)throw new Error("value must be a small positive integer: "+e);this.value=e}toString(){return"simple("+this.value+")"}inspect(){return"simple("+this.value+")"}encodeCBOR(e){return e._pushInt(this.value,cu.SIMPLE_FLOAT)}static isSimple(e){return e instanceof $i}static decode(e,r){switch(r==null&&(r=!0),e){case un.FALSE:return!1;case un.TRUE:return!0;case un.NULL:return r?null:xi.NULL;case un.UNDEFINED:return r?void 0:xi.UNDEFINED;case-1:if(!r)throw new Error("Invalid BREAK");return xi.BREAK;default:return new $i(e)}}};var ia=uu;let fu=class qi{constructor(e,r,n){if(this.tag=e,this.value=r,this.err=n,typeof this.tag!="number")throw new Error("Invalid tag type ("+typeof this.tag+")");if(this.tag<0||(this.tag|0)!==this.tag)throw new Error("Tag must be a positive integer: "+this.tag)}toString(){return`${this.tag}(${JSON.stringify(this.value)})`}encodeCBOR(e){return e._pushTag(this.tag),e.pushAny(this.value)}convert(e){var r,n;if(n=e!=null?e[this.tag]:void 0,typeof n!="function"&&(n=qi["_tag"+this.tag],typeof n!="function"))return this;try{return n.call(qi,this.value)}catch(i){return r=i,this.err=r,this}}};var sa=fu;const oa=self.location?self.location.protocol+"//"+self.location.host:"",Vi=self.URL;let lu=class{constructor(e="",r=oa){this.super=new Vi(e,r),this.path=this.pathname+this.search,this.auth=this.username&&this.password?this.username+":"+this.password:null,this.query=this.search&&this.search.startsWith("?")?this.search.slice(1):null}get hash(){return this.super.hash}get host(){return this.super.host}get hostname(){return this.super.hostname}get href(){return this.super.href}get origin(){return this.super.origin}get password(){return this.super.password}get pathname(){return this.super.pathname}get port(){return this.super.port}get protocol(){return this.super.protocol}get search(){return this.super.search}get searchParams(){return this.super.searchParams}get username(){return this.super.username}set hash(e){this.super.hash=e}set host(e){this.super.host=e}set hostname(e){this.super.hostname=e}set href(e){this.super.href=e}set origin(e){this.super.origin=e}set password(e){this.super.password=e}set pathname(e){this.super.pathname=e}set port(e){this.super.port=e}set protocol(e){this.super.protocol=e}set search(e){this.super.search=e}set searchParams(e){this.super.searchParams=e}set username(e){this.super.username=e}createObjectURL(e){return this.super.createObjectURL(e)}revokeObjectURL(e){this.super.revokeObjectURL(e)}toJSON(){return this.super.toJSON()}toString(){return this.super.toString()}format(){return this.toString()}};function hu(t){if(typeof t=="string")return new Vi(t).toString();if(!(t instanceof Vi)){const e=t.username&&t.password?`${t.username}:${t.password}@`:"",r=t.auth?t.auth+"@":"",n=t.port?":"+t.port:"",i=t.protocol?t.protocol+"//":"",c=t.host||"",l=t.hostname||"",u=t.search||(t.query?"?"+t.query:""),y=t.hash||"",_=t.pathname||"",B=t.path||_+u;return`${i}${e||r}${c||l+n}${B}${y}`}}var aa={URLWithLegacySupport:lu,URLSearchParams:self.URLSearchParams,defaultBase:oa,format:hu};const{URLWithLegacySupport:xs,format:du}=aa;var pu=(t,e={},r={},n)=>{let i=e.protocol?e.protocol.replace(":",""):"http";i=(r[i]||n||i)+":";let c;try{c=new xs(t)}catch{c={}}const l=Object.assign({},e,{protocol:i||c.protocol,host:e.host||c.host});return new xs(t,du(l)).toString()};const{URLWithLegacySupport:yu,format:gu,URLSearchParams:wu,defaultBase:mu}=aa,bu=pu;var ca={URL:yu,URLSearchParams:wu,format:gu,relative:bu,defaultBase:mu};const{Buffer:wr}=tn,Es=Dr,_u=si.BigNumber,xu=au,it=oi,Oe=nt,Eu=ia,Bu=sa,{URL:Au}=ca;let Gi=class Hi{constructor(e){e=e||{},!e.size||e.size<65536?e.size=65536:e.size=it.nextPowerOf2(e.size),this._heap=new ArrayBuffer(e.size),this._heap8=new Uint8Array(this._heap),this._buffer=wr.from(this._heap),this._reset(),this._knownTags=Object.assign({0:r=>new Date(r),1:r=>new Date(r*1e3),2:r=>it.arrayBufferToBignumber(r),3:r=>Oe.NEG_ONE.minus(it.arrayBufferToBignumber(r)),4:r=>Oe.TEN.pow(r[0]).times(r[1]),5:r=>Oe.TWO.pow(r[0]).times(r[1]),32:r=>new Au(r),35:r=>new RegExp(r)},e.tags),this.parser=xu(Rr,{log:console.log.bind(console),pushInt:this.pushInt.bind(this),pushInt32:this.pushInt32.bind(this),pushInt32Neg:this.pushInt32Neg.bind(this),pushInt64:this.pushInt64.bind(this),pushInt64Neg:this.pushInt64Neg.bind(this),pushFloat:this.pushFloat.bind(this),pushFloatSingle:this.pushFloatSingle.bind(this),pushFloatDouble:this.pushFloatDouble.bind(this),pushTrue:this.pushTrue.bind(this),pushFalse:this.pushFalse.bind(this),pushUndefined:this.pushUndefined.bind(this),pushNull:this.pushNull.bind(this),pushInfinity:this.pushInfinity.bind(this),pushInfinityNeg:this.pushInfinityNeg.bind(this),pushNaN:this.pushNaN.bind(this),pushNaNNeg:this.pushNaNNeg.bind(this),pushArrayStart:this.pushArrayStart.bind(this),pushArrayStartFixed:this.pushArrayStartFixed.bind(this),pushArrayStartFixed32:this.pushArrayStartFixed32.bind(this),pushArrayStartFixed64:this.pushArrayStartFixed64.bind(this),pushObjectStart:this.pushObjectStart.bind(this),pushObjectStartFixed:this.pushObjectStartFixed.bind(this),pushObjectStartFixed32:this.pushObjectStartFixed32.bind(this),pushObjectStartFixed64:this.pushObjectStartFixed64.bind(this),pushByteString:this.pushByteString.bind(this),pushByteStringStart:this.pushByteStringStart.bind(this),pushUtf8String:this.pushUtf8String.bind(this),pushUtf8StringStart:this.pushUtf8StringStart.bind(this),pushSimpleUnassigned:this.pushSimpleUnassigned.bind(this),pushTagUnassigned:this.pushTagUnassigned.bind(this),pushTagStart:this.pushTagStart.bind(this),pushTagStart4:this.pushTagStart4.bind(this),pushTagStart8:this.pushTagStart8.bind(this),pushBreak:this.pushBreak.bind(this)},this._heap)}get _depth(){return this._parents.length}get _currentParent(){return this._parents[this._depth-1]}get _ref(){return this._currentParent.ref}_closeParent(){var e=this._parents.pop();if(e.length>0)throw new Error(`Missing ${e.length} elements`);switch(e.type){case Oe.PARENT.TAG:this._push(this.createTag(e.ref[0],e.ref[1]));break;case Oe.PARENT.BYTE_STRING:this._push(this.createByteString(e.ref,e.length));break;case Oe.PARENT.UTF8_STRING:this._push(this.createUtf8String(e.ref,e.length));break;case Oe.PARENT.MAP:if(e.values%2>0)throw new Error("Odd number of elements in the map");this._push(this.createMap(e.ref,e.length));break;case Oe.PARENT.OBJECT:if(e.values%2>0)throw new Error("Odd number of elements in the map");this._push(this.createObject(e.ref,e.length));break;case Oe.PARENT.ARRAY:this._push(this.createArray(e.ref,e.length));break}this._currentParent&&this._currentParent.type===Oe.PARENT.TAG&&this._dec()}_dec(){const e=this._currentParent;e.length<0||(e.length--,e.length===0&&this._closeParent())}_push(e,r){const n=this._currentParent;switch(n.values++,n.type){case Oe.PARENT.ARRAY:case Oe.PARENT.BYTE_STRING:case Oe.PARENT.UTF8_STRING:n.length>-1?this._ref[this._ref.length-n.length]=e:this._ref.push(e),this._dec();break;case Oe.PARENT.OBJECT:n.tmpKey!=null?(this._ref[n.tmpKey]=e,n.tmpKey=null,this._dec()):(n.tmpKey=e,typeof n.tmpKey!="string"&&(n.type=Oe.PARENT.MAP,n.ref=it.buildMap(n.ref)));break;case Oe.PARENT.MAP:n.tmpKey!=null?(this._ref.set(n.tmpKey,e),n.tmpKey=null,this._dec()):n.tmpKey=e;break;case Oe.PARENT.TAG:this._ref.push(e),r||this._dec();break;default:throw new Error("Unknown parent type")}}_createParent(e,r,n){this._parents[this._depth]={type:r,length:n,ref:e,values:0,tmpKey:null}}_reset(){this._res=[],this._parents=[{type:Oe.PARENT.ARRAY,length:-1,ref:this._res,values:0,tmpKey:null}]}createTag(e,r){const n=this._knownTags[e];return n?n(r):new Bu(e,r)}createMap(e,r){return e}createObject(e,r){return e}createArray(e,r){return e}createByteString(e,r){return wr.concat(e)}createByteStringFromHeap(e,r){return e===r?wr.alloc(0):wr.from(this._heap.slice(e,r))}createInt(e){return e}createInt32(e,r){return it.buildInt32(e,r)}createInt64(e,r,n,i){return it.buildInt64(e,r,n,i)}createFloat(e){return e}createFloatSingle(e,r,n,i){return Es.read([e,r,n,i],0,!1,23,4)}createFloatDouble(e,r,n,i,c,l,u,y){return Es.read([e,r,n,i,c,l,u,y],0,!1,52,8)}createInt32Neg(e,r){return-1-it.buildInt32(e,r)}createInt64Neg(e,r,n,i){const c=it.buildInt32(e,r),l=it.buildInt32(n,i);return c>Oe.MAX_SAFE_HIGH?Oe.NEG_ONE.minus(new _u(c).times(Oe.SHIFT32).plus(l)):-1-(c*Oe.SHIFT32+l)}createTrue(){return!0}createFalse(){return!1}createNull(){return null}createUndefined(){}createInfinity(){return 1/0}createInfinityNeg(){return-1/0}createNaN(){return NaN}createNaNNeg(){return NaN}createUtf8String(e,r){return e.join("")}createUtf8StringFromHeap(e,r){return e===r?"":this._buffer.toString("utf8",e,r)}createSimpleUnassigned(e){return new Eu(e)}pushInt(e){this._push(this.createInt(e))}pushInt32(e,r){this._push(this.createInt32(e,r))}pushInt64(e,r,n,i){this._push(this.createInt64(e,r,n,i))}pushFloat(e){this._push(this.createFloat(e))}pushFloatSingle(e,r,n,i){this._push(this.createFloatSingle(e,r,n,i))}pushFloatDouble(e,r,n,i,c,l,u,y){this._push(this.createFloatDouble(e,r,n,i,c,l,u,y))}pushInt32Neg(e,r){this._push(this.createInt32Neg(e,r))}pushInt64Neg(e,r,n,i){this._push(this.createInt64Neg(e,r,n,i))}pushTrue(){this._push(this.createTrue())}pushFalse(){this._push(this.createFalse())}pushNull(){this._push(this.createNull())}pushUndefined(){this._push(this.createUndefined())}pushInfinity(){this._push(this.createInfinity())}pushInfinityNeg(){this._push(this.createInfinityNeg())}pushNaN(){this._push(this.createNaN())}pushNaNNeg(){this._push(this.createNaNNeg())}pushArrayStart(){this._createParent([],Oe.PARENT.ARRAY,-1)}pushArrayStartFixed(e){this._createArrayStartFixed(e)}pushArrayStartFixed32(e,r){const n=it.buildInt32(e,r);this._createArrayStartFixed(n)}pushArrayStartFixed64(e,r,n,i){const c=it.buildInt64(e,r,n,i);this._createArrayStartFixed(c)}pushObjectStart(){this._createObjectStartFixed(-1)}pushObjectStartFixed(e){this._createObjectStartFixed(e)}pushObjectStartFixed32(e,r){const n=it.buildInt32(e,r);this._createObjectStartFixed(n)}pushObjectStartFixed64(e,r,n,i){const c=it.buildInt64(e,r,n,i);this._createObjectStartFixed(c)}pushByteStringStart(){this._parents[this._depth]={type:Oe.PARENT.BYTE_STRING,length:-1,ref:[],values:0,tmpKey:null}}pushByteString(e,r){this._push(this.createByteStringFromHeap(e,r))}pushUtf8StringStart(){this._parents[this._depth]={type:Oe.PARENT.UTF8_STRING,length:-1,ref:[],values:0,tmpKey:null}}pushUtf8String(e,r){this._push(this.createUtf8StringFromHeap(e,r))}pushSimpleUnassigned(e){this._push(this.createSimpleUnassigned(e))}pushTagStart(e){this._parents[this._depth]={type:Oe.PARENT.TAG,length:1,ref:[e]}}pushTagStart4(e,r){this.pushTagStart(it.buildInt32(e,r))}pushTagStart8(e,r,n,i){this.pushTagStart(it.buildInt64(e,r,n,i))}pushTagUnassigned(e){this._push(this.createTag(e))}pushBreak(){if(this._currentParent.length>-1)throw new Error("Unexpected break");this._closeParent()}_createObjectStartFixed(e){if(e===0){this._push(this.createObject({}));return}this._createParent({},Oe.PARENT.OBJECT,e)}_createArrayStartFixed(e){if(e===0){this._push(this.createArray([]));return}this._createParent(new Array(e),Oe.PARENT.ARRAY,e)}_decode(e){if(e.byteLength===0)throw new Error("Input too short");this._reset(),this._heap8.set(e);const r=this.parser.parse(e.byteLength);if(this._depth>1){for(;this._currentParent.length===0;)this._closeParent();if(this._depth>1)throw new Error("Undeterminated nesting")}if(r>0)throw new Error("Failed to parse");if(this._res.length===0)throw new Error("No valid result")}decodeFirst(e){return this._decode(e),this._res[0]}decodeAll(e){return this._decode(e),this._res}static decode(e,r){return typeof e=="string"&&(e=wr.from(e,r||"hex")),new Hi({size:e.length}).decodeFirst(e)}static decodeAll(e,r){return typeof e=="string"&&(e=wr.from(e,r||"hex")),new Hi({size:e.length}).decodeAll(e)}};Gi.decodeFirst=Gi.decode;var ua=Gi;const{Buffer:Ei}=tn,vu=ua,Tu=oi;class as extends vu{createTag(e,r){return`${e}(${r})`}createInt(e){return super.createInt(e).toString()}createInt32(e,r){return super.createInt32(e,r).toString()}createInt64(e,r,n,i){return super.createInt64(e,r,n,i).toString()}createInt32Neg(e,r){return super.createInt32Neg(e,r).toString()}createInt64Neg(e,r,n,i){return super.createInt64Neg(e,r,n,i).toString()}createTrue(){return"true"}createFalse(){return"false"}createFloat(e){const r=super.createFloat(e);return Tu.isNegativeZero(e)?"-0_1":`${r}_1`}createFloatSingle(e,r,n,i){return`${super.createFloatSingle(e,r,n,i)}_2`}createFloatDouble(e,r,n,i,c,l,u,y){return`${super.createFloatDouble(e,r,n,i,c,l,u,y)}_3`}createByteString(e,r){const n=e.join(", ");return r===-1?`(_ ${n})`:`h'${n}`}createByteStringFromHeap(e,r){return`h'${Ei.from(super.createByteStringFromHeap(e,r)).toString("hex")}'`}createInfinity(){return"Infinity_1"}createInfinityNeg(){return"-Infinity_1"}createNaN(){return"NaN_1"}createNaNNeg(){return"-NaN_1"}createNull(){return"null"}createUndefined(){return"undefined"}createSimpleUnassigned(e){return`simple(${e})`}createArray(e,r){const n=super.createArray(e,r);return r===-1?`[_ ${n.join(", ")}]`:`[${n.join(", ")}]`}createMap(e,r){const n=super.createMap(e),i=Array.from(n.keys()).reduce(Bs(n),"");return r===-1?`{_ ${i}}`:`{${i}}`}createObject(e,r){const n=super.createObject(e),i=Object.keys(n).reduce(Bs(n),"");return r===-1?`{_ ${i}}`:`{${i}}`}createUtf8String(e,r){const n=e.join(", ");return r===-1?`(_ ${n})`:`"${n}"`}createUtf8StringFromHeap(e,r){return`"${Ei.from(super.createUtf8StringFromHeap(e,r)).toString("utf8")}"`}static diagnose(e,r){return typeof e=="string"&&(e=Ei.from(e,r||"hex")),new as().decodeFirst(e)}}var Su=as;function Bs(t){return(e,r)=>e?`${e}, ${r}: ${t[r]}`:`${r}: ${t[r]}`}const{Buffer:Nt}=tn,{URL:Nu}=ca,ji=si.BigNumber,Bi=oi,Ke=nt,yt=Ke.MT,fn=Ke.NUMBYTES,As=Ke.SHIFT32,vs=Ke.SYMS,mr=Ke.TAG,Iu=Ke.MT.SIMPLE_FLOAT<<5|Ke.NUMBYTES.TWO,Ru=Ke.MT.SIMPLE_FLOAT<<5|Ke.NUMBYTES.FOUR,Uu=Ke.MT.SIMPLE_FLOAT<<5|Ke.NUMBYTES.EIGHT,Ou=Ke.MT.SIMPLE_FLOAT<<5|Ke.SIMPLE.TRUE,Fu=Ke.MT.SIMPLE_FLOAT<<5|Ke.SIMPLE.FALSE,Pu=Ke.MT.SIMPLE_FLOAT<<5|Ke.SIMPLE.UNDEFINED,Ts=Ke.MT.SIMPLE_FLOAT<<5|Ke.SIMPLE.NULL,Mu=new ji("0x20000000000000"),ku=Nt.from("f97e00","hex"),Cu=Nt.from("f9fc00","hex"),$u=Nt.from("f97c00","hex");function qu(t){return{}.toString.call(t).slice(8,-1)}class Wn{constructor(e){e=e||{},this.streaming=typeof e.stream=="function",this.onData=e.stream,this.semanticTypes=[[Nu,this._pushUrl],[ji,this._pushBigNumber]];const r=e.genTypes||[],n=r.length;for(let i=0;i<n;i++)this.addSemanticType(r[i][0],r[i][1]);this._reset()}addSemanticType(e,r){const n=this.semanticTypes.length;for(let i=0;i<n;i++)if(this.semanticTypes[i][0]===e){const l=this.semanticTypes[i][1];return this.semanticTypes[i][1]=r,l}return this.semanticTypes.push([e,r]),null}push(e){return e&&(this.result[this.offset]=e,this.resultMethod[this.offset]=0,this.resultLength[this.offset]=e.length,this.offset++,this.streaming&&this.onData(this.finalize())),!0}pushWrite(e,r,n){return this.result[this.offset]=e,this.resultMethod[this.offset]=r,this.resultLength[this.offset]=n,this.offset++,this.streaming&&this.onData(this.finalize()),!0}_pushUInt8(e){return this.pushWrite(e,1,1)}_pushUInt16BE(e){return this.pushWrite(e,2,2)}_pushUInt32BE(e){return this.pushWrite(e,3,4)}_pushDoubleBE(e){return this.pushWrite(e,4,8)}_pushNaN(){return this.push(ku)}_pushInfinity(e){const r=e<0?Cu:$u;return this.push(r)}_pushFloat(e){const r=Nt.allocUnsafe(2);if(Bi.writeHalf(r,e)&&Bi.parseHalf(r)===e)return this._pushUInt8(Iu)&&this.push(r);const n=Nt.allocUnsafe(4);return n.writeFloatBE(e,0),n.readFloatBE(0)===e?this._pushUInt8(Ru)&&this.push(n):this._pushUInt8(Uu)&&this._pushDoubleBE(e)}_pushInt(e,r,n){const i=r<<5;return e<24?this._pushUInt8(i|e):e<=255?this._pushUInt8(i|fn.ONE)&&this._pushUInt8(e):e<=65535?this._pushUInt8(i|fn.TWO)&&this._pushUInt16BE(e):e<=4294967295?this._pushUInt8(i|fn.FOUR)&&this._pushUInt32BE(e):e<=Number.MAX_SAFE_INTEGER?this._pushUInt8(i|fn.EIGHT)&&this._pushUInt32BE(Math.floor(e/As))&&this._pushUInt32BE(e%As):r===yt.NEG_INT?this._pushFloat(n):this._pushFloat(e)}_pushIntNum(e){return e<0?this._pushInt(-e-1,yt.NEG_INT,e):this._pushInt(e,yt.POS_INT)}_pushNumber(e){switch(!1){case e===e:return this._pushNaN(e);case isFinite(e):return this._pushInfinity(e);case e%1!==0:return this._pushIntNum(e);default:return this._pushFloat(e)}}_pushString(e){const r=Nt.byteLength(e,"utf8");return this._pushInt(r,yt.UTF8_STRING)&&this.pushWrite(e,5,r)}_pushBoolean(e){return this._pushUInt8(e?Ou:Fu)}_pushUndefined(e){return this._pushUInt8(Pu)}_pushArray(e,r){const n=r.length;if(!e._pushInt(n,yt.ARRAY))return!1;for(let i=0;i<n;i++)if(!e.pushAny(r[i]))return!1;return!0}_pushTag(e){return this._pushInt(e,yt.TAG)}_pushDate(e,r){return e._pushTag(mr.DATE_EPOCH)&&e.pushAny(Math.round(r/1e3))}_pushBuffer(e,r){return e._pushInt(r.length,yt.BYTE_STRING)&&e.push(r)}_pushNoFilter(e,r){return e._pushBuffer(e,r.slice())}_pushRegexp(e,r){return e._pushTag(mr.REGEXP)&&e.pushAny(r.source)}_pushSet(e,r){if(!e._pushInt(r.size,yt.ARRAY))return!1;for(const n of r)if(!e.pushAny(n))return!1;return!0}_pushUrl(e,r){return e._pushTag(mr.URI)&&e.pushAny(r.format())}_pushBigint(e){let r=mr.POS_BIGINT;e.isNegative()&&(e=e.negated().minus(1),r=mr.NEG_BIGINT);let n=e.toString(16);n.length%2&&(n="0"+n);const i=Nt.from(n,"hex");return this._pushTag(r)&&this._pushBuffer(this,i)}_pushBigNumber(e,r){if(r.isNaN())return e._pushNaN();if(!r.isFinite())return e._pushInfinity(r.isNegative()?-1/0:1/0);if(r.isInteger())return e._pushBigint(r);if(!(e._pushTag(mr.DECIMAL_FRAC)&&e._pushInt(2,yt.ARRAY)))return!1;const n=r.decimalPlaces(),i=r.multipliedBy(new ji(10).pow(n));return e._pushIntNum(-n)?i.abs().isLessThan(Mu)?e._pushIntNum(i.toNumber()):e._pushBigint(i):!1}_pushMap(e,r){return e._pushInt(r.size,yt.MAP)?this._pushRawMap(r.size,Array.from(r)):!1}_pushObject(e){if(!e)return this._pushUInt8(Ts);for(var r=this.semanticTypes.length,n=0;n<r;n++)if(e instanceof this.semanticTypes[n][0])return this.semanticTypes[n][1].call(e,this,e);var i=e.encodeCBOR;if(typeof i=="function")return i.call(e,this);var c=Object.keys(e),l=c.length;return this._pushInt(l,yt.MAP)?this._pushRawMap(l,c.map(u=>[u,e[u]])):!1}_pushRawMap(e,r){r=r.map(function(i){return i[0]=Wn.encode(i[0]),i}).sort(Bi.keySorter);for(var n=0;n<e;n++)if(!this.push(r[n][0])||!this.pushAny(r[n][1]))return!1;return!0}write(e){return this.pushAny(e)}pushAny(e){var r=qu(e);switch(r){case"Number":return this._pushNumber(e);case"String":return this._pushString(e);case"Boolean":return this._pushBoolean(e);case"Object":return this._pushObject(e);case"Array":return this._pushArray(this,e);case"Uint8Array":return this._pushBuffer(this,Nt.isBuffer(e)?e:Nt.from(e));case"Null":return this._pushUInt8(Ts);case"Undefined":return this._pushUndefined(e);case"Map":return this._pushMap(this,e);case"Set":return this._pushSet(this,e);case"URL":return this._pushUrl(this,e);case"BigNumber":return this._pushBigNumber(this,e);case"Date":return this._pushDate(this,e);case"RegExp":return this._pushRegexp(this,e);case"Symbol":switch(e){case vs.NULL:return this._pushObject(null);case vs.UNDEFINED:return this._pushUndefined(void 0);default:throw new Error("Unknown symbol: "+e.toString())}default:throw new Error("Unknown type: "+typeof e+", "+(e?e.toString():""))}}finalize(){if(this.offset===0)return null;for(var e=this.result,r=this.resultLength,n=this.resultMethod,i=this.offset,c=0,l=0;l<i;l++)c+=r[l];var u=Nt.allocUnsafe(c),y=0,_=0;for(l=0;l<i;l++){switch(_=r[l],n[l]){case 0:e[l].copy(u,y);break;case 1:u.writeUInt8(e[l],y,!0);break;case 2:u.writeUInt16BE(e[l],y,!0);break;case 3:u.writeUInt32BE(e[l],y,!0);break;case 4:u.writeDoubleBE(e[l],y,!0);break;case 5:u.write(e[l],y,_,"utf8");break;default:throw new Error("unkown method")}y+=_}var B=u;return this._reset(),B}_reset(){this.result=[],this.resultMethod=[],this.resultLength=[],this.offset=0}static encode(e){const r=new Wn;if(!r.pushAny(e))throw new Error("Failed to encode input");return r.finalize()}}var Vu=Wn;(function(t){t.Diagnose=Su,t.Decoder=ua,t.Encoder=Vu,t.Simple=ia,t.Tagged=sa,t.decodeAll=t.Decoder.decodeAll,t.decodeFirst=t.Decoder.decodeFirst,t.diagnose=t.Diagnose.diagnose,t.encode=t.Encoder.encode,t.decode=t.Decoder.decode,t.leveldb={decode:t.Decoder.decodeAll,encode:t.Encoder.encode,buffer:!0,name:"cbor"}})(ra);const fa=Ec(ra);function xt(t){return En(ts.create().update(new Uint8Array(t)).digest())}function An(t){if(t instanceof fa.Tagged)return An(t.value);if(typeof t=="string")return la(t);if(typeof t=="number")return xt(qe(t));if(t instanceof ArrayBuffer||ArrayBuffer.isView(t))return xt(t);if(Array.isArray(t)){const e=t.map(An);return xt(Ot(...e))}else{if(t&&typeof t=="object"&&t._isPrincipal)return xt(t.toUint8Array());if(typeof t=="object"&&t!==null&&typeof t.toHash=="function")return An(t.toHash());if(typeof t=="object")return Zn(t);if(typeof t=="bigint")return xt(qe(t))}throw Object.assign(new Error(`Attempt to hash a value of unsupported type: ${t}`),{value:t})}const la=t=>{const e=new TextEncoder().encode(t);return xt(e)};function Ss(t){return Zn(t)}function Zn(t){const n=Object.entries(t).filter(([,l])=>l!==void 0).map(([l,u])=>{const y=la(l),_=An(u);return[y,_]}).sort(([l],[u])=>yo(l,u)),i=Ot(...n.map(l=>Ot(...l)));return xt(i)}globalThis&&globalThis.__rest;new TextEncoder().encode(`
ic-request`);class Ns{getPrincipal(){return ve.anonymous()}async transformRequest(e){return Object.assign(Object.assign({},e),{body:{content:e.body}})}}var $t={},Mr={},Pe={};Object.defineProperty(Pe,"__esModule",{value:!0});const Gu=9007199254740992;function Vt(t,...e){const r=new Uint8Array(t.byteLength+e.reduce((i,c)=>i+c.byteLength,0));r.set(new Uint8Array(t),0);let n=t.byteLength;for(const i of e)r.set(new Uint8Array(i),n),n+=i.byteLength;return r.buffer}function Et(t,e,r){r=r.replace(/[^0-9a-fA-F]/g,"");const n=2**(e-24);r=r.slice(-n*2).padStart(n*2,"0");const i=[(t<<5)+e].concat(r.match(/../g).map(c=>parseInt(c,16)));return new Uint8Array(i).buffer}function ai(t,e){if(e<24)return new Uint8Array([(t<<5)+e]).buffer;{const r=e<=255?24:e<=65535?25:e<=4294967295?26:27;return Et(t,r,e.toString(16))}}function ha(t){const e=[];for(let r=0;r<t.length;r++){let n=t.charCodeAt(r);n<128?e.push(n):n<2048?e.push(192|n>>6,128|n&63):n<55296||n>=57344?e.push(224|n>>12,128|n>>6&63,128|n&63):(r++,n=(n&1023)<<10|t.charCodeAt(r)&1023,e.push(240|n>>18,128|n>>12&63,128|n>>6&63,128|n&63))}return Vt(new Uint8Array(ai(3,t.length)),new Uint8Array(e))}function Hu(t,e){if(t==14277111)return Vt(new Uint8Array([217,217,247]),e);if(t<24)return Vt(new Uint8Array([192+t]),e);{const r=t<=255?24:t<=65535?25:t<=4294967295?26:27,n=2**(r-24),i=t.toString(16).slice(-n*2).padStart(n*2,"0"),c=[192+r].concat(i.match(/../g).map(l=>parseInt(l,16)));return new Uint8Array(c).buffer}}Pe.tagged=Hu;function rn(t){return new Uint8Array(t).buffer}Pe.raw=rn;function cs(t){if(isNaN(t))throw new RangeError("Invalid number.");t=Math.min(Math.max(0,t),23);const e=[0+t];return new Uint8Array(e).buffer}Pe.uSmall=cs;function da(t,e){if(t=parseInt(""+t,e),isNaN(t))throw new RangeError("Invalid number.");return t=Math.min(Math.max(0,t),255),t=t.toString(16),Et(0,24,t)}Pe.u8=da;function pa(t,e){if(t=parseInt(""+t,e),isNaN(t))throw new RangeError("Invalid number.");return t=Math.min(Math.max(0,t),65535),t=t.toString(16),Et(0,25,t)}Pe.u16=pa;function ya(t,e){if(t=parseInt(""+t,e),isNaN(t))throw new RangeError("Invalid number.");return t=Math.min(Math.max(0,t),4294967295),t=t.toString(16),Et(0,26,t)}Pe.u32=ya;function us(t,e){if(typeof t=="string"&&e==16){if(t.match(/[^0-9a-fA-F]/))throw new RangeError("Invalid number.");return Et(0,27,t)}if(t=parseInt(""+t,e),isNaN(t))throw new RangeError("Invalid number.");return t=Math.min(Math.max(0,t),Gu),t=t.toString(16),Et(0,27,t)}Pe.u64=us;function ga(t){if(isNaN(t))throw new RangeError("Invalid number.");if(t===0)return cs(0);t=Math.min(Math.max(0,-t),24)-1;const e=[32+t];return new Uint8Array(e).buffer}Pe.iSmall=ga;function wa(t,e){if(t=parseInt(""+t,e),isNaN(t))throw new RangeError("Invalid number.");return t=Math.min(Math.max(0,-t-1),255),t=t.toString(16),Et(1,24,t)}Pe.i8=wa;function ma(t,e){if(t=parseInt(""+t,e),isNaN(t))throw new RangeError("Invalid number.");return t=Math.min(Math.max(0,-t-1),65535),t=t.toString(16),Et(1,25,t)}Pe.i16=ma;function ba(t,e){if(t=parseInt(""+t,e),isNaN(t))throw new RangeError("Invalid number.");return t=Math.min(Math.max(0,-t-1),4294967295),t=t.toString(16),Et(1,26,t)}Pe.i32=ba;function _a(t,e){if(typeof t=="string"&&e==16){if(t.startsWith("-")?t=t.slice(1):t="0",t.match(/[^0-9a-fA-F]/)||t.length>16)throw new RangeError("Invalid number.");let r=!1,n=t.split("").reduceRight((i,c)=>{if(r)return c+i;let l=parseInt(c,16)-1;return l>=0?(r=!0,l.toString(16)+i):"f"+i},"");return r?Et(1,27,n):us(0)}if(t=parseInt(""+t,e),isNaN(t))throw new RangeError("Invalid number.");return t=Math.min(Math.max(0,-t-1),9007199254740992),t=t.toString(16),Et(1,27,t)}Pe.i64=_a;function ju(t){return t>=0?t<24?cs(t):t<=255?da(t):t<=65535?pa(t):t<=4294967295?ya(t):us(t):t>=-24?ga(t):t>=-255?wa(t):t>=-65535?ma(t):t>=-4294967295?ba(t):_a(t)}Pe.number=ju;function zu(t){return Vt(ai(2,t.byteLength),t)}Pe.bytes=zu;function Yu(t){return ha(t)}Pe.string=Yu;function Ku(t){return Vt(ai(4,t.length),...t)}Pe.array=Ku;function Wu(t,e=!1){t instanceof Map||(t=new Map(Object.entries(t)));let r=Array.from(t.entries());return e&&(r=r.sort(([n],[i])=>n.localeCompare(i))),Vt(ai(5,t.size),...r.map(([n,i])=>Vt(ha(n),i)))}Pe.map=Wu;function Zu(t){const e=new Float32Array([t]);return Vt(new Uint8Array([224+26]),new Uint8Array(e.buffer))}Pe.singleFloat=Zu;function Lu(t){const e=new Float64Array([t]);return Vt(new Uint8Array([224+27]),new Uint8Array(e.buffer))}Pe.doubleFloat=Lu;function Xu(t){return t?xa():Ea()}Pe.bool=Xu;function xa(){return rn(new Uint8Array([224+21]))}Pe.true_=xa;function Ea(){return rn(new Uint8Array([224+20]))}Pe.false_=Ea;function Ju(){return rn(new Uint8Array([224+22]))}Pe.null_=Ju;function Qu(){return rn(new Uint8Array([224+23]))}Pe.undefined_=Qu;var Du=Rr&&Rr.__importStar||function(t){if(t&&t.__esModule)return t;var e={};if(t!=null)for(var r in t)Object.hasOwnProperty.call(t,r)&&(e[r]=t[r]);return e.default=t,e};Object.defineProperty(Mr,"__esModule",{value:!0});const wt=Du(Pe),ef=[ArrayBuffer,Uint8Array,Uint16Array,Uint32Array,Int8Array,Int16Array,Int32Array,Float32Array,Float64Array];class Ba{constructor(e,r=!1){this._serializer=e,this._stable=r,this.name="jsonDefault",this.priority=-100}match(e){return["undefined","boolean","number","string","object"].indexOf(typeof e)!=-1}encode(e){switch(typeof e){case"undefined":return wt.undefined_();case"boolean":return wt.bool(e);case"number":return Math.floor(e)===e?wt.number(e):wt.doubleFloat(e);case"string":return wt.string(e);case"object":if(e===null)return wt.null_();if(Array.isArray(e))return wt.array(e.map(r=>this._serializer.serializeValue(r)));if(ef.find(r=>e instanceof r))return wt.bytes(e.buffer);if(Object.getOwnPropertyNames(e).indexOf("toJSON")!==-1)return this.encode(e.toJSON());if(e instanceof Map){const r=new Map;for(const[n,i]of e.entries())r.set(n,this._serializer.serializeValue(i));return wt.map(r,this._stable)}else{const r=new Map;for(const[n,i]of Object.entries(e))r.set(n,this._serializer.serializeValue(i));return wt.map(r,this._stable)}default:throw new Error("Invalid value.")}}}Mr.JsonDefaultCborEncoder=Ba;class Aa{constructor(){this.name="cborEncoder",this.priority=-90}match(e){return typeof e=="object"&&typeof e.toCBOR=="function"}encode(e){return e.toCBOR()}}Mr.ToCborEncoder=Aa;class va{constructor(){this._encoders=new Set}static withDefaultEncoders(e=!1){const r=new this;return r.addEncoder(new Ba(r,e)),r.addEncoder(new Aa),r}removeEncoder(e){for(const r of this._encoders.values())r.name==e&&this._encoders.delete(r)}addEncoder(e){this._encoders.add(e)}getEncoderFor(e){let r=null;for(const n of this._encoders)(!r||n.priority>r.priority)&&n.match(e)&&(r=n);if(r===null)throw new Error("Could not find an encoder for value.");return r}serializeValue(e){return this.getEncoderFor(e).encode(e)}serialize(e){return this.serializeValue(e)}}Mr.CborSerializer=va;class tf extends va{serialize(e){return wt.raw(new Uint8Array([...new Uint8Array([217,217,247]),...new Uint8Array(super.serializeValue(e))]))}}Mr.SelfDescribeCborSerializer=tf;(function(t){function e(i){for(var c in i)t.hasOwnProperty(c)||(t[c]=i[c])}var r=Rr&&Rr.__importStar||function(i){if(i&&i.__esModule)return i;var c={};if(i!=null)for(var l in i)Object.hasOwnProperty.call(i,l)&&(c[l]=i[l]);return c.default=i,c};Object.defineProperty(t,"__esModule",{value:!0}),e(Mr);const n=r(Pe);t.value=n})($t);class rf{get name(){return"Principal"}get priority(){return 0}match(e){return e&&e._isPrincipal===!0}encode(e){return $t.value.bytes(e.toUint8Array())}}class nf{get name(){return"Buffer"}get priority(){return 1}match(e){return e instanceof ArrayBuffer||ArrayBuffer.isView(e)}encode(e){return $t.value.bytes(new Uint8Array(e))}}class sf{get name(){return"BigInt"}get priority(){return 1}match(e){return typeof e=="bigint"}encode(e){return e>BigInt(0)?$t.value.tagged(2,$t.value.bytes(zn(e.toString(16)))):$t.value.tagged(3,$t.value.bytes(zn((BigInt("-1")*e).toString(16))))}}const ci=$t.SelfDescribeCborSerializer.withDefaultEncoders(!0);ci.addEncoder(new rf);ci.addEncoder(new nf);ci.addEncoder(new sf);var zi;(function(t){t[t.Uint64LittleEndian=71]="Uint64LittleEndian",t[t.Semantic=55799]="Semantic"})(zi||(zi={}));function Ai(t){return ci.serialize(t)}function Is(t){const e=t.byteLength;let r=BigInt(0);for(let n=0;n<e;n++)r=r*BigInt(256)+BigInt(t[n]);return r}class of extends fa.Decoder{createByteString(e){return Ot(...e)}createByteStringFromHeap(e,r){return e===r?new ArrayBuffer(0):new Uint8Array(this._heap.slice(e,r))}}function qt(t){const e=new Uint8Array(t),r=new of({size:e.byteLength,tags:{2:n=>Is(n),3:n=>-Is(n),[zi.Semantic]:n=>n}});try{return r.decodeFirst(e)}catch(n){throw new Error(`Failed to decode CBOR: ${n}, input: ${Xe(e)}`)}}const ln=()=>{if(typeof window<"u"&&window.crypto&&window.crypto.getRandomValues){const t=new Uint32Array(1);return window.crypto.getRandomValues(t),t[0]}if(typeof crypto<"u"&&crypto.getRandomValues){const t=new Uint32Array(1);return crypto.getRandomValues(t),t[0]}return typeof crypto<"u"&&crypto.randomInt?crypto.randomInt(0,4294967295):Math.floor(Math.random()*4294967295)};var Yi;(function(t){t.Call="call"})(Yi||(Yi={}));function Ki(){const t=new ArrayBuffer(16),e=new DataView(t),r=ln(),n=ln(),i=ln(),c=ln();return e.setUint32(0,r),e.setUint32(4,n),e.setUint32(8,i),e.setUint32(12,c),t}const Rs=BigInt(1e6),af=60*1e3;class hn{constructor(e){if(e<90*1e3){const u=BigInt(Date.now()+e)*Rs/BigInt(1e9);this._value=u*BigInt(1e9);return}const c=BigInt(Math.floor(Date.now()+e-af))*Rs/BigInt(1e9)/BigInt(60)*BigInt(60)*BigInt(1e9);this._value=c}toCBOR(){return $t.value.u64(this._value.toString(16),16)}toHash(){return qe(this._value)}}function Us(t=Ki){return async e=>{const r=e.request.headers;e.request.headers=r,e.endpoint==="call"&&(e.body.nonce=t())}}function qr(t){const e=[];return t.forEach((r,n)=>{e.push([n,r])}),e}class vi extends $e{constructor(e,r){super(e),this.response=r,this.name=this.constructor.name,Object.setPrototypeOf(this,new.target.prototype)}}class cf extends $e{constructor(e,r,n,i,c,l){super(e),this.response=r,this.requestId=n,this.senderPubkey=i,this.senderSig=c,this.ingressExpiry=l,this.name="AgentCallError",Object.setPrototypeOf(this,new.target.prototype)}}class uf extends $e{constructor(e,r,n,i,c,l){super(e),this.response=r,this.requestId=n,this.senderPubkey=i,this.senderSig=c,this.ingressExpiry=l,this.name="AgentQueryError",Object.setPrototypeOf(this,new.target.prototype)}}class ff extends $e{constructor(e,r,n,i,c,l){super(e),this.response=r,this.requestId=n,this.senderPubkey=i,this.senderSig=c,this.ingressExpiry=l,this.name="AgentReadStateError",Object.setPrototypeOf(this,new.target.prototype)}}/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */const fs=BigInt(0),ls=BigInt(1),lf=BigInt(2);function ui(t){return t instanceof Uint8Array||ArrayBuffer.isView(t)&&t.constructor.name==="Uint8Array"}function Dt(t){if(!ui(t))throw new Error("Uint8Array expected")}function zr(t,e){if(typeof e!="boolean")throw new Error(t+" boolean expected, got "+e)}const hf=Array.from({length:256},(t,e)=>e.toString(16).padStart(2,"0"));function pr(t){Dt(t);let e="";for(let r=0;r<t.length;r++)e+=hf[t[r]];return e}function Ta(t){if(typeof t!="string")throw new Error("hex string expected, got "+typeof t);return t===""?fs:BigInt("0x"+t)}const Ft={_0:48,_9:57,A:65,F:70,a:97,f:102};function Os(t){if(t>=Ft._0&&t<=Ft._9)return t-Ft._0;if(t>=Ft.A&&t<=Ft.F)return t-(Ft.A-10);if(t>=Ft.a&&t<=Ft.f)return t-(Ft.a-10)}function Sa(t){if(typeof t!="string")throw new Error("hex string expected, got "+typeof t);const e=t.length,r=e/2;if(e%2)throw new Error("hex string expected, got unpadded hex of length "+e);const n=new Uint8Array(r);for(let i=0,c=0;i<r;i++,c+=2){const l=Os(t.charCodeAt(c)),u=Os(t.charCodeAt(c+1));if(l===void 0||u===void 0){const y=t[c]+t[c+1];throw new Error('hex string expected, got non-hex character "'+y+'" at index '+c)}n[i]=l*16+u}return n}function _t(t){return Ta(pr(t))}function Yr(t){return Dt(t),Ta(pr(Uint8Array.from(t).reverse()))}function De(t,e){return Sa(t.toString(16).padStart(e*2,"0"))}function Ln(t,e){return De(t,e).reverse()}function at(t,e,r){let n;if(typeof e=="string")try{n=Sa(e)}catch(c){throw new Error(t+" must be hex string or Uint8Array, cause: "+c)}else if(ui(e))n=Uint8Array.from(e);else throw new Error(t+" must be hex string or Uint8Array");const i=n.length;if(typeof r=="number"&&i!==r)throw new Error(t+" of length "+r+" expected, got "+i);return n}function je(...t){let e=0;for(let n=0;n<t.length;n++){const i=t[n];Dt(i),e+=i.length}const r=new Uint8Array(e);for(let n=0,i=0;n<t.length;n++){const c=t[n];r.set(c,i),i+=c.length}return r}function hs(t){if(typeof t!="string")throw new Error("string expected");return new Uint8Array(new TextEncoder().encode(t))}const Ti=t=>typeof t=="bigint"&&fs<=t;function Na(t,e,r){return Ti(t)&&Ti(e)&&Ti(r)&&e<=t&&t<r}function Xt(t,e,r,n){if(!Na(e,r,n))throw new Error("expected valid "+t+": "+r+" <= n < "+n+", got "+e)}function Kr(t){let e;for(e=0;t>fs;t>>=ls,e+=1);return e}function df(t,e){return t>>BigInt(e)&ls}const vn=t=>(lf<<BigInt(t-1))-ls,pf={bigint:t=>typeof t=="bigint",function:t=>typeof t=="function",boolean:t=>typeof t=="boolean",string:t=>typeof t=="string",stringOrUint8Array:t=>typeof t=="string"||ui(t),isSafeInteger:t=>Number.isSafeInteger(t),array:t=>Array.isArray(t),field:(t,e)=>e.Fp.isValid(t),hash:t=>typeof t=="function"&&Number.isSafeInteger(t.outputLen)};function nn(t,e,r={}){const n=(i,c,l)=>{const u=pf[c];if(typeof u!="function")throw new Error("invalid validator function");const y=t[i];if(!(l&&y===void 0)&&!u(y,t))throw new Error("param "+String(i)+" is invalid. Expected "+c+", got "+y)};for(const[i,c]of Object.entries(e))n(i,c,!1);for(const[i,c]of Object.entries(r))n(i,c,!0);return t}const Fs=()=>{throw new Error("not implemented")};function Lr(t){const e=new WeakMap;return(r,...n)=>{const i=e.get(r);if(i!==void 0)return i;const c=t(r,...n);return e.set(r,c),c}}/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */const Je=BigInt(0),ke=BigInt(1),Jt=BigInt(2),yf=BigInt(3),Wi=BigInt(4),Ps=BigInt(5),Ms=BigInt(8);function Ce(t,e){const r=t%e;return r>=Je?r:e+r}function gf(t,e,r){if(e<Je)throw new Error("invalid exponent, negatives unsupported");if(r<=Je)throw new Error("invalid modulus");if(r===ke)return Je;let n=ke;for(;e>Je;)e&ke&&(n=n*t%r),t=t*t%r,e>>=ke;return n}function At(t,e,r){let n=t;for(;e-- >Je;)n*=n,n%=r;return n}function ks(t,e){if(t===Je)throw new Error("invert: expected non-zero number");if(e<=Je)throw new Error("invert: expected positive modulus, got "+e);let r=Ce(t,e),n=e,i=Je,c=ke;for(;r!==Je;){const u=n/r,y=n%r,_=i-c*u;n=r,r=y,i=c,c=_}if(n!==ke)throw new Error("invert: does not exist");return Ce(i,e)}function wf(t){const e=(t-ke)/Jt;let r,n,i;for(r=t-ke,n=0;r%Jt===Je;r/=Jt,n++);for(i=Jt;i<t&&gf(i,e,t)!==t-ke;i++)if(i>1e3)throw new Error("Cannot find square root: likely non-prime P");if(n===1){const l=(t+ke)/Wi;return function(y,_){const B=y.pow(_,l);if(!y.eql(y.sqr(B),_))throw new Error("Cannot find square root");return B}}const c=(r+ke)/Jt;return function(u,y){if(u.pow(y,e)===u.neg(u.ONE))throw new Error("Cannot find square root");let _=n,B=u.pow(u.mul(u.ONE,i),r),N=u.pow(y,c),I=u.pow(y,r);for(;!u.eql(I,u.ONE);){if(u.eql(I,u.ZERO))return u.ZERO;let v=1;for(let q=u.sqr(I);v<_&&!u.eql(q,u.ONE);v++)q=u.sqr(q);const g=u.pow(B,ke<<BigInt(_-v-1));B=u.sqr(g),N=u.mul(N,g),I=u.mul(I,B),_=v}return N}}function mf(t){if(t%Wi===yf){const e=(t+ke)/Wi;return function(n,i){const c=n.pow(i,e);if(!n.eql(n.sqr(c),i))throw new Error("Cannot find square root");return c}}if(t%Ms===Ps){const e=(t-Ps)/Ms;return function(n,i){const c=n.mul(i,Jt),l=n.pow(c,e),u=n.mul(i,l),y=n.mul(n.mul(u,Jt),l),_=n.mul(u,n.sub(y,n.ONE));if(!n.eql(n.sqr(_),i))throw new Error("Cannot find square root");return _}}return wf(t)}const bf=(t,e)=>(Ce(t,e)&ke)===ke,_f=["create","isValid","is0","neg","inv","sqrt","sqr","eql","add","sub","mul","pow","div","addN","subN","mulN","sqrN"];function Ia(t){const e={ORDER:"bigint",MASK:"bigint",BYTES:"isSafeInteger",BITS:"isSafeInteger"},r=_f.reduce((n,i)=>(n[i]="function",n),e);return nn(t,r)}function Tn(t,e,r){if(r<Je)throw new Error("invalid exponent, negatives unsupported");if(r===Je)return t.ONE;if(r===ke)return e;let n=t.ONE,i=e;for(;r>Je;)r&ke&&(n=t.mul(n,i)),i=t.sqr(i),r>>=ke;return n}function Sn(t,e){const r=new Array(e.length),n=e.reduce((c,l,u)=>t.is0(l)?c:(r[u]=c,t.mul(c,l)),t.ONE),i=t.inv(n);return e.reduceRight((c,l,u)=>t.is0(l)?c:(r[u]=t.mul(c,r[u]),t.mul(c,l)),i),r}function xf(t){const e=(t-ke)/Jt;return(r,n)=>r.pow(n,e)}function Ra(t,e){const r=e!==void 0?e:t.toString(2).length,n=Math.ceil(r/8);return{nBitLength:r,nByteLength:n}}function sn(t,e,r=!1,n={}){if(t<=Je)throw new Error("invalid field: expected ORDER > 0, got "+t);const{nBitLength:i,nByteLength:c}=Ra(t,e);if(c>2048)throw new Error("invalid field: expected ORDER of <= 2048 bytes");let l;const u=Object.freeze({ORDER:t,isLE:r,BITS:i,BYTES:c,MASK:vn(i),ZERO:Je,ONE:ke,create:y=>Ce(y,t),isValid:y=>{if(typeof y!="bigint")throw new Error("invalid field element: expected bigint, got "+typeof y);return Je<=y&&y<t},is0:y=>y===Je,isOdd:y=>(y&ke)===ke,neg:y=>Ce(-y,t),eql:(y,_)=>y===_,sqr:y=>Ce(y*y,t),add:(y,_)=>Ce(y+_,t),sub:(y,_)=>Ce(y-_,t),mul:(y,_)=>Ce(y*_,t),pow:(y,_)=>Tn(u,y,_),div:(y,_)=>Ce(y*ks(_,t),t),sqrN:y=>y*y,addN:(y,_)=>y+_,subN:(y,_)=>y-_,mulN:(y,_)=>y*_,inv:y=>ks(y,t),sqrt:n.sqrt||(y=>(l||(l=mf(t)),l(u,y))),invertBatch:y=>Sn(u,y),cmov:(y,_,B)=>B?_:y,toBytes:y=>r?Ln(y,c):De(y,c),fromBytes:y=>{if(y.length!==c)throw new Error("Field.fromBytes: expected "+c+" bytes, got "+y.length);return r?Yr(y):_t(y)}});return Object.freeze(u)}function Ua(t){if(typeof t!="bigint")throw new Error("field order must be bigint");const e=t.toString(2).length;return Math.ceil(e/8)}function Oa(t){const e=Ua(t);return e+Math.ceil(e/2)}function Ef(t,e,r=!1){const n=t.length,i=Ua(e),c=Oa(e);if(n<16||n<c||n>1024)throw new Error("expected "+c+"-1024 bytes of input, got "+n);const l=r?Yr(t):_t(t),u=Ce(l,e-ke)+ke;return r?Ln(u,i):De(u,i)}const Bf=_t;function Zt(t,e){if(Xr(t),Xr(e),t<0||t>=1<<8*e)throw new Error("invalid I2OSP input: "+t);const r=Array.from({length:e}).fill(0);for(let n=e-1;n>=0;n--)r[n]=t&255,t>>>=8;return new Uint8Array(r)}function Af(t,e){const r=new Uint8Array(t.length);for(let n=0;n<t.length;n++)r[n]=t[n]^e[n];return r}function Xr(t){if(!Number.isSafeInteger(t))throw new Error("number expected")}function vf(t,e,r,n){Dt(t),Dt(e),Xr(r),e.length>255&&(e=n(je(hs("H2C-OVERSIZE-DST-"),e)));const{outputLen:i,blockLen:c}=n,l=Math.ceil(r/i);if(r>65535||l>255)throw new Error("expand_message_xmd: invalid lenInBytes");const u=je(e,Zt(e.length,1)),y=Zt(0,c),_=Zt(r,2),B=new Array(l),N=n(je(y,t,_,Zt(0,1),u));B[0]=n(je(N,Zt(1,1),u));for(let v=1;v<=l;v++){const g=[Af(N,B[v-1]),Zt(v+1,1),u];B[v]=n(je(...g))}return je(...B).slice(0,r)}function Tf(t,e,r,n,i){if(Dt(t),Dt(e),Xr(r),e.length>255){const c=Math.ceil(2*n/8);e=i.create({dkLen:c}).update(hs("H2C-OVERSIZE-DST-")).update(e).digest()}if(r>65535||e.length>255)throw new Error("expand_message_xof: invalid lenInBytes");return i.create({dkLen:r}).update(t).update(Zt(r,2)).update(e).update(Zt(e.length,1)).digest()}function Cs(t,e,r){nn(r,{DST:"stringOrUint8Array",p:"bigint",m:"isSafeInteger",k:"isSafeInteger",hash:"hash"});const{p:n,k:i,m:c,hash:l,expand:u,DST:y}=r;Dt(t),Xr(e);const _=typeof y=="string"?hs(y):y,B=n.toString(2).length,N=Math.ceil((B+i)/8),I=e*c*N;let v;if(u==="xmd")v=vf(t,_,I,l);else if(u==="xof")v=Tf(t,_,I,i,l);else if(u==="_internal_pass")v=t;else throw new Error('expand must be "xmd" or "xof"');const g=new Array(e);for(let q=0;q<e;q++){const C=new Array(c);for(let W=0;W<c;W++){const Y=N*(W+q*c),$=v.subarray(Y,Y+N);C[W]=Ce(Bf($),n)}g[q]=C}return g}function Fa(t,e){const r=e.map(n=>Array.from(n).reverse());return(n,i)=>{const[c,l,u,y]=r.map(_=>_.reduce((B,N)=>t.add(t.mul(B,n),N)));return n=t.div(c,l),i=t.mul(i,t.div(u,y)),{x:n,y:i}}}function $s(t,e,r){if(typeof e!="function")throw new Error("mapToCurve() must be defined");return{hashToCurve(n,i){const c=Cs(n,2,{...r,DST:r.DST,...i}),l=t.fromAffine(e(c[0])),u=t.fromAffine(e(c[1])),y=l.add(u).clearCofactor();return y.assertValidity(),y},encodeToCurve(n,i){const c=Cs(n,1,{...r,DST:r.encodeDST,...i}),l=t.fromAffine(e(c[0])).clearCofactor();return l.assertValidity(),l},mapToCurve(n){if(!Array.isArray(n))throw new Error("mapToCurve: expected array of bigints");for(const c of n)if(typeof c!="bigint")throw new Error("mapToCurve: expected array of bigints");const i=t.fromAffine(e(n)).clearCofactor();return i.assertValidity(),i}}}/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */const qs=BigInt(0),dn=BigInt(1);function Si(t,e){const r=e.negate();return t?r:e}function Pa(t,e){if(!Number.isSafeInteger(t)||t<=0||t>e)throw new Error("invalid window size, expected [1.."+e+"], got W="+t)}function Ni(t,e){Pa(t,e);const r=Math.ceil(e/t)+1,n=2**(t-1);return{windows:r,windowSize:n}}function Sf(t,e){if(!Array.isArray(t))throw new Error("array expected");t.forEach((r,n)=>{if(!(r instanceof e))throw new Error("invalid point at index "+n)})}function Nf(t,e){if(!Array.isArray(t))throw new Error("array of scalars expected");t.forEach((r,n)=>{if(!e.isValid(r))throw new Error("invalid scalar at index "+n)})}const Ii=new WeakMap,Ma=new WeakMap;function Ri(t){return Ma.get(t)||1}function ka(t,e){return{constTimeNegate:Si,hasPrecomputes(r){return Ri(r)!==1},unsafeLadder(r,n,i=t.ZERO){let c=r;for(;n>qs;)n&dn&&(i=i.add(c)),c=c.double(),n>>=dn;return i},precomputeWindow(r,n){const{windows:i,windowSize:c}=Ni(n,e),l=[];let u=r,y=u;for(let _=0;_<i;_++){y=u,l.push(y);for(let B=1;B<c;B++)y=y.add(u),l.push(y);u=y.double()}return l},wNAF(r,n,i){const{windows:c,windowSize:l}=Ni(r,e);let u=t.ZERO,y=t.BASE;const _=BigInt(2**r-1),B=2**r,N=BigInt(r);for(let I=0;I<c;I++){const v=I*l;let g=Number(i&_);i>>=N,g>l&&(g-=B,i+=dn);const q=v,C=v+Math.abs(g)-1,W=I%2!==0,Y=g<0;g===0?y=y.add(Si(W,n[q])):u=u.add(Si(Y,n[C]))}return{p:u,f:y}},wNAFUnsafe(r,n,i,c=t.ZERO){const{windows:l,windowSize:u}=Ni(r,e),y=BigInt(2**r-1),_=2**r,B=BigInt(r);for(let N=0;N<l;N++){const I=N*u;if(i===qs)break;let v=Number(i&y);if(i>>=B,v>u&&(v-=_,i+=dn),v===0)continue;let g=n[I+Math.abs(v)-1];v<0&&(g=g.negate()),c=c.add(g)}return c},getPrecomputes(r,n,i){let c=Ii.get(n);return c||(c=this.precomputeWindow(n,r),r!==1&&Ii.set(n,i(c))),c},wNAFCached(r,n,i){const c=Ri(r);return this.wNAF(c,this.getPrecomputes(c,r,i),n)},wNAFCachedUnsafe(r,n,i,c){const l=Ri(r);return l===1?this.unsafeLadder(r,n,c):this.wNAFUnsafe(l,this.getPrecomputes(l,r,i),n,c)},setWindowSize(r,n){Pa(n,e),Ma.set(r,n),Ii.delete(r)}}}function Ca(t,e,r,n){if(Sf(r,t),Nf(n,e),r.length!==n.length)throw new Error("arrays of points and scalars must have equal length");const i=t.ZERO,c=Kr(BigInt(r.length)),l=c>12?c-3:c>4?c-2:c?2:1,u=(1<<l)-1,y=new Array(u+1).fill(i),_=Math.floor((e.BITS-1)/l)*l;let B=i;for(let N=_;N>=0;N-=l){y.fill(i);for(let v=0;v<n.length;v++){const g=n[v],q=Number(g>>BigInt(N)&BigInt(u));y[q]=y[q].add(r[v])}let I=i;for(let v=y.length-1,g=i;v>0;v--)g=g.add(y[v]),I=I.add(g);if(B=B.add(I),N!==0)for(let v=0;v<l;v++)B=B.double()}return B}function $a(t){return Ia(t.Fp),nn(t,{n:"bigint",h:"bigint",Gx:"field",Gy:"field"},{nBitLength:"isSafeInteger",nByteLength:"isSafeInteger"}),Object.freeze({...Ra(t.n,t.nBitLength),...t,p:t.Fp.ORDER})}/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */function If(t){const e=$a(t);nn(e,{a:"field",b:"field"},{allowedPrivateKeyLengths:"array",wrapPrivateKey:"boolean",isTorsionFree:"function",clearCofactor:"function",allowInfinityPoint:"boolean",fromBytes:"function",toBytes:"function"});const{endo:r,Fp:n,a:i}=e;if(r){if(!n.eql(i,n.ZERO))throw new Error("invalid endomorphism, can only be defined for Koblitz curves that have a=0");if(typeof r!="object"||typeof r.beta!="bigint"||typeof r.splitScalar!="function")throw new Error("invalid endomorphism, expected beta: bigint and splitScalar: function")}return Object.freeze({...e})}const ar=BigInt(0),Ve=BigInt(1),zt=BigInt(2),Xn=BigInt(3),Vs=BigInt(4);function Gs(t){const e=If(t),{Fp:r}=e,n=sn(e.n,e.nBitLength),i=e.toBytes||((q,C,W)=>{const Y=C.toAffine();return je(Uint8Array.from([4]),r.toBytes(Y.x),r.toBytes(Y.y))}),c=e.fromBytes||(q=>{const C=q.subarray(1),W=r.fromBytes(C.subarray(0,r.BYTES)),Y=r.fromBytes(C.subarray(r.BYTES,2*r.BYTES));return{x:W,y:Y}});function l(q){const{a:C,b:W}=e,Y=r.sqr(q),$=r.mul(Y,q);return r.add(r.add($,r.mul(q,C)),W)}if(!r.eql(r.sqr(e.Gy),l(e.Gx)))throw new Error("bad generator point: equation left != right");function u(q){return Na(q,Ve,e.n)}function y(q){const{allowedPrivateKeyLengths:C,nByteLength:W,wrapPrivateKey:Y,n:$}=e;if(C&&typeof q!="bigint"){if(ui(q)&&(q=pr(q)),typeof q!="string"||!C.includes(q.length))throw new Error("invalid private key");q=q.padStart(W*2,"0")}let re;try{re=typeof q=="bigint"?q:_t(at("private key",q,W))}catch{throw new Error("invalid private key, expected hex or "+W+" bytes, got "+typeof q)}return Y&&(re=Ce(re,$)),Xt("private key",re,Ve,$),re}function _(q){if(!(q instanceof I))throw new Error("ProjectivePoint expected")}const B=Lr((q,C)=>{const{px:W,py:Y,pz:$}=q;if(r.eql($,r.ONE))return{x:W,y:Y};const re=q.is0();C==null&&(C=re?r.ONE:r.inv($));const P=r.mul(W,C),L=r.mul(Y,C),Z=r.mul($,C);if(re)return{x:r.ZERO,y:r.ZERO};if(!r.eql(Z,r.ONE))throw new Error("invZ was invalid");return{x:P,y:L}}),N=Lr(q=>{if(q.is0()){if(e.allowInfinityPoint&&!r.is0(q.py))return;throw new Error("bad point: ZERO")}const{x:C,y:W}=q.toAffine();if(!r.isValid(C)||!r.isValid(W))throw new Error("bad point: x or y not FE");const Y=r.sqr(W),$=l(C);if(!r.eql(Y,$))throw new Error("bad point: equation left != right");if(!q.isTorsionFree())throw new Error("bad point: not in prime-order subgroup");return!0});class I{constructor(C,W,Y){if(this.px=C,this.py=W,this.pz=Y,C==null||!r.isValid(C))throw new Error("x required");if(W==null||!r.isValid(W))throw new Error("y required");if(Y==null||!r.isValid(Y))throw new Error("z required");Object.freeze(this)}static fromAffine(C){const{x:W,y:Y}=C||{};if(!C||!r.isValid(W)||!r.isValid(Y))throw new Error("invalid affine point");if(C instanceof I)throw new Error("projective point not allowed");const $=re=>r.eql(re,r.ZERO);return $(W)&&$(Y)?I.ZERO:new I(W,Y,r.ONE)}get x(){return this.toAffine().x}get y(){return this.toAffine().y}static normalizeZ(C){const W=r.invertBatch(C.map(Y=>Y.pz));return C.map((Y,$)=>Y.toAffine(W[$])).map(I.fromAffine)}static fromHex(C){const W=I.fromAffine(c(at("pointHex",C)));return W.assertValidity(),W}static fromPrivateKey(C){return I.BASE.multiply(y(C))}static msm(C,W){return Ca(I,n,C,W)}_setWindowSize(C){g.setWindowSize(this,C)}assertValidity(){N(this)}hasEvenY(){const{y:C}=this.toAffine();if(r.isOdd)return!r.isOdd(C);throw new Error("Field doesn't support isOdd")}equals(C){_(C);const{px:W,py:Y,pz:$}=this,{px:re,py:P,pz:L}=C,Z=r.eql(r.mul(W,L),r.mul(re,$)),Q=r.eql(r.mul(Y,L),r.mul(P,$));return Z&&Q}negate(){return new I(this.px,r.neg(this.py),this.pz)}double(){const{a:C,b:W}=e,Y=r.mul(W,Xn),{px:$,py:re,pz:P}=this;let L=r.ZERO,Z=r.ZERO,Q=r.ZERO,D=r.mul($,$),J=r.mul(re,re),he=r.mul(P,P),le=r.mul($,re);return le=r.add(le,le),Q=r.mul($,P),Q=r.add(Q,Q),L=r.mul(C,Q),Z=r.mul(Y,he),Z=r.add(L,Z),L=r.sub(J,Z),Z=r.add(J,Z),Z=r.mul(L,Z),L=r.mul(le,L),Q=r.mul(Y,Q),he=r.mul(C,he),le=r.sub(D,he),le=r.mul(C,le),le=r.add(le,Q),Q=r.add(D,D),D=r.add(Q,D),D=r.add(D,he),D=r.mul(D,le),Z=r.add(Z,D),he=r.mul(re,P),he=r.add(he,he),D=r.mul(he,le),L=r.sub(L,D),Q=r.mul(he,J),Q=r.add(Q,Q),Q=r.add(Q,Q),new I(L,Z,Q)}add(C){_(C);const{px:W,py:Y,pz:$}=this,{px:re,py:P,pz:L}=C;let Z=r.ZERO,Q=r.ZERO,D=r.ZERO;const J=e.a,he=r.mul(e.b,Xn);let le=r.mul(W,re),S=r.mul(Y,P),O=r.mul($,L),K=r.add(W,Y),H=r.add(re,P);K=r.mul(K,H),H=r.add(le,S),K=r.sub(K,H),H=r.add(W,$);let G=r.add(re,L);return H=r.mul(H,G),G=r.add(le,O),H=r.sub(H,G),G=r.add(Y,$),Z=r.add(P,L),G=r.mul(G,Z),Z=r.add(S,O),G=r.sub(G,Z),D=r.mul(J,H),Z=r.mul(he,O),D=r.add(Z,D),Z=r.sub(S,D),D=r.add(S,D),Q=r.mul(Z,D),S=r.add(le,le),S=r.add(S,le),O=r.mul(J,O),H=r.mul(he,H),S=r.add(S,O),O=r.sub(le,O),O=r.mul(J,O),H=r.add(H,O),le=r.mul(S,H),Q=r.add(Q,le),le=r.mul(G,H),Z=r.mul(K,Z),Z=r.sub(Z,le),le=r.mul(K,S),D=r.mul(G,D),D=r.add(D,le),new I(Z,Q,D)}subtract(C){return this.add(C.negate())}is0(){return this.equals(I.ZERO)}wNAF(C){return g.wNAFCached(this,C,I.normalizeZ)}multiplyUnsafe(C){const{endo:W,n:Y}=e;Xt("scalar",C,ar,Y);const $=I.ZERO;if(C===ar)return $;if(this.is0()||C===Ve)return this;if(!W||g.hasPrecomputes(this))return g.wNAFCachedUnsafe(this,C,I.normalizeZ);let{k1neg:re,k1:P,k2neg:L,k2:Z}=W.splitScalar(C),Q=$,D=$,J=this;for(;P>ar||Z>ar;)P&Ve&&(Q=Q.add(J)),Z&Ve&&(D=D.add(J)),J=J.double(),P>>=Ve,Z>>=Ve;return re&&(Q=Q.negate()),L&&(D=D.negate()),D=new I(r.mul(D.px,W.beta),D.py,D.pz),Q.add(D)}multiply(C){const{endo:W,n:Y}=e;Xt("scalar",C,Ve,Y);let $,re;if(W){const{k1neg:P,k1:L,k2neg:Z,k2:Q}=W.splitScalar(C);let{p:D,f:J}=this.wNAF(L),{p:he,f:le}=this.wNAF(Q);D=g.constTimeNegate(P,D),he=g.constTimeNegate(Z,he),he=new I(r.mul(he.px,W.beta),he.py,he.pz),$=D.add(he),re=J.add(le)}else{const{p:P,f:L}=this.wNAF(C);$=P,re=L}return I.normalizeZ([$,re])[0]}multiplyAndAddUnsafe(C,W,Y){const $=I.BASE,re=(L,Z)=>Z===ar||Z===Ve||!L.equals($)?L.multiplyUnsafe(Z):L.multiply(Z),P=re(this,W).add(re(C,Y));return P.is0()?void 0:P}toAffine(C){return B(this,C)}isTorsionFree(){const{h:C,isTorsionFree:W}=e;if(C===Ve)return!0;if(W)return W(I,this);throw new Error("isTorsionFree() has not been declared for the elliptic curve")}clearCofactor(){const{h:C,clearCofactor:W}=e;return C===Ve?this:W?W(I,this):this.multiplyUnsafe(e.h)}toRawBytes(C=!0){return zr("isCompressed",C),this.assertValidity(),i(I,this,C)}toHex(C=!0){return zr("isCompressed",C),pr(this.toRawBytes(C))}}I.BASE=new I(e.Gx,e.Gy,r.ONE),I.ZERO=new I(r.ZERO,r.ONE,r.ZERO);const v=e.nBitLength,g=ka(I,e.endo?Math.ceil(v/2):v);return{CURVE:e,ProjectivePoint:I,normPrivateKeyToScalar:y,weierstrassEquation:l,isWithinCurveOrder:u}}function Rf(t,e){const r=t.ORDER;let n=ar;for(let g=r-Ve;g%zt===ar;g/=zt)n+=Ve;const i=n,c=zt<<i-Ve-Ve,l=c*zt,u=(r-Ve)/l,y=(u-Ve)/zt,_=l-Ve,B=c,N=t.pow(e,u),I=t.pow(e,(u+Ve)/zt);let v=(g,q)=>{let C=N,W=t.pow(q,_),Y=t.sqr(W);Y=t.mul(Y,q);let $=t.mul(g,Y);$=t.pow($,y),$=t.mul($,W),W=t.mul($,q),Y=t.mul($,g);let re=t.mul(Y,W);$=t.pow(re,B);let P=t.eql($,t.ONE);W=t.mul(Y,I),$=t.mul(re,C),Y=t.cmov(W,Y,P),re=t.cmov($,re,P);for(let L=i;L>Ve;L--){let Z=L-zt;Z=zt<<Z-Ve;let Q=t.pow(re,Z);const D=t.eql(Q,t.ONE);W=t.mul(Y,C),C=t.mul(C,C),Q=t.mul(re,C),Y=t.cmov(W,Y,D),re=t.cmov(Q,re,D)}return{isValid:P,value:Y}};if(t.ORDER%Vs===Xn){const g=(t.ORDER-Xn)/Vs,q=t.sqrt(t.neg(e));v=(C,W)=>{let Y=t.sqr(W);const $=t.mul(C,W);Y=t.mul(Y,$);let re=t.pow(Y,g);re=t.mul(re,$);const P=t.mul(re,q),L=t.mul(t.sqr(re),W),Z=t.eql(L,C);let Q=t.cmov(P,re,Z);return{isValid:Z,value:Q}}}return v}function qa(t,e){if(Ia(t),!t.isValid(e.A)||!t.isValid(e.B)||!t.isValid(e.Z))throw new Error("mapToCurveSimpleSWU: invalid opts");const r=Rf(t,e.Z);if(!t.isOdd)throw new Error("Fp.isOdd is not implemented!");return n=>{let i,c,l,u,y,_,B,N;i=t.sqr(n),i=t.mul(i,e.Z),c=t.sqr(i),c=t.add(c,i),l=t.add(c,t.ONE),l=t.mul(l,e.B),u=t.cmov(e.Z,t.neg(c),!t.eql(c,t.ZERO)),u=t.mul(u,e.A),c=t.sqr(l),_=t.sqr(u),y=t.mul(_,e.A),c=t.add(c,y),c=t.mul(c,l),_=t.mul(_,u),y=t.mul(_,e.B),c=t.add(c,y),B=t.mul(i,l);const{isValid:I,value:v}=r(c,_);N=t.mul(i,n),N=t.mul(N,v),B=t.cmov(B,l,I),N=t.cmov(N,v,I);const g=t.isOdd(n)===t.isOdd(N);return N=t.cmov(t.neg(N),N,g),B=t.div(B,u),{x:B,y:N}}}/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */const Uf=BigInt(0),pn=BigInt(1),Hs=BigInt(2),Ar=BigInt(3);function Of(t){const e=[];for(;t>pn;t>>=pn)(t&pn)===Uf?e.unshift(0):(t&Ar)===Ar?(e.unshift(-1),t+=pn):e.unshift(1);return e}function Ff(t){const{Fp:e,Fr:r,Fp2:n,Fp6:i,Fp12:c}=t.fields,l=t.params.xNegative,u=t.params.twistType,y=Gs({n:r.ORDER,...t.G1}),_=Object.assign(y,$s(y.ProjectivePoint,t.G1.mapToCurve,{...t.htfDefaults,...t.G1.htfDefaults})),B=Gs({n:r.ORDER,...t.G2}),N=Object.assign(B,$s(B.ProjectivePoint,t.G2.mapToCurve,{...t.htfDefaults,...t.G2.htfDefaults}));let I;if(u==="multiplicative")I=(ee,w,se,ue,de,te)=>c.mul014(ue,ee,n.mul(w,de),n.mul(se,te));else if(u==="divisive")I=(ee,w,se,ue,de,te)=>c.mul034(ue,n.mul(se,te),n.mul(w,de),ee);else throw new Error("bls: unknown twist type");const v=n.div(n.ONE,n.mul(n.ONE,Hs));function g(ee,w,se,ue){const de=n.sqr(se),te=n.sqr(ue),ae=n.mulByB(n.mul(te,Ar)),m=n.mul(ae,Ar),x=n.sub(n.sub(n.sqr(n.add(se,ue)),te),de),A=n.sub(ae,de),M=n.mul(n.sqr(w),Ar),U=n.neg(x);return ee.push([A,M,U]),w=n.mul(n.mul(n.mul(n.sub(de,m),w),se),v),se=n.sub(n.sqr(n.mul(n.add(de,m),v)),n.mul(n.sqr(ae),Ar)),ue=n.mul(de,x),{Rx:w,Ry:se,Rz:ue}}function q(ee,w,se,ue,de,te){const ae=n.sub(se,n.mul(te,ue)),m=n.sub(w,n.mul(de,ue)),x=n.sub(n.mul(ae,de),n.mul(m,te)),A=n.neg(ae),M=m;ee.push([x,A,M]);const U=n.sqr(m),k=n.mul(U,m),h=n.mul(U,w),s=n.add(n.sub(k,n.mul(h,Hs)),n.mul(n.sqr(ae),ue));return w=n.mul(m,s),se=n.sub(n.mul(n.sub(h,s),ae),n.mul(k,se)),ue=n.mul(ue,k),{Rx:w,Ry:se,Rz:ue}}const C=Of(t.params.ateLoopSize),W=Lr(ee=>{const w=ee,{x:se,y:ue}=w.toAffine(),de=se,te=ue,ae=n.neg(ue);let m=de,x=te,A=n.ONE;const M=[];for(const U of C){const k=[];({Rx:m,Ry:x,Rz:A}=g(k,m,x,A)),U&&({Rx:m,Ry:x,Rz:A}=q(k,m,x,A,de,U===-1?ae:te)),M.push(k)}if(t.postPrecompute){const U=M[M.length-1];t.postPrecompute(m,x,A,de,te,q.bind(null,U))}return M});function Y(ee,w=!1){let se=c.ONE;if(ee.length){const ue=ee[0][0].length;for(let de=0;de<ue;de++){se=c.sqr(se);for(const[te,ae,m]of ee)for(const[x,A,M]of te[de])se=I(x,A,M,se,ae,m)}}return l&&(se=c.conjugate(se)),w?c.finalExponentiate(se):se}function $(ee,w=!0){const se=[];_.ProjectivePoint.normalizeZ(ee.map(({g1:ue})=>ue)),N.ProjectivePoint.normalizeZ(ee.map(({g2:ue})=>ue));for(const{g1:ue,g2:de}of ee){if(ue.equals(_.ProjectivePoint.ZERO)||de.equals(N.ProjectivePoint.ZERO))throw new Error("pairing is not available for ZERO point");ue.assertValidity(),de.assertValidity();const te=ue.toAffine();se.push([W(de),te.x,te.y])}return Y(se,w)}function re(ee,w,se=!0){return $([{g1:ee,g2:w}],se)}const P={randomPrivateKey:()=>{const ee=Oa(r.ORDER);return Ef(t.randomBytes(ee),r.ORDER)},calcPairingPrecomputes:W},{ShortSignature:L}=t.G1,{Signature:Z}=t.G2;function Q(ee){return ee instanceof _.ProjectivePoint?ee:_.ProjectivePoint.fromHex(ee)}function D(ee,w){return ee instanceof _.ProjectivePoint?ee:_.hashToCurve(at("point",ee),w)}function J(ee){return ee instanceof N.ProjectivePoint?ee:Z.fromHex(ee)}function he(ee,w){return ee instanceof N.ProjectivePoint?ee:N.hashToCurve(at("point",ee),w)}function le(ee){return _.ProjectivePoint.fromPrivateKey(ee).toRawBytes(!0)}function S(ee){return N.ProjectivePoint.fromPrivateKey(ee).toRawBytes(!0)}function O(ee,w,se){const ue=he(ee,se);ue.assertValidity();const de=ue.multiply(_.normPrivateKeyToScalar(w));return ee instanceof N.ProjectivePoint?de:Z.toRawBytes(de)}function K(ee,w,se){const ue=D(ee,se);ue.assertValidity();const de=ue.multiply(_.normPrivateKeyToScalar(w));return ee instanceof _.ProjectivePoint?de:L.toRawBytes(de)}function H(ee,w,se,ue){const de=Q(se),te=he(w,ue),ae=_.ProjectivePoint.BASE,m=J(ee),x=$([{g1:de.negate(),g2:te},{g1:ae,g2:m}]);return c.eql(x,c.ONE)}function G(ee,w,se,ue){const de=J(se),te=D(w,ue),ae=N.ProjectivePoint.BASE,m=Q(ee),x=$([{g1:te,g2:de},{g1:m,g2:ae.negate()}]);return c.eql(x,c.ONE)}function X(ee){if(!Array.isArray(ee)||ee.length===0)throw new Error("expected non-empty array")}function ie(ee){X(ee);const se=ee.map(Q).reduce((ue,de)=>ue.add(de),_.ProjectivePoint.ZERO);return ee[0]instanceof _.ProjectivePoint?(se.assertValidity(),se):se.toRawBytes(!0)}function we(ee){X(ee);const se=ee.map(J).reduce((ue,de)=>ue.add(de),N.ProjectivePoint.ZERO);return ee[0]instanceof N.ProjectivePoint?(se.assertValidity(),se):Z.toRawBytes(se)}function oe(ee){X(ee);const se=ee.map(Q).reduce((ue,de)=>ue.add(de),_.ProjectivePoint.ZERO);return ee[0]instanceof _.ProjectivePoint?(se.assertValidity(),se):L.toRawBytes(se)}function fe(ee,w,se,ue){if(X(w),se.length!==w.length)throw new Error("amount of public keys and messages should be equal");const de=J(ee),te=w.map(A=>he(A,ue)),ae=se.map(Q),m=new Map;for(let A=0;A<ae.length;A++){const M=ae[A],U=te[A];let k=m.get(U);k===void 0&&(k=[],m.set(U,k)),k.push(M)}const x=[];try{for(const[A,M]of m){const U=M.reduce((k,h)=>k.add(h));x.push({g1:U,g2:A})}return x.push({g1:_.ProjectivePoint.BASE.negate(),g2:de}),c.eql($(x),c.ONE)}catch{return!1}}return _.ProjectivePoint.BASE._setWindowSize(4),{getPublicKey:le,getPublicKeyForShortSignatures:S,sign:O,signShortSignature:K,verify:H,verifyBatch:fe,verifyShortSignature:G,aggregatePublicKeys:ie,aggregateSignatures:we,aggregateShortSignatures:oe,millerLoopBatch:Y,pairing:re,pairingBatch:$,G1:_,G2:N,Signature:Z,ShortSignature:L,fields:{Fr:r,Fp:e,Fp2:n,Fp6:i,Fp12:c},params:{ateLoopSize:t.params.ateLoopSize,r:t.params.r,G1b:t.G1.b,G2b:t.G2.b},utils:P}}/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */const Pf=BigInt(0),vr=BigInt(1),kt=BigInt(2),js=BigInt(3);function Ui(t,e,r,n,i=1,c){const l=BigInt(c===void 0?n:c),u=r**BigInt(n),y=[];for(let _=0;_<i;_++){const B=BigInt(_+1),N=[];for(let I=0,v=vr;I<n;I++){const g=(B*v-B)/l%u;N.push(t.pow(e,g)),v*=r}y.push(N)}return y}function Mf(t,e,r){const n=e.pow(r,(t.ORDER-vr)/js),i=e.pow(r,(t.ORDER-vr)/kt);function c(I,v){const g=e.mul(e.frobeniusMap(I,1),n),q=e.mul(e.frobeniusMap(v,1),i);return[g,q]}const l=e.pow(r,(t.ORDER**kt-vr)/js),u=e.pow(r,(t.ORDER**kt-vr)/kt);if(!e.eql(u,e.neg(e.ONE)))throw new Error("psiFrobenius: PSI2_Y!==-1");function y(I,v){return[e.mul(I,l),e.neg(v)]}const _=I=>(v,g)=>{const q=g.toAffine(),C=I(q.x,q.y);return v.fromAffine({x:C[0],y:C[1]})},B=_(c),N=_(y);return{psi:c,psi2:y,G2psi:B,G2psi2:N,PSI_X:n,PSI_Y:i,PSI2_X:l,PSI2_Y:u}}function kf(t){const{ORDER:e}=t,r=sn(e),n=r.create(t.NONRESIDUE||BigInt(-1)),i=xf(e),c=r.div(r.ONE,kt),l=Ui(r,n,r.ORDER,2)[0],u=({c0:S,c1:O},{c0:K,c1:H})=>({c0:r.add(S,K),c1:r.add(O,H)}),y=({c0:S,c1:O},{c0:K,c1:H})=>({c0:r.sub(S,K),c1:r.sub(O,H)}),_=({c0:S,c1:O},K)=>{if(typeof K=="bigint")return{c0:r.mul(S,K),c1:r.mul(O,K)};const{c0:H,c1:G}=K;let X=r.mul(S,H),ie=r.mul(O,G);const we=r.sub(X,ie),oe=r.sub(r.mul(r.add(S,O),r.add(H,G)),r.add(X,ie));return{c0:we,c1:oe}},B=({c0:S,c1:O})=>{const K=r.add(S,O),H=r.sub(S,O),G=r.add(S,S);return{c0:r.mul(K,H),c1:r.mul(G,O)}},N=S=>{if(S.length!==2)throw new Error("invalid tuple");const O=S.map(K=>r.create(K));return{c0:O[0],c1:O[1]}},I=e*e,v=N(t.FP2_NONRESIDUE),g={ORDER:I,isLE:r.isLE,NONRESIDUE:v,BITS:Kr(I),BYTES:Math.ceil(Kr(I)/8),MASK:vn(Kr(I)),ZERO:{c0:r.ZERO,c1:r.ZERO},ONE:{c0:r.ONE,c1:r.ZERO},create:S=>S,isValid:({c0:S,c1:O})=>typeof S=="bigint"&&typeof O=="bigint",is0:({c0:S,c1:O})=>r.is0(S)&&r.is0(O),eql:({c0:S,c1:O},{c0:K,c1:H})=>r.eql(S,K)&&r.eql(O,H),neg:({c0:S,c1:O})=>({c0:r.neg(S),c1:r.neg(O)}),pow:(S,O)=>Tn(g,S,O),invertBatch:S=>Sn(g,S),add:u,sub:y,mul:_,sqr:B,addN:u,subN:y,mulN:_,sqrN:B,div:(S,O)=>g.mul(S,typeof O=="bigint"?r.inv(r.create(O)):g.inv(O)),inv:({c0:S,c1:O})=>{const K=r.inv(r.create(S*S+O*O));return{c0:r.mul(K,r.create(S)),c1:r.mul(K,r.create(-O))}},sqrt:S=>{if(t.Fp2sqrt)return t.Fp2sqrt(S);const{c0:O,c1:K}=S;if(r.is0(K))return r.eql(i(r,O),r.ONE)?g.create({c0:r.sqrt(O),c1:r.ZERO}):g.create({c0:r.ZERO,c1:r.sqrt(r.div(O,n))});const H=r.sqrt(r.sub(r.sqr(O),r.mul(r.sqr(K),n)));let G=r.mul(r.add(H,O),c);const X=i(r,G);!r.is0(X)&&!r.eql(X,r.ONE)&&(G=r.sub(G,H));const ie=r.sqrt(G),we=g.create({c0:ie,c1:r.div(r.mul(K,c),ie)});if(!g.eql(g.sqr(we),S))throw new Error("Cannot find square root");const oe=we,fe=g.neg(oe),{re:ee,im:w}=g.reim(oe),{re:se,im:ue}=g.reim(fe);return w>ue||w===ue&&ee>se?oe:fe},isOdd:S=>{const{re:O,im:K}=g.reim(S),H=O%kt,G=O===Pf,X=K%kt;return BigInt(H||G&&X)==vr},fromBytes(S){if(S.length!==g.BYTES)throw new Error("fromBytes invalid length="+S.length);return{c0:r.fromBytes(S.subarray(0,r.BYTES)),c1:r.fromBytes(S.subarray(r.BYTES))}},toBytes:({c0:S,c1:O})=>je(r.toBytes(S),r.toBytes(O)),cmov:({c0:S,c1:O},{c0:K,c1:H},G)=>({c0:r.cmov(S,K,G),c1:r.cmov(O,H,G)}),reim:({c0:S,c1:O})=>({re:S,im:O}),mulByNonresidue:({c0:S,c1:O})=>g.mul({c0:S,c1:O},v),mulByB:t.Fp2mulByB,fromBigTuple:N,frobeniusMap:({c0:S,c1:O},K)=>({c0:S,c1:r.mul(O,l[K%2])})},q=({c0:S,c1:O,c2:K},{c0:H,c1:G,c2:X})=>({c0:g.add(S,H),c1:g.add(O,G),c2:g.add(K,X)}),C=({c0:S,c1:O,c2:K},{c0:H,c1:G,c2:X})=>({c0:g.sub(S,H),c1:g.sub(O,G),c2:g.sub(K,X)}),W=({c0:S,c1:O,c2:K},H)=>{if(typeof H=="bigint")return{c0:g.mul(S,H),c1:g.mul(O,H),c2:g.mul(K,H)};const{c0:G,c1:X,c2:ie}=H,we=g.mul(S,G),oe=g.mul(O,X),fe=g.mul(K,ie);return{c0:g.add(we,g.mulByNonresidue(g.sub(g.mul(g.add(O,K),g.add(X,ie)),g.add(oe,fe)))),c1:g.add(g.sub(g.mul(g.add(S,O),g.add(G,X)),g.add(we,oe)),g.mulByNonresidue(fe)),c2:g.sub(g.add(oe,g.mul(g.add(S,K),g.add(G,ie))),g.add(we,fe))}},Y=({c0:S,c1:O,c2:K})=>{let H=g.sqr(S),G=g.mul(g.mul(S,O),kt),X=g.mul(g.mul(O,K),kt),ie=g.sqr(K);return{c0:g.add(g.mulByNonresidue(X),H),c1:g.add(g.mulByNonresidue(ie),G),c2:g.sub(g.sub(g.add(g.add(G,g.sqr(g.add(g.sub(S,O),K))),X),H),ie)}},[$,re]=Ui(g,v,r.ORDER,6,2,3),P={ORDER:g.ORDER,isLE:g.isLE,BITS:3*g.BITS,BYTES:3*g.BYTES,MASK:vn(3*g.BITS),ZERO:{c0:g.ZERO,c1:g.ZERO,c2:g.ZERO},ONE:{c0:g.ONE,c1:g.ZERO,c2:g.ZERO},create:S=>S,isValid:({c0:S,c1:O,c2:K})=>g.isValid(S)&&g.isValid(O)&&g.isValid(K),is0:({c0:S,c1:O,c2:K})=>g.is0(S)&&g.is0(O)&&g.is0(K),neg:({c0:S,c1:O,c2:K})=>({c0:g.neg(S),c1:g.neg(O),c2:g.neg(K)}),eql:({c0:S,c1:O,c2:K},{c0:H,c1:G,c2:X})=>g.eql(S,H)&&g.eql(O,G)&&g.eql(K,X),sqrt:Fs,div:(S,O)=>P.mul(S,typeof O=="bigint"?r.inv(r.create(O)):P.inv(O)),pow:(S,O)=>Tn(P,S,O),invertBatch:S=>Sn(P,S),add:q,sub:C,mul:W,sqr:Y,addN:q,subN:C,mulN:W,sqrN:Y,inv:({c0:S,c1:O,c2:K})=>{let H=g.sub(g.sqr(S),g.mulByNonresidue(g.mul(K,O))),G=g.sub(g.mulByNonresidue(g.sqr(K)),g.mul(S,O)),X=g.sub(g.sqr(O),g.mul(S,K)),ie=g.inv(g.add(g.mulByNonresidue(g.add(g.mul(K,G),g.mul(O,X))),g.mul(S,H)));return{c0:g.mul(ie,H),c1:g.mul(ie,G),c2:g.mul(ie,X)}},fromBytes:S=>{if(S.length!==P.BYTES)throw new Error("fromBytes invalid length="+S.length);return{c0:g.fromBytes(S.subarray(0,g.BYTES)),c1:g.fromBytes(S.subarray(g.BYTES,2*g.BYTES)),c2:g.fromBytes(S.subarray(2*g.BYTES))}},toBytes:({c0:S,c1:O,c2:K})=>je(g.toBytes(S),g.toBytes(O),g.toBytes(K)),cmov:({c0:S,c1:O,c2:K},{c0:H,c1:G,c2:X},ie)=>({c0:g.cmov(S,H,ie),c1:g.cmov(O,G,ie),c2:g.cmov(K,X,ie)}),fromBigSix:S=>{if(!Array.isArray(S)||S.length!==6)throw new Error("invalid Fp6 usage");return{c0:g.fromBigTuple(S.slice(0,2)),c1:g.fromBigTuple(S.slice(2,4)),c2:g.fromBigTuple(S.slice(4,6))}},frobeniusMap:({c0:S,c1:O,c2:K},H)=>({c0:g.frobeniusMap(S,H),c1:g.mul(g.frobeniusMap(O,H),$[H%6]),c2:g.mul(g.frobeniusMap(K,H),re[H%6])}),mulByFp2:({c0:S,c1:O,c2:K},H)=>({c0:g.mul(S,H),c1:g.mul(O,H),c2:g.mul(K,H)}),mulByNonresidue:({c0:S,c1:O,c2:K})=>({c0:g.mulByNonresidue(K),c1:S,c2:O}),mul1:({c0:S,c1:O,c2:K},H)=>({c0:g.mulByNonresidue(g.mul(K,H)),c1:g.mul(S,H),c2:g.mul(O,H)}),mul01({c0:S,c1:O,c2:K},H,G){let X=g.mul(S,H),ie=g.mul(O,G);return{c0:g.add(g.mulByNonresidue(g.sub(g.mul(g.add(O,K),G),ie)),X),c1:g.sub(g.sub(g.mul(g.add(H,G),g.add(S,O)),X),ie),c2:g.add(g.sub(g.mul(g.add(S,K),H),X),ie)}}},L=Ui(g,v,r.ORDER,12,1,6)[0],Z=({c0:S,c1:O},{c0:K,c1:H})=>({c0:P.add(S,K),c1:P.add(O,H)}),Q=({c0:S,c1:O},{c0:K,c1:H})=>({c0:P.sub(S,K),c1:P.sub(O,H)}),D=({c0:S,c1:O},K)=>{if(typeof K=="bigint")return{c0:P.mul(S,K),c1:P.mul(O,K)};let{c0:H,c1:G}=K,X=P.mul(S,H),ie=P.mul(O,G);return{c0:P.add(X,P.mulByNonresidue(ie)),c1:P.sub(P.mul(P.add(S,O),P.add(H,G)),P.add(X,ie))}},J=({c0:S,c1:O})=>{let K=P.mul(S,O);return{c0:P.sub(P.sub(P.mul(P.add(P.mulByNonresidue(O),S),P.add(S,O)),K),P.mulByNonresidue(K)),c1:P.add(K,K)}};function he(S,O){const K=g.sqr(S),H=g.sqr(O);return{first:g.add(g.mulByNonresidue(H),K),second:g.sub(g.sub(g.sqr(g.add(S,O)),K),H)}}const le={ORDER:g.ORDER,isLE:P.isLE,BITS:2*g.BITS,BYTES:2*g.BYTES,MASK:vn(2*g.BITS),ZERO:{c0:P.ZERO,c1:P.ZERO},ONE:{c0:P.ONE,c1:P.ZERO},create:S=>S,isValid:({c0:S,c1:O})=>P.isValid(S)&&P.isValid(O),is0:({c0:S,c1:O})=>P.is0(S)&&P.is0(O),neg:({c0:S,c1:O})=>({c0:P.neg(S),c1:P.neg(O)}),eql:({c0:S,c1:O},{c0:K,c1:H})=>P.eql(S,K)&&P.eql(O,H),sqrt:Fs,inv:({c0:S,c1:O})=>{let K=P.inv(P.sub(P.sqr(S),P.mulByNonresidue(P.sqr(O))));return{c0:P.mul(S,K),c1:P.neg(P.mul(O,K))}},div:(S,O)=>le.mul(S,typeof O=="bigint"?r.inv(r.create(O)):le.inv(O)),pow:(S,O)=>Tn(le,S,O),invertBatch:S=>Sn(le,S),add:Z,sub:Q,mul:D,sqr:J,addN:Z,subN:Q,mulN:D,sqrN:J,fromBytes:S=>{if(S.length!==le.BYTES)throw new Error("fromBytes invalid length="+S.length);return{c0:P.fromBytes(S.subarray(0,P.BYTES)),c1:P.fromBytes(S.subarray(P.BYTES))}},toBytes:({c0:S,c1:O})=>je(P.toBytes(S),P.toBytes(O)),cmov:({c0:S,c1:O},{c0:K,c1:H},G)=>({c0:P.cmov(S,K,G),c1:P.cmov(O,H,G)}),fromBigTwelve:S=>({c0:P.fromBigSix(S.slice(0,6)),c1:P.fromBigSix(S.slice(6,12))}),frobeniusMap(S,O){const{c0:K,c1:H,c2:G}=P.frobeniusMap(S.c1,O),X=L[O%12];return{c0:P.frobeniusMap(S.c0,O),c1:P.create({c0:g.mul(K,X),c1:g.mul(H,X),c2:g.mul(G,X)})}},mulByFp2:({c0:S,c1:O},K)=>({c0:P.mulByFp2(S,K),c1:P.mulByFp2(O,K)}),conjugate:({c0:S,c1:O})=>({c0:S,c1:P.neg(O)}),mul014:({c0:S,c1:O},K,H,G)=>{let X=P.mul01(S,K,H),ie=P.mul1(O,G);return{c0:P.add(P.mulByNonresidue(ie),X),c1:P.sub(P.sub(P.mul01(P.add(O,S),K,g.add(H,G)),X),ie)}},mul034:({c0:S,c1:O},K,H,G)=>{const X=P.create({c0:g.mul(S.c0,K),c1:g.mul(S.c1,K),c2:g.mul(S.c2,K)}),ie=P.mul01(O,H,G),we=P.mul01(P.add(S,O),g.add(K,H),G);return{c0:P.add(P.mulByNonresidue(ie),X),c1:P.sub(we,P.add(X,ie))}},_cyclotomicSquare:t.Fp12cyclotomicSquare,_cyclotomicExp:t.Fp12cyclotomicExp,finalExponentiate:t.Fp12finalExponentiate};return{Fp:r,Fp2:g,Fp6:P,Fp4Square:he,Fp12:le}}/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */const ot=BigInt(0),Jn=BigInt(1),Le=BigInt(2),yn=BigInt(3),Wr=BigInt(4),Lt=BigInt("0xd201000000010000"),Cf=Kr(Lt),{Fp:ge,Fp2:me,Fp6:Zi,Fp4Square:Oi,Fp12:Se}=kf({ORDER:BigInt("0x1a0111ea397fe69a4b1ba7b6434bacd764774b84f38512bf6730d2a0f6b0f6241eabfffeb153ffffb9feffffffffaaab"),FP2_NONRESIDUE:[Jn,Jn],Fp2mulByB:({c0:t,c1:e})=>{const r=ge.mul(t,Wr),n=ge.mul(e,Wr);return{c0:ge.sub(r,n),c1:ge.add(r,n)}},Fp12cyclotomicSquare:({c0:t,c1:e})=>{const{c0:r,c1:n,c2:i}=t,{c0:c,c1:l,c2:u}=e,{first:y,second:_}=Oi(r,l),{first:B,second:N}=Oi(c,i),{first:I,second:v}=Oi(n,u),g=me.mulByNonresidue(v);return{c0:Zi.create({c0:me.add(me.mul(me.sub(y,r),Le),y),c1:me.add(me.mul(me.sub(B,n),Le),B),c2:me.add(me.mul(me.sub(I,i),Le),I)}),c1:Zi.create({c0:me.add(me.mul(me.add(g,c),Le),g),c1:me.add(me.mul(me.add(_,l),Le),_),c2:me.add(me.mul(me.add(N,u),Le),N)})}},Fp12cyclotomicExp(t,e){let r=Se.ONE;for(let n=Cf-1;n>=0;n--)r=Se._cyclotomicSquare(r),df(e,n)&&(r=Se.mul(r,t));return r},Fp12finalExponentiate:t=>{const e=Lt,r=Se.div(Se.frobeniusMap(t,6),t),n=Se.mul(Se.frobeniusMap(r,2),r),i=Se.conjugate(Se._cyclotomicExp(n,e)),c=Se.mul(Se.conjugate(Se._cyclotomicSquare(n)),i),l=Se.conjugate(Se._cyclotomicExp(c,e)),u=Se.conjugate(Se._cyclotomicExp(l,e)),y=Se.mul(Se.conjugate(Se._cyclotomicExp(u,e)),Se._cyclotomicSquare(i)),_=Se.conjugate(Se._cyclotomicExp(y,e)),B=Se.frobeniusMap(Se.mul(i,u),2),N=Se.frobeniusMap(Se.mul(l,n),3),I=Se.frobeniusMap(Se.mul(y,Se.conjugate(n)),1),v=Se.mul(Se.mul(_,Se.conjugate(c)),n);return Se.mul(Se.mul(Se.mul(B,N),I),v)}}),zs=sn(BigInt("0x73eda753299d7d483339d80809a1d80553bda402fffe5bfeffffffff00000001")),$f=Fa(me,[[["0x5c759507e8e333ebb5b7a9a47d7ed8532c52d39fd3a042a88b58423c50ae15d5c2638e343d9c71c6238aaaaaaaa97d6","0x5c759507e8e333ebb5b7a9a47d7ed8532c52d39fd3a042a88b58423c50ae15d5c2638e343d9c71c6238aaaaaaaa97d6"],["0x0","0x11560bf17baa99bc32126fced787c88f984f87adf7ae0c7f9a208c6b4f20a4181472aaa9cb8d555526a9ffffffffc71a"],["0x11560bf17baa99bc32126fced787c88f984f87adf7ae0c7f9a208c6b4f20a4181472aaa9cb8d555526a9ffffffffc71e","0x8ab05f8bdd54cde190937e76bc3e447cc27c3d6fbd7063fcd104635a790520c0a395554e5c6aaaa9354ffffffffe38d"],["0x171d6541fa38ccfaed6dea691f5fb614cb14b4e7f4e810aa22d6108f142b85757098e38d0f671c7188e2aaaaaaaa5ed1","0x0"]],[["0x0","0x1a0111ea397fe69a4b1ba7b6434bacd764774b84f38512bf6730d2a0f6b0f6241eabfffeb153ffffb9feffffffffaa63"],["0xc","0x1a0111ea397fe69a4b1ba7b6434bacd764774b84f38512bf6730d2a0f6b0f6241eabfffeb153ffffb9feffffffffaa9f"],["0x1","0x0"]],[["0x1530477c7ab4113b59a4c18b076d11930f7da5d4a07f649bf54439d87d27e500fc8c25ebf8c92f6812cfc71c71c6d706","0x1530477c7ab4113b59a4c18b076d11930f7da5d4a07f649bf54439d87d27e500fc8c25ebf8c92f6812cfc71c71c6d706"],["0x0","0x5c759507e8e333ebb5b7a9a47d7ed8532c52d39fd3a042a88b58423c50ae15d5c2638e343d9c71c6238aaaaaaaa97be"],["0x11560bf17baa99bc32126fced787c88f984f87adf7ae0c7f9a208c6b4f20a4181472aaa9cb8d555526a9ffffffffc71c","0x8ab05f8bdd54cde190937e76bc3e447cc27c3d6fbd7063fcd104635a790520c0a395554e5c6aaaa9354ffffffffe38f"],["0x124c9ad43b6cf79bfbf7043de3811ad0761b0f37a1e26286b0e977c69aa274524e79097a56dc4bd9e1b371c71c718b10","0x0"]],[["0x1a0111ea397fe69a4b1ba7b6434bacd764774b84f38512bf6730d2a0f6b0f6241eabfffeb153ffffb9feffffffffa8fb","0x1a0111ea397fe69a4b1ba7b6434bacd764774b84f38512bf6730d2a0f6b0f6241eabfffeb153ffffb9feffffffffa8fb"],["0x0","0x1a0111ea397fe69a4b1ba7b6434bacd764774b84f38512bf6730d2a0f6b0f6241eabfffeb153ffffb9feffffffffa9d3"],["0x12","0x1a0111ea397fe69a4b1ba7b6434bacd764774b84f38512bf6730d2a0f6b0f6241eabfffeb153ffffb9feffffffffaa99"],["0x1","0x0"]]].map(t=>t.map(e=>me.fromBigTuple(e.map(BigInt))))),qf=Fa(ge,[["0x11a05f2b1e833340b809101dd99815856b303e88a2d7005ff2627b56cdb4e2c85610c2d5f2e62d6eaeac1662734649b7","0x17294ed3e943ab2f0588bab22147a81c7c17e75b2f6a8417f565e33c70d1e86b4838f2a6f318c356e834eef1b3cb83bb","0xd54005db97678ec1d1048c5d10a9a1bce032473295983e56878e501ec68e25c958c3e3d2a09729fe0179f9dac9edcb0","0x1778e7166fcc6db74e0609d307e55412d7f5e4656a8dbf25f1b33289f1b330835336e25ce3107193c5b388641d9b6861","0xe99726a3199f4436642b4b3e4118e5499db995a1257fb3f086eeb65982fac18985a286f301e77c451154ce9ac8895d9","0x1630c3250d7313ff01d1201bf7a74ab5db3cb17dd952799b9ed3ab9097e68f90a0870d2dcae73d19cd13c1c66f652983","0xd6ed6553fe44d296a3726c38ae652bfb11586264f0f8ce19008e218f9c86b2a8da25128c1052ecaddd7f225a139ed84","0x17b81e7701abdbe2e8743884d1117e53356de5ab275b4db1a682c62ef0f2753339b7c8f8c8f475af9ccb5618e3f0c88e","0x80d3cf1f9a78fc47b90b33563be990dc43b756ce79f5574a2c596c928c5d1de4fa295f296b74e956d71986a8497e317","0x169b1f8e1bcfa7c42e0c37515d138f22dd2ecb803a0c5c99676314baf4bb1b7fa3190b2edc0327797f241067be390c9e","0x10321da079ce07e272d8ec09d2565b0dfa7dccdde6787f96d50af36003b14866f69b771f8c285decca67df3f1605fb7b","0x6e08c248e260e70bd1e962381edee3d31d79d7e22c837bc23c0bf1bc24c6b68c24b1b80b64d391fa9c8ba2e8ba2d229"],["0x8ca8d548cff19ae18b2e62f4bd3fa6f01d5ef4ba35b48ba9c9588617fc8ac62b558d681be343df8993cf9fa40d21b1c","0x12561a5deb559c4348b4711298e536367041e8ca0cf0800c0126c2588c48bf5713daa8846cb026e9e5c8276ec82b3bff","0xb2962fe57a3225e8137e629bff2991f6f89416f5a718cd1fca64e00b11aceacd6a3d0967c94fedcfcc239ba5cb83e19","0x3425581a58ae2fec83aafef7c40eb545b08243f16b1655154cca8abc28d6fd04976d5243eecf5c4130de8938dc62cd8","0x13a8e162022914a80a6f1d5f43e7a07dffdfc759a12062bb8d6b44e833b306da9bd29ba81f35781d539d395b3532a21e","0xe7355f8e4e667b955390f7f0506c6e9395735e9ce9cad4d0a43bcef24b8982f7400d24bc4228f11c02df9a29f6304a5","0x772caacf16936190f3e0c63e0596721570f5799af53a1894e2e073062aede9cea73b3538f0de06cec2574496ee84a3a","0x14a7ac2a9d64a8b230b3f5b074cf01996e7f63c21bca68a81996e1cdf9822c580fa5b9489d11e2d311f7d99bbdcc5a5e","0xa10ecf6ada54f825e920b3dafc7a3cce07f8d1d7161366b74100da67f39883503826692abba43704776ec3a79a1d641","0x95fc13ab9e92ad4476d6e3eb3a56680f682b4ee96f7d03776df533978f31c1593174e4b4b7865002d6384d168ecdd0a","0x000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000001"],["0x90d97c81ba24ee0259d1f094980dcfa11ad138e48a869522b52af6c956543d3cd0c7aee9b3ba3c2be9845719707bb33","0x134996a104ee5811d51036d776fb46831223e96c254f383d0f906343eb67ad34d6c56711962fa8bfe097e75a2e41c696","0xcc786baa966e66f4a384c86a3b49942552e2d658a31ce2c344be4b91400da7d26d521628b00523b8dfe240c72de1f6","0x1f86376e8981c217898751ad8746757d42aa7b90eeb791c09e4a3ec03251cf9de405aba9ec61deca6355c77b0e5f4cb","0x8cc03fdefe0ff135caf4fe2a21529c4195536fbe3ce50b879833fd221351adc2ee7f8dc099040a841b6daecf2e8fedb","0x16603fca40634b6a2211e11db8f0a6a074a7d0d4afadb7bd76505c3d3ad5544e203f6326c95a807299b23ab13633a5f0","0x4ab0b9bcfac1bbcb2c977d027796b3ce75bb8ca2be184cb5231413c4d634f3747a87ac2460f415ec961f8855fe9d6f2","0x987c8d5333ab86fde9926bd2ca6c674170a05bfe3bdd81ffd038da6c26c842642f64550fedfe935a15e4ca31870fb29","0x9fc4018bd96684be88c9e221e4da1bb8f3abd16679dc26c1e8b6e6a1f20cabe69d65201c78607a360370e577bdba587","0xe1bba7a1186bdb5223abde7ada14a23c42a0ca7915af6fe06985e7ed1e4d43b9b3f7055dd4eba6f2bafaaebca731c30","0x19713e47937cd1be0dfd0b8f1d43fb93cd2fcbcb6caf493fd1183e416389e61031bf3a5cce3fbafce813711ad011c132","0x18b46a908f36f6deb918c143fed2edcc523559b8aaf0c2462e6bfe7f911f643249d9cdf41b44d606ce07c8a4d0074d8e","0xb182cac101b9399d155096004f53f447aa7b12a3426b08ec02710e807b4633f06c851c1919211f20d4c04f00b971ef8","0x245a394ad1eca9b72fc00ae7be315dc757b3b080d4c158013e6632d3c40659cc6cf90ad1c232a6442d9d3f5db980133","0x5c129645e44cf1102a159f748c4a3fc5e673d81d7e86568d9ab0f5d396a7ce46ba1049b6579afb7866b1e715475224b","0x15e6be4e990f03ce4ea50b3b42df2eb5cb181d8f84965a3957add4fa95af01b2b665027efec01c7704b456be69c8b604"],["0x16112c4c3a9c98b252181140fad0eae9601a6de578980be6eec3232b5be72e7a07f3688ef60c206d01479253b03663c1","0x1962d75c2381201e1a0cbd6c43c348b885c84ff731c4d59ca4a10356f453e01f78a4260763529e3532f6102c2e49a03d","0x58df3306640da276faaae7d6e8eb15778c4855551ae7f310c35a5dd279cd2eca6757cd636f96f891e2538b53dbf67f2","0x16b7d288798e5395f20d23bf89edb4d1d115c5dbddbcd30e123da489e726af41727364f2c28297ada8d26d98445f5416","0xbe0e079545f43e4b00cc912f8228ddcc6d19c9f0f69bbb0542eda0fc9dec916a20b15dc0fd2ededda39142311a5001d","0x8d9e5297186db2d9fb266eaac783182b70152c65550d881c5ecd87b6f0f5a6449f38db9dfa9cce202c6477faaf9b7ac","0x166007c08a99db2fc3ba8734ace9824b5eecfdfa8d0cf8ef5dd365bc400a0051d5fa9c01a58b1fb93d1a1399126a775c","0x16a3ef08be3ea7ea03bcddfabba6ff6ee5a4375efa1f4fd7feb34fd206357132b920f5b00801dee460ee415a15812ed9","0x1866c8ed336c61231a1be54fd1d74cc4f9fb0ce4c6af5920abc5750c4bf39b4852cfe2f7bb9248836b233d9d55535d4a","0x167a55cda70a6e1cea820597d94a84903216f763e13d87bb5308592e7ea7d4fbc7385ea3d529b35e346ef48bb8913f55","0x4d2f259eea405bd48f010a01ad2911d9c6dd039bb61a6290e591b36e636a5c871a5c29f4f83060400f8b49cba8f6aa8","0xaccbb67481d033ff5852c1e48c50c477f94ff8aefce42d28c0f9a88cea7913516f968986f7ebbea9684b529e2561092","0xad6b9514c767fe3c3613144b45f1496543346d98adf02267d5ceef9a00d9b8693000763e3b90ac11e99b138573345cc","0x2660400eb2e4f3b628bdd0d53cd76f2bf565b94e72927c1cb748df27942480e420517bd8714cc80d1fadc1326ed06f7","0xe0fa1d816ddc03e6b24255e0d7819c171c40f65e273b853324efcd6356caa205ca2f570f13497804415473a1d634b8f","0x000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000001"]].map(t=>t.map(e=>BigInt(e)))),Vf=qa(me,{A:me.create({c0:ge.create(ot),c1:ge.create(BigInt(240))}),B:me.create({c0:ge.create(BigInt(1012)),c1:ge.create(BigInt(1012))}),Z:me.create({c0:ge.create(BigInt(-2)),c1:ge.create(BigInt(-1))})}),Gf=qa(ge,{A:ge.create(BigInt("0x144698a3b8e9433d693a02c96d4982b0ea985383ee66a8d8e8981aefd881ac98936f8da0e0f97f5cf428082d584c1d")),B:ge.create(BigInt("0x12e2908d11688030018b12e8753eee3b2016c1f0f24f4070a0b9c14fcef35ef55a23215a316ceaa5d1cc48e98e172be0")),Z:ge.create(BigInt(11))}),{G2psi:Ys,G2psi2:Hf}=Mf(ge,me,me.div(me.ONE,me.NONRESIDUE)),Fi=Object.freeze({DST:"BLS_SIG_BLS12381G2_XMD:SHA-256_SSWU_RO_NUL_",encodeDST:"BLS_SIG_BLS12381G2_XMD:SHA-256_SSWU_RO_NUL_",p:ge.ORDER,m:2,k:128,expand:"xmd",hash:ts}),Qn=Jr(ge.toBytes(ot),{infinity:!0,compressed:!0});function gn(t){t=t.slice();const e=t[0]&224,r=!!(e>>7&1),n=!!(e>>6&1),i=!!(e>>5&1);return t[0]&=31,{compressed:r,infinity:n,sort:i,value:t}}function Jr(t,e){if(t[0]&224)throw new Error("setMask: non-empty mask");return e.compressed&&(t[0]|=128),e.infinity&&(t[0]|=64),e.sort&&(t[0]|=32),t}function Ks(t){t.assertValidity();const e=t.equals(lt.G1.ProjectivePoint.ZERO),{x:r,y:n}=t.toAffine();if(e)return Qn.slice();const i=ge.ORDER,c=!!(n*Le/i);return Jr(De(r,ge.BYTES),{compressed:!0,sort:c})}function Ws(t){t.assertValidity();const e=ge.BYTES;if(t.equals(lt.G2.ProjectivePoint.ZERO))return je(Qn,De(ot,e));const{x:r,y:n}=t.toAffine(),{re:i,im:c}=me.reim(r),{re:l,im:u}=me.reim(n),_=!!((u>ot?u*Le:l*Le)/ge.ORDER&Jn),B=i;return je(Jr(De(c,e),{sort:_,compressed:!0}),De(B,e))}const lt=Ff({fields:{Fp:ge,Fp2:me,Fp6:Zi,Fp12:Se,Fr:zs},G1:{Fp:ge,h:BigInt("0x396c8c005555e1568c00aaab0000aaab"),Gx:BigInt("0x17f1d3a73197d7942695638c4fa9ac0fc3688c4f9774b905a14e3a3f171bac586c55e83ff97a1aeffb3af00adb22c6bb"),Gy:BigInt("0x08b3f481e3aaa0f1a09e30ed741d8ae4fcf5e095d5d00af600db18cb2c04b3edd03cc744a2888ae40caa232946c5e7e1"),a:ge.ZERO,b:Wr,htfDefaults:{...Fi,m:1,DST:"BLS_SIG_BLS12381G1_XMD:SHA-256_SSWU_RO_NUL_"},wrapPrivateKey:!0,allowInfinityPoint:!0,isTorsionFree:(t,e)=>{const r=BigInt("0x5f19672fdf76ce51ba69c6076a0f77eaddb3a93be6f89688de17d813620a00022e01fffffffefffe"),n=new t(ge.mul(e.px,r),e.py,e.pz);return e.multiplyUnsafe(Lt).negate().multiplyUnsafe(Lt).equals(n)},clearCofactor:(t,e)=>e.multiplyUnsafe(Lt).add(e),mapToCurve:t=>{const{x:e,y:r}=Gf(ge.create(t[0]));return qf(e,r)},fromBytes:t=>{const{compressed:e,infinity:r,sort:n,value:i}=gn(t);if(i.length===48&&e){const c=ge.ORDER,l=_t(i),u=ge.create(l&ge.MASK);if(r){if(u!==ot)throw new Error("G1: non-empty compressed point at infinity");return{x:ot,y:ot}}const y=ge.add(ge.pow(u,yn),ge.create(lt.params.G1b));let _=ge.sqrt(y);if(!_)throw new Error("invalid compressed G1 point");return _*Le/c!==BigInt(n)&&(_=ge.neg(_)),{x:ge.create(u),y:ge.create(_)}}else if(i.length===96&&!e){const c=_t(i.subarray(0,ge.BYTES)),l=_t(i.subarray(ge.BYTES));if(r){if(c!==ot||l!==ot)throw new Error("G1: non-empty point at infinity");return lt.G1.ProjectivePoint.ZERO.toAffine()}return{x:ge.create(c),y:ge.create(l)}}else throw new Error("invalid point G1, expected 48/96 bytes")},toBytes:(t,e,r)=>{const n=e.equals(t.ZERO),{x:i,y:c}=e.toAffine();if(r){if(n)return Qn.slice();const l=ge.ORDER,u=!!(c*Le/l);return Jr(De(i,ge.BYTES),{compressed:!0,sort:u})}else return n?je(new Uint8Array([64]),new Uint8Array(2*ge.BYTES-1)):je(De(i,ge.BYTES),De(c,ge.BYTES))},ShortSignature:{fromHex(t){const{infinity:e,sort:r,value:n}=gn(at("signatureHex",t,48)),i=ge.ORDER,c=_t(n);if(e)return lt.G1.ProjectivePoint.ZERO;const l=ge.create(c&ge.MASK),u=ge.add(ge.pow(l,yn),ge.create(lt.params.G1b));let y=ge.sqrt(u);if(!y)throw new Error("invalid compressed G1 point");const _=BigInt(r);y*Le/i!==_&&(y=ge.neg(y));const B=lt.G1.ProjectivePoint.fromAffine({x:l,y});return B.assertValidity(),B},toRawBytes(t){return Ks(t)},toHex(t){return pr(Ks(t))}}},G2:{Fp:me,h:BigInt("0x5d543a95414e7f1091d50792876a202cd91de4547085abaa68a205b2e5a7ddfa628f1cb4d9e82ef21537e293a6691ae1616ec6e786f0c70cf1c38e31c7238e5"),Gx:me.fromBigTuple([BigInt("0x024aa2b2f08f0a91260805272dc51051c6e47ad4fa403b02b4510b647ae3d1770bac0326a805bbefd48056c8c121bdb8"),BigInt("0x13e02b6052719f607dacd3a088274f65596bd0d09920b61ab5da61bbdc7f5049334cf11213945d57e5ac7d055d042b7e")]),Gy:me.fromBigTuple([BigInt("0x0ce5d527727d6e118cc9cdc6da2e351aadfd9baa8cbdd3a76d429a695160d12c923ac9cc3baca289e193548608b82801"),BigInt("0x0606c4a02ea734cc32acd2b02bc28b99cb3e287e85a763af267492ab572e99ab3f370d275cec1da1aaa9075ff05f79be")]),a:me.ZERO,b:me.fromBigTuple([Wr,Wr]),hEff:BigInt("0xbc69f08f2ee75b3584c6a0ea91b352888e2a8e9145ad7689986ff031508ffe1329c2f178731db956d82bf015d1212b02ec0ec69d7477c1ae954cbc06689f6a359894c0adebbf6b4e8020005aaa95551"),htfDefaults:{...Fi},wrapPrivateKey:!0,allowInfinityPoint:!0,mapToCurve:t=>{const{x:e,y:r}=Vf(me.fromBigTuple(t));return $f(e,r)},isTorsionFree:(t,e)=>e.multiplyUnsafe(Lt).negate().equals(Ys(t,e)),clearCofactor:(t,e)=>{const r=Lt;let n=e.multiplyUnsafe(r).negate(),i=Ys(t,e),c=e.double();return c=Hf(t,c),c=c.subtract(i),i=n.add(i),i=i.multiplyUnsafe(r).negate(),c=c.add(i),c=c.subtract(n),c.subtract(e)},fromBytes:t=>{const{compressed:e,infinity:r,sort:n,value:i}=gn(t);if(!e&&!r&&n||!e&&r&&n||n&&r&&e)throw new Error("invalid encoding flag: "+(t[0]&224));const c=ge.BYTES,l=(u,y,_)=>_t(u.slice(y,_));if(i.length===96&&e){const u=lt.params.G2b,y=ge.ORDER;if(r){if(i.reduce((q,C)=>q!==0?C+1:C,0)>0)throw new Error("invalid compressed G2 point");return{x:me.ZERO,y:me.ZERO}}const _=l(i,0,c),B=l(i,c,2*c),N=me.create({c0:ge.create(B),c1:ge.create(_)}),I=me.add(me.pow(N,yn),u);let v=me.sqrt(I);const g=v.c1===ot?v.c0*Le/y:v.c1*Le/y?Jn:ot;return v=n&&g>0?v:me.neg(v),{x:N,y:v}}else if(i.length===192&&!e){if(r){if(i.reduce((N,I)=>N!==0?I+1:I,0)>0)throw new Error("invalid uncompressed G2 point");return{x:me.ZERO,y:me.ZERO}}const u=l(i,0,c),y=l(i,c,2*c),_=l(i,2*c,3*c),B=l(i,3*c,4*c);return{x:me.fromBigTuple([y,u]),y:me.fromBigTuple([B,_])}}else throw new Error("invalid point G2, expected 96/192 bytes")},toBytes:(t,e,r)=>{const{BYTES:n,ORDER:i}=ge,c=e.equals(t.ZERO),{x:l,y:u}=e.toAffine();if(r){if(c)return je(Qn,De(ot,n));const y=!!(u.c1===ot?u.c0*Le/i:u.c1*Le/i);return je(Jr(De(l.c1,n),{compressed:!0,sort:y}),De(l.c0,n))}else{if(c)return je(new Uint8Array([64]),new Uint8Array(4*n-1));const{re:y,im:_}=me.reim(l),{re:B,im:N}=me.reim(u);return je(De(_,n),De(y,n),De(N,n),De(B,n))}},Signature:{fromHex(t){const{infinity:e,sort:r,value:n}=gn(at("signatureHex",t)),i=ge.ORDER,c=n.length/2;if(c!==48&&c!==96)throw new Error("invalid compressed signature length, must be 96 or 192");const l=_t(n.slice(0,c)),u=_t(n.slice(c));if(e)return lt.G2.ProjectivePoint.ZERO;const y=ge.create(l&ge.MASK),_=ge.create(u),B=me.create({c0:_,c1:y}),N=me.add(me.pow(B,yn),lt.params.G2b);let I=me.sqrt(N);if(!I)throw new Error("Failed to find a square root");const{re:v,im:g}=me.reim(I),q=BigInt(r),C=g>ot&&g*Le/i!==q,W=g===ot&&v*Le/i!==q;(C||W)&&(I=me.neg(I));const Y=lt.G2.ProjectivePoint.fromAffine({x:B,y:I});return Y.assertValidity(),Y},toRawBytes(t){return Ws(t)},toHex(t){return pr(Ws(t))}}},params:{ateLoopSize:Lt,r:zs.ORDER,xNegative:!0,twistType:"multiplicative"},htfDefaults:Fi,hash:ts,randomBytes:lo});function jf(t,e,r){const n=typeof t=="string"?t:Xe(t),i=typeof e=="string"?e:Xe(e),c=typeof r=="string"?r:Xe(r);return lt.verifyShortSignature(i,c,n)}const Va=t=>Ze(new Pr(t)),ds=t=>{const e=Va(t);return new Date(Number(e)/1e6)};var zf=globalThis&&globalThis.__classPrivateFieldSet||function(t,e,r,n,i){if(n==="m")throw new TypeError("Private method is not writable");if(n==="a"&&!i)throw new TypeError("Private accessor was defined without a setter");if(typeof e=="function"?t!==e||!i:!e.has(t))throw new TypeError("Cannot write private member to an object whose class did not declare it");return n==="a"?i.call(t,r):i?i.value=r:e.set(t,r),r},Yf=globalThis&&globalThis.__classPrivateFieldGet||function(t,e,r,n){if(r==="a"&&!n)throw new TypeError("Private accessor was defined without a getter");if(typeof e=="function"?t!==e||!n:!e.has(t))throw new TypeError("Cannot read private member from an object whose class did not declare it");return r==="m"?n:r==="a"?n.call(t):n?n.value:e.get(t)},Nn;class It extends $e{constructor(e){super(`Invalid certificate: ${e}`)}}var ut;(function(t){t[t.Empty=0]="Empty",t[t.Fork=1]="Fork",t[t.Labeled=2]="Labeled",t[t.Leaf=3]="Leaf",t[t.Pruned=4]="Pruned"})(ut||(ut={}));function Kf(t,e){const r=new Uint8Array(t),n=new Uint8Array(e);for(let i=0;i<r.length;i++)if(r[i]>n[i])return!0;return!1}class fr{constructor(e,r,n,i,c=5,l=!1){this._rootKey=r,this._canisterId=n,this._blsVerify=i,this._maxAgeInMinutes=c,Nn.set(this,!1),zf(this,Nn,l,"f"),this.cert=qt(new Uint8Array(e))}static async create(e){const r=fr.createUnverified(e);return await r.verify(),r}static createUnverified(e){let r=e.blsVerify;return r||(r=jf),new fr(e.certificate,e.rootKey,e.canisterId,r,e.maxAgeInMinutes,e.disableTimeVerification)}lookup(e){return Fr(e,this.cert.tree)}lookup_label(e){return this.lookup([e])}async verify(){const e=await In(this.cert.tree),r=await this._checkDelegationAndGetKey(this.cert.delegation),n=this.cert.signature,i=Zf(r),c=Ot(Vr("ic-state-root"),e);let l=!1;const u=dt(this.lookup(["time"]));if(!u)throw new It("Certificate does not contain a time");if(!Yf(this,Nn,"f")){const _=this._maxAgeInMinutes*60*1e3,B=Date.now(),N=B-_,I=B+3e5,v=ds(u);if(v.getTime()<N)throw new It(`Certificate is signed more than ${this._maxAgeInMinutes} minutes in the past. Certificate time: `+v.toISOString()+" Current time: "+new Date(B).toISOString());if(v.getTime()>I)throw new It("Certificate is signed more than 5 minutes in the future. Certificate time: "+v.toISOString()+" Current time: "+new Date(B).toISOString())}try{l=await this._blsVerify(new Uint8Array(i),new Uint8Array(n),new Uint8Array(c))}catch{l=!1}if(!l)throw new It("Signature verification failed")}async _checkDelegationAndGetKey(e){if(!e)return this._rootKey;const r=await fr.createUnverified({certificate:e.certificate,rootKey:this._rootKey,canisterId:this._canisterId,blsVerify:this._blsVerify,maxAgeInMinutes:1/0});if(r.cert.delegation)throw new It("Delegation certificates cannot be nested");if(await r.verify(),this._canisterId.toString()!==Y0&&!Ga({canisterId:this._canisterId,subnetId:ve.fromUint8Array(new Uint8Array(e.subnet_id)),tree:r.cert.tree}))throw new It(`Canister ${this._canisterId} not in range of delegations for subnet 0x${Xe(e.subnet_id)}`);const n=dt(r.lookup(["subnet",e.subnet_id,"public_key"]));if(!n)throw new Error(`Could not find subnet key for subnet 0x${Xe(e.subnet_id)}`);return n}}Nn=new WeakMap;const $r=zn("308182301d060d2b0601040182dc7c0503010201060c2b0601040182dc7c05030201036100"),Wf=96;function Zf(t){const e=$r.byteLength+Wf;if(t.byteLength!==e)throw new TypeError(`BLS DER-encoded public key must be ${e} bytes long`);const r=t.slice(0,$r.byteLength);if(!ei(r,$r))throw new TypeError(`BLS DER-encoded public key is invalid. Expect the following prefix: ${$r}, but get ${r}`);return t.slice($r.byteLength)}function dt(t){if(t.status===ze.Found){if(t.value instanceof ArrayBuffer)return t.value;if(t.value instanceof Uint8Array)return t.value.buffer}}async function In(t){switch(t[0]){case ut.Empty:return xt(Vr("ic-hashtree-empty"));case ut.Pruned:return t[1];case ut.Leaf:return xt(Ot(Vr("ic-hashtree-leaf"),t[1]));case ut.Labeled:return xt(Ot(Vr("ic-hashtree-labeled"),t[1],await In(t[2])));case ut.Fork:return xt(Ot(Vr("ic-hashtree-fork"),await In(t[1]),await In(t[2])));default:throw new Error("unreachable")}}function Vr(t){const e=new Uint8Array([t.length]),r=new TextEncoder().encode(t);return Ot(e,r)}var ze;(function(t){t.Unknown="unknown",t.Absent="absent",t.Found="found"})(ze||(ze={}));var Ct;(function(t){t.Less="less",t.Greater="greater"})(Ct||(Ct={}));function Fr(t,e){if(t.length===0)switch(e[0]){case ut.Leaf:{if(!e[1])throw new Error("Invalid tree structure for leaf");return e[1]instanceof ArrayBuffer?{status:ze.Found,value:e[1]}:e[1]instanceof Uint8Array?{status:ze.Found,value:e[1].buffer}:{status:ze.Found,value:e[1]}}default:return{status:ze.Found,value:e}}const r=typeof t[0]=="string"?new TextEncoder().encode(t[0]):t[0],n=Rn(r,e);switch(n.status){case ze.Found:return Fr(t.slice(1),n.value);case Ct.Greater:case Ct.Less:return{status:ze.Absent};default:return n}}function Li(t){switch(t[0]){case ut.Empty:return[];case ut.Fork:return Li(t[1]).concat(Li(t[2]));default:return[t]}}function Rn(t,e){switch(e[0]){case ut.Labeled:return Kf(t,e[1])?{status:Ct.Greater}:ei(t,e[1])?{status:ze.Found,value:e[2]}:{status:Ct.Less};case ut.Fork:const r=Rn(t,e[1]);switch(r.status){case Ct.Greater:{const n=Rn(t,e[2]);return n.status===Ct.Less?{status:ze.Absent}:n}case ze.Unknown:{let n=Rn(t,e[2]);return n.status===Ct.Less?{status:ze.Unknown}:n}default:return r}case ut.Pruned:return{status:ze.Unknown};default:return{status:ze.Absent}}}function Ga(t){const{canisterId:e,subnetId:r,tree:n}=t,i=Fr(["subnet",r.toUint8Array(),"canister_ranges"],n);if(i.status!==ze.Found||!(i.value instanceof ArrayBuffer))throw new Error(`Could not find canister ranges for subnet ${r}`);return qt(i.value).map(y=>[ve.fromUint8Array(y[0]),ve.fromUint8Array(y[1])]).some(y=>y[0].ltEq(e)&&y[1].gtEq(e))}class Lf{constructor(e,r,n){this.key=e,this.path=r,this.decodeStrategy=n}}const Ha=async t=>{const{agent:e,paths:r}=t,n=ve.from(t.canisterId),i=[...new Set(r)],c=i.map(y=>Xi(y,n)),l=new Map,u=i.map((y,_)=>(async()=>{var B;try{const N=await e.readState(n,{paths:[c[_]]});if(e.rootKey==null)throw new Error("Agent is missing root key");const I=await fr.create({certificate:N.certificate,rootKey:e.rootKey,canisterId:n,disableTimeVerification:!0}),v=(C,W)=>{if(W==="subnet"){if(e.rootKey==null)throw new Error("Agent is missing root key");const Y=ja(N.certificate,n,e.rootKey);return{path:W,data:Y}}else return{path:W,data:dt(C.lookup(Xi(W,n)))}},{path:g,data:q}=v(I,i[_]);if(!q)console.warn(`Expected to find result for path ${g}, but instead found nothing.`),typeof g=="string"?l.set(g,null):l.set(g.key,null);else switch(g){case"time":{l.set(g,ds(q));break}case"controllers":{l.set(g,Jf(q));break}case"module_hash":{l.set(g,Zs(q));break}case"subnet":{l.set(g,q);break}case"candid":{l.set(g,new TextDecoder().decode(q));break}default:if(typeof g!="string"&&"key"in g&&"path"in g)switch(g.decodeStrategy){case"raw":l.set(g.key,q);break;case"leb128":{l.set(g.key,Va(q));break}case"cbor":{l.set(g.key,za(q));break}case"hex":{l.set(g.key,Zs(q));break}case"utf-8":l.set(g.key,Xf(q))}}}catch(N){if(!((B=N==null?void 0:N.message)===null||B===void 0)&&B.includes("Invalid certificate"))throw new $e(N.message);typeof y!="string"&&"key"in y&&"path"in y?l.set(y.key,null):l.set(y,null),console.group(),console.warn(`Expected to find result for path ${y}, but instead found nothing.`),console.warn(N),console.groupEnd()}})());return await Promise.all(u),l},ja=(t,e,r)=>{if(!e._isPrincipal)throw new Error("Invalid canisterId");const n=qt(new Uint8Array(t)),i=n.tree;let c=n.delegation,l;if(c&&c.subnet_id?l=ve.fromUint8Array(new Uint8Array(c.subnet_id)):!c&&typeof r<"u"?(l=ve.selfAuthenticating(new Uint8Array(r)),c={subnet_id:l.toUint8Array(),certificate:new ArrayBuffer(0)}):(l=ve.selfAuthenticating(ve.fromText("tdb26-jop6k-aogll-7ltgs-eruif-6kk7m-qpktf-gdiqx-mxtrf-vb5e6-eqe").toUint8Array()),c={subnet_id:l.toUint8Array(),certificate:new ArrayBuffer(0)}),!Ga({canisterId:e,subnetId:l,tree:i}))throw new Error("Canister not in range");const y=Fr(["subnet",c.subnet_id,"node"],i);if(y.status!==ze.Found)throw new Error("Node not found");if(y.value instanceof ArrayBuffer)throw new Error("Invalid node tree");const _=Li(y.value),B=new Map;return _.forEach(N=>{const I=ve.from(new Uint8Array(N[1])).toText(),v=Fr(["public_key"],N[2]);if(v.status!==ze.Found)throw new Error("Public key not found");const g=v.value;if(g.byteLength!==44)throw new Error("Invalid public key length");B.set(I,g)}),{subnetId:ve.fromUint8Array(new Uint8Array(c.subnet_id)).toText(),nodeKeys:B}},Xi=(t,e)=>{const r=new TextEncoder,n=c=>new DataView(r.encode(c).buffer).buffer,i=new DataView(e.toUint8Array().buffer).buffer;switch(t){case"time":return[n("time")];case"controllers":return[n("canister"),i,n("controllers")];case"module_hash":return[n("canister"),i,n("module_hash")];case"subnet":return[n("subnet")];case"candid":return[n("canister"),i,n("metadata"),n("candid:service")];default:if("key"in t&&"path"in t)if(typeof t.path=="string"||t.path instanceof ArrayBuffer){const c=t.path,l=typeof c=="string"?n(c):c;return[n("canister"),i,n("metadata"),l]}else return t.path}throw new Error(`An unexpeected error was encountered while encoding your path for canister status. Please ensure that your path, ${t} was formatted correctly.`)},Zs=t=>Xe(t),za=t=>qt(t),Xf=t=>new TextDecoder().decode(t),Jf=t=>za(t).map(r=>ve.fromUint8Array(new Uint8Array(r))),Qf=Object.freeze(Object.defineProperty({__proto__:null,CustomPath:Lf,encodePath:Xi,fetchNodeKeys:ja,request:Ha},Symbol.toStringTag,{value:"Module"})),wn=BigInt(2**32-1),Ji=BigInt(32);function Ya(t,e=!1){return e?{h:Number(t&wn),l:Number(t>>Ji&wn)}:{h:Number(t>>Ji&wn)|0,l:Number(t&wn)|0}}function Df(t,e=!1){let r=new Uint32Array(t.length),n=new Uint32Array(t.length);for(let i=0;i<t.length;i++){const{h:c,l}=Ya(t[i],e);[r[i],n[i]]=[c,l]}return[r,n]}const e0=(t,e)=>BigInt(t>>>0)<<Ji|BigInt(e>>>0),t0=(t,e,r)=>t>>>r,r0=(t,e,r)=>t<<32-r|e>>>r,n0=(t,e,r)=>t>>>r|e<<32-r,i0=(t,e,r)=>t<<32-r|e>>>r,s0=(t,e,r)=>t<<64-r|e>>>r-32,o0=(t,e,r)=>t>>>r-32|e<<64-r,a0=(t,e)=>e,c0=(t,e)=>t,u0=(t,e,r)=>t<<r|e>>>32-r,f0=(t,e,r)=>e<<r|t>>>32-r,l0=(t,e,r)=>e<<r-32|t>>>64-r,h0=(t,e,r)=>t<<r-32|e>>>64-r;function d0(t,e,r,n){const i=(e>>>0)+(n>>>0);return{h:t+r+(i/2**32|0)|0,l:i|0}}const p0=(t,e,r)=>(t>>>0)+(e>>>0)+(r>>>0),y0=(t,e,r,n)=>e+r+n+(t/2**32|0)|0,g0=(t,e,r,n)=>(t>>>0)+(e>>>0)+(r>>>0)+(n>>>0),w0=(t,e,r,n,i)=>e+r+n+i+(t/2**32|0)|0,m0=(t,e,r,n,i)=>(t>>>0)+(e>>>0)+(r>>>0)+(n>>>0)+(i>>>0),b0=(t,e,r,n,i,c)=>e+r+n+i+c+(t/2**32|0)|0,_0={fromBig:Ya,split:Df,toBig:e0,shrSH:t0,shrSL:r0,rotrSH:n0,rotrSL:i0,rotrBH:s0,rotrBL:o0,rotr32H:a0,rotr32L:c0,rotlSH:u0,rotlSL:f0,rotlBH:l0,rotlBL:h0,add:d0,add3L:p0,add3H:y0,add4L:g0,add4H:w0,add5H:b0,add5L:m0},Be=_0,[x0,E0]=(()=>Be.split(["0x428a2f98d728ae22","0x7137449123ef65cd","0xb5c0fbcfec4d3b2f","0xe9b5dba58189dbbc","0x3956c25bf348b538","0x59f111f1b605d019","0x923f82a4af194f9b","0xab1c5ed5da6d8118","0xd807aa98a3030242","0x12835b0145706fbe","0x243185be4ee4b28c","0x550c7dc3d5ffb4e2","0x72be5d74f27b896f","0x80deb1fe3b1696b1","0x9bdc06a725c71235","0xc19bf174cf692694","0xe49b69c19ef14ad2","0xefbe4786384f25e3","0x0fc19dc68b8cd5b5","0x240ca1cc77ac9c65","0x2de92c6f592b0275","0x4a7484aa6ea6e483","0x5cb0a9dcbd41fbd4","0x76f988da831153b5","0x983e5152ee66dfab","0xa831c66d2db43210","0xb00327c898fb213f","0xbf597fc7beef0ee4","0xc6e00bf33da88fc2","0xd5a79147930aa725","0x06ca6351e003826f","0x142929670a0e6e70","0x27b70a8546d22ffc","0x2e1b21385c26c926","0x4d2c6dfc5ac42aed","0x53380d139d95b3df","0x650a73548baf63de","0x766a0abb3c77b2a8","0x81c2c92e47edaee6","0x92722c851482353b","0xa2bfe8a14cf10364","0xa81a664bbc423001","0xc24b8b70d0f89791","0xc76c51a30654be30","0xd192e819d6ef5218","0xd69906245565a910","0xf40e35855771202a","0x106aa07032bbd1b8","0x19a4c116b8d2d0c8","0x1e376c085141ab53","0x2748774cdf8eeb99","0x34b0bcb5e19b48a8","0x391c0cb3c5c95a63","0x4ed8aa4ae3418acb","0x5b9cca4f7763e373","0x682e6ff3d6b2b8a3","0x748f82ee5defb2fc","0x78a5636f43172f60","0x84c87814a1f0ab72","0x8cc702081a6439ec","0x90befffa23631e28","0xa4506cebde82bde9","0xbef9a3f7b2c67915","0xc67178f2e372532b","0xca273eceea26619c","0xd186b8c721c0c207","0xeada7dd6cde0eb1e","0xf57d4f7fee6ed178","0x06f067aa72176fba","0x0a637dc5a2c898a6","0x113f9804bef90dae","0x1b710b35131c471b","0x28db77f523047d84","0x32caab7b40c72493","0x3c9ebe0a15c9bebc","0x431d67c49c100d4c","0x4cc5d4becb3e42b6","0x597f299cfc657e2a","0x5fcb6fab3ad6faec","0x6c44198c4a475817"].map(t=>BigInt(t))))(),Yt=new Uint32Array(80),Kt=new Uint32Array(80);class B0 extends ho{constructor(){super(128,64,16,!1),this.Ah=1779033703,this.Al=-205731576,this.Bh=-1150833019,this.Bl=-2067093701,this.Ch=1013904242,this.Cl=-23791573,this.Dh=-1521486534,this.Dl=1595750129,this.Eh=1359893119,this.El=-1377402159,this.Fh=-1694144372,this.Fl=725511199,this.Gh=528734635,this.Gl=-79577749,this.Hh=1541459225,this.Hl=327033209}get(){const{Ah:e,Al:r,Bh:n,Bl:i,Ch:c,Cl:l,Dh:u,Dl:y,Eh:_,El:B,Fh:N,Fl:I,Gh:v,Gl:g,Hh:q,Hl:C}=this;return[e,r,n,i,c,l,u,y,_,B,N,I,v,g,q,C]}set(e,r,n,i,c,l,u,y,_,B,N,I,v,g,q,C){this.Ah=e|0,this.Al=r|0,this.Bh=n|0,this.Bl=i|0,this.Ch=c|0,this.Cl=l|0,this.Dh=u|0,this.Dl=y|0,this.Eh=_|0,this.El=B|0,this.Fh=N|0,this.Fl=I|0,this.Gh=v|0,this.Gl=g|0,this.Hh=q|0,this.Hl=C|0}process(e,r){for(let $=0;$<16;$++,r+=4)Yt[$]=e.getUint32(r),Kt[$]=e.getUint32(r+=4);for(let $=16;$<80;$++){const re=Yt[$-15]|0,P=Kt[$-15]|0,L=Be.rotrSH(re,P,1)^Be.rotrSH(re,P,8)^Be.shrSH(re,P,7),Z=Be.rotrSL(re,P,1)^Be.rotrSL(re,P,8)^Be.shrSL(re,P,7),Q=Yt[$-2]|0,D=Kt[$-2]|0,J=Be.rotrSH(Q,D,19)^Be.rotrBH(Q,D,61)^Be.shrSH(Q,D,6),he=Be.rotrSL(Q,D,19)^Be.rotrBL(Q,D,61)^Be.shrSL(Q,D,6),le=Be.add4L(Z,he,Kt[$-7],Kt[$-16]),S=Be.add4H(le,L,J,Yt[$-7],Yt[$-16]);Yt[$]=S|0,Kt[$]=le|0}let{Ah:n,Al:i,Bh:c,Bl:l,Ch:u,Cl:y,Dh:_,Dl:B,Eh:N,El:I,Fh:v,Fl:g,Gh:q,Gl:C,Hh:W,Hl:Y}=this;for(let $=0;$<80;$++){const re=Be.rotrSH(N,I,14)^Be.rotrSH(N,I,18)^Be.rotrBH(N,I,41),P=Be.rotrSL(N,I,14)^Be.rotrSL(N,I,18)^Be.rotrBL(N,I,41),L=N&v^~N&q,Z=I&g^~I&C,Q=Be.add5L(Y,P,Z,E0[$],Kt[$]),D=Be.add5H(Q,W,re,L,x0[$],Yt[$]),J=Q|0,he=Be.rotrSH(n,i,28)^Be.rotrBH(n,i,34)^Be.rotrBH(n,i,39),le=Be.rotrSL(n,i,28)^Be.rotrBL(n,i,34)^Be.rotrBL(n,i,39),S=n&c^n&u^c&u,O=i&l^i&y^l&y;W=q|0,Y=C|0,q=v|0,C=g|0,v=N|0,g=I|0,{h:N,l:I}=Be.add(_|0,B|0,D|0,J|0),_=u|0,B=y|0,u=c|0,y=l|0,c=n|0,l=i|0;const K=Be.add3L(J,le,O);n=Be.add3H(K,D,he,S),i=K|0}({h:n,l:i}=Be.add(this.Ah|0,this.Al|0,n|0,i|0)),{h:c,l}=Be.add(this.Bh|0,this.Bl|0,c|0,l|0),{h:u,l:y}=Be.add(this.Ch|0,this.Cl|0,u|0,y|0),{h:_,l:B}=Be.add(this.Dh|0,this.Dl|0,_|0,B|0),{h:N,l:I}=Be.add(this.Eh|0,this.El|0,N|0,I|0),{h:v,l:g}=Be.add(this.Fh|0,this.Fl|0,v|0,g|0),{h:q,l:C}=Be.add(this.Gh|0,this.Gl|0,q|0,C|0),{h:W,l:Y}=Be.add(this.Hh|0,this.Hl|0,W|0,Y|0),this.set(n,i,c,l,u,y,_,B,N,I,v,g,q,C,W,Y)}roundClean(){Yt.fill(0),Kt.fill(0)}destroy(){this.buffer.fill(0),this.set(0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0)}}const A0=es(()=>new B0);/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */const gt=BigInt(0),ct=BigInt(1),mn=BigInt(2),v0=BigInt(8),T0={zip215:!0};function S0(t){const e=$a(t);return nn(t,{hash:"function",a:"bigint",d:"bigint",randomBytes:"function"},{adjustScalarBytes:"function",domain:"function",uvRatio:"function",mapToCurve:"function"}),Object.freeze({...e})}function N0(t){const e=S0(t),{Fp:r,n,prehash:i,hash:c,randomBytes:l,nByteLength:u,h:y}=e,_=mn<<BigInt(u*8)-ct,B=r.create,N=sn(e.n,e.nBitLength),I=e.uvRatio||((H,G)=>{try{return{isValid:!0,value:r.sqrt(H*r.inv(G))}}catch{return{isValid:!1,value:gt}}}),v=e.adjustScalarBytes||(H=>H),g=e.domain||((H,G,X)=>{if(zr("phflag",X),G.length||X)throw new Error("Contexts/pre-hash are not supported");return H});function q(H,G){Xt("coordinate "+H,G,gt,_)}function C(H){if(!(H instanceof $))throw new Error("ExtendedPoint expected")}const W=Lr((H,G)=>{const{ex:X,ey:ie,ez:we}=H,oe=H.is0();G==null&&(G=oe?v0:r.inv(we));const fe=B(X*G),ee=B(ie*G),w=B(we*G);if(oe)return{x:gt,y:ct};if(w!==ct)throw new Error("invZ was invalid");return{x:fe,y:ee}}),Y=Lr(H=>{const{a:G,d:X}=e;if(H.is0())throw new Error("bad point: ZERO");const{ex:ie,ey:we,ez:oe,et:fe}=H,ee=B(ie*ie),w=B(we*we),se=B(oe*oe),ue=B(se*se),de=B(ee*G),te=B(se*B(de+w)),ae=B(ue+B(X*B(ee*w)));if(te!==ae)throw new Error("bad point: equation left != right (1)");const m=B(ie*we),x=B(oe*fe);if(m!==x)throw new Error("bad point: equation left != right (2)");return!0});class ${constructor(G,X,ie,we){this.ex=G,this.ey=X,this.ez=ie,this.et=we,q("x",G),q("y",X),q("z",ie),q("t",we),Object.freeze(this)}get x(){return this.toAffine().x}get y(){return this.toAffine().y}static fromAffine(G){if(G instanceof $)throw new Error("extended point not allowed");const{x:X,y:ie}=G||{};return q("x",X),q("y",ie),new $(X,ie,ct,B(X*ie))}static normalizeZ(G){const X=r.invertBatch(G.map(ie=>ie.ez));return G.map((ie,we)=>ie.toAffine(X[we])).map($.fromAffine)}static msm(G,X){return Ca($,N,G,X)}_setWindowSize(G){L.setWindowSize(this,G)}assertValidity(){Y(this)}equals(G){C(G);const{ex:X,ey:ie,ez:we}=this,{ex:oe,ey:fe,ez:ee}=G,w=B(X*ee),se=B(oe*we),ue=B(ie*ee),de=B(fe*we);return w===se&&ue===de}is0(){return this.equals($.ZERO)}negate(){return new $(B(-this.ex),this.ey,this.ez,B(-this.et))}double(){const{a:G}=e,{ex:X,ey:ie,ez:we}=this,oe=B(X*X),fe=B(ie*ie),ee=B(mn*B(we*we)),w=B(G*oe),se=X+ie,ue=B(B(se*se)-oe-fe),de=w+fe,te=de-ee,ae=w-fe,m=B(ue*te),x=B(de*ae),A=B(ue*ae),M=B(te*de);return new $(m,x,M,A)}add(G){C(G);const{a:X,d:ie}=e,{ex:we,ey:oe,ez:fe,et:ee}=this,{ex:w,ey:se,ez:ue,et:de}=G;if(X===BigInt(-1)){const b=B((oe-we)*(se+w)),T=B((oe+we)*(se-w)),V=B(T-b);if(V===gt)return this.double();const ne=B(fe*mn*de),pe=B(ee*mn*ue),ye=pe+ne,xe=T+b,d=pe-ne,a=B(ye*V),f=B(xe*d),E=B(ye*d),F=B(V*xe);return new $(a,f,F,E)}const te=B(we*w),ae=B(oe*se),m=B(ee*ie*de),x=B(fe*ue),A=B((we+oe)*(w+se)-te-ae),M=x-m,U=x+m,k=B(ae-X*te),h=B(A*M),s=B(U*k),o=B(A*k),p=B(M*U);return new $(h,s,p,o)}subtract(G){return this.add(G.negate())}wNAF(G){return L.wNAFCached(this,G,$.normalizeZ)}multiply(G){const X=G;Xt("scalar",X,ct,n);const{p:ie,f:we}=this.wNAF(X);return $.normalizeZ([ie,we])[0]}multiplyUnsafe(G,X=$.ZERO){const ie=G;return Xt("scalar",ie,gt,n),ie===gt?P:this.is0()||ie===ct?this:L.wNAFCachedUnsafe(this,ie,$.normalizeZ,X)}isSmallOrder(){return this.multiplyUnsafe(y).is0()}isTorsionFree(){return L.unsafeLadder(this,n).is0()}toAffine(G){return W(this,G)}clearCofactor(){const{h:G}=e;return G===ct?this:this.multiplyUnsafe(G)}static fromHex(G,X=!1){const{d:ie,a:we}=e,oe=r.BYTES;G=at("pointHex",G,oe),zr("zip215",X);const fe=G.slice(),ee=G[oe-1];fe[oe-1]=ee&-129;const w=Yr(fe),se=X?_:r.ORDER;Xt("pointHex.y",w,gt,se);const ue=B(w*w),de=B(ue-ct),te=B(ie*ue-we);let{isValid:ae,value:m}=I(de,te);if(!ae)throw new Error("Point.fromHex: invalid y coordinate");const x=(m&ct)===ct,A=(ee&128)!==0;if(!X&&m===gt&&A)throw new Error("Point.fromHex: x=0 and x_0=1");return A!==x&&(m=B(-m)),$.fromAffine({x:m,y:w})}static fromPrivateKey(G){return D(G).point}toRawBytes(){const{x:G,y:X}=this.toAffine(),ie=Ln(X,r.BYTES);return ie[ie.length-1]|=G&ct?128:0,ie}toHex(){return pr(this.toRawBytes())}}$.BASE=new $(e.Gx,e.Gy,ct,B(e.Gx*e.Gy)),$.ZERO=new $(gt,ct,ct,gt);const{BASE:re,ZERO:P}=$,L=ka($,u*8);function Z(H){return Ce(H,n)}function Q(H){return Z(Yr(H))}function D(H){const G=r.BYTES;H=at("private key",H,G);const X=at("hashed private key",c(H),2*G),ie=v(X.slice(0,G)),we=X.slice(G,2*G),oe=Q(ie),fe=re.multiply(oe),ee=fe.toRawBytes();return{head:ie,prefix:we,scalar:oe,point:fe,pointBytes:ee}}function J(H){return D(H).pointBytes}function he(H=new Uint8Array,...G){const X=je(...G);return Q(c(g(X,at("context",H),!!i)))}function le(H,G,X={}){H=at("message",H),i&&(H=i(H));const{prefix:ie,scalar:we,pointBytes:oe}=D(G),fe=he(X.context,ie,H),ee=re.multiply(fe).toRawBytes(),w=he(X.context,ee,oe,H),se=Z(fe+w*we);Xt("signature.s",se,gt,n);const ue=je(ee,Ln(se,r.BYTES));return at("result",ue,r.BYTES*2)}const S=T0;function O(H,G,X,ie=S){const{context:we,zip215:oe}=ie,fe=r.BYTES;H=at("signature",H,2*fe),G=at("message",G),X=at("publicKey",X,fe),oe!==void 0&&zr("zip215",oe),i&&(G=i(G));const ee=Yr(H.slice(fe,2*fe));let w,se,ue;try{w=$.fromHex(X,oe),se=$.fromHex(H.slice(0,fe),oe),ue=re.multiplyUnsafe(ee)}catch{return!1}if(!oe&&w.isSmallOrder())return!1;const de=he(we,se.toRawBytes(),w.toRawBytes(),G);return se.add(w.multiplyUnsafe(de)).subtract(ue).clearCofactor().equals($.ZERO)}return re._setWindowSize(8),{CURVE:e,getPublicKey:J,sign:le,verify:O,ExtendedPoint:$,utils:{getExtendedPublicKey:D,randomPrivateKey:()=>l(r.BYTES),precompute(H=8,G=$.BASE){return G._setWindowSize(H),G.multiply(BigInt(3)),G}}}}/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */const ps=BigInt("57896044618658097711785492504343953926634992332820282019728792003956564819949"),Ls=BigInt("19681161376707505956807079304988542015446066515923890162744021073123829784752");BigInt(0);const I0=BigInt(1),Xs=BigInt(2);BigInt(3);const R0=BigInt(5),U0=BigInt(8);function O0(t){const e=BigInt(10),r=BigInt(20),n=BigInt(40),i=BigInt(80),c=ps,u=t*t%c*t%c,y=At(u,Xs,c)*u%c,_=At(y,I0,c)*t%c,B=At(_,R0,c)*_%c,N=At(B,e,c)*B%c,I=At(N,r,c)*N%c,v=At(I,n,c)*I%c,g=At(v,i,c)*v%c,q=At(g,i,c)*v%c,C=At(q,e,c)*B%c;return{pow_p_5_8:At(C,Xs,c)*t%c,b2:u}}function F0(t){return t[0]&=248,t[31]&=127,t[31]|=64,t}function P0(t,e){const r=ps,n=Ce(e*e*e,r),i=Ce(n*n*e,r),c=O0(t*i).pow_p_5_8;let l=Ce(t*n*c,r);const u=Ce(e*l*l,r),y=l,_=Ce(l*Ls,r),B=u===t,N=u===Ce(-t,r),I=u===Ce(-t*Ls,r);return B&&(l=y),(N||I)&&(l=_),bf(l,r)&&(l=Ce(-l,r)),{isValid:B||N,value:l}}const M0=(()=>sn(ps,void 0,!0))(),k0=(()=>({a:BigInt(-1),d:BigInt("37095705934669439343138083508754565189542113879843219016388785533085940283555"),Fp:M0,n:BigInt("7237005577332262213973186563042994240857116359379907606001950938285454250989"),h:U0,Gx:BigInt("15112221349535400772501151409588531511454012693041857206046113283949847762202"),Gy:BigInt("46316835694926478169428394003475163141307993866256225615783033603165251855960"),hash:A0,randomBytes:lo,adjustScalarBytes:F0,uvRatio:P0}))(),C0=(()=>N0(k0))();var Js=globalThis&&globalThis.__classPrivateFieldSet||function(t,e,r,n,i){if(n==="m")throw new TypeError("Private method is not writable");if(n==="a"&&!i)throw new TypeError("Private accessor was defined without a setter");if(typeof e=="function"?t!==e||!i:!e.has(t))throw new TypeError("Cannot write private member to an object whose class did not declare it");return n==="a"?i.call(t,r):i?i.value=r:e.set(t,r),r},st=globalThis&&globalThis.__classPrivateFieldGet||function(t,e,r,n){if(r==="a"&&!n)throw new TypeError("Private accessor was defined without a getter");if(typeof e=="function"?t!==e||!n:!e.has(t))throw new TypeError("Cannot read private member from an object whose class did not declare it");return r==="m"?n:r==="a"?n.call(t):n?n.value:e.get(t)},tt,Gr,Ka,Wa;class $0{constructor(e={}){tt.set(this,void 0),Gr.set(this,void 0),this[Ka]=this.entries.bind(this),this[Wa]="ExpirableMap";const{source:r=[],expirationTime:n=10*60*1e3}=e,i=Date.now();Js(this,tt,new Map([...r].map(([c,l])=>[c,{value:l,timestamp:i}])),"f"),Js(this,Gr,n,"f")}prune(){const e=Date.now();for(const[r,n]of st(this,tt,"f").entries())e-n.timestamp>st(this,Gr,"f")&&st(this,tt,"f").delete(r);return this}set(e,r){this.prune();const n={value:r,timestamp:Date.now()};return st(this,tt,"f").set(e,n),this}get(e){const r=st(this,tt,"f").get(e);if(r!==void 0){if(Date.now()-r.timestamp>st(this,Gr,"f")){st(this,tt,"f").delete(e);return}return r.value}}clear(){st(this,tt,"f").clear()}entries(){const e=st(this,tt,"f").entries();return function*(){for(const[n,i]of e)yield[n,i.value]}()}values(){const e=st(this,tt,"f").values();return function*(){for(const n of e)yield n.value}()}keys(){return st(this,tt,"f").keys()}forEach(e,r){for(const[n,i]of st(this,tt,"f").entries())e.call(r,i.value,n,this)}has(e){return st(this,tt,"f").has(e)}delete(e){return st(this,tt,"f").delete(e)}get size(){return st(this,tt,"f").size}}tt=new WeakMap,Gr=new WeakMap,Ka=Symbol.iterator,Wa=Symbol.toStringTag;const Qs=t=>{if(t<=127)return 1;if(t<=255)return 2;if(t<=65535)return 3;if(t<=16777215)return 4;throw new Error("Length too long (> 4 bytes)")},Ds=(t,e,r)=>{if(r<=127)return t[e]=r,1;if(r<=255)return t[e]=129,t[e+1]=r,2;if(r<=65535)return t[e]=130,t[e+1]=r>>8,t[e+2]=r,3;if(r<=16777215)return t[e]=131,t[e+1]=r>>16,t[e+2]=r>>8,t[e+3]=r,4;throw new Error("Length too long (> 4 bytes)")},Qi=(t,e)=>{if(t[e]<128)return 1;if(t[e]===128)throw new Error("Invalid length 0");if(t[e]===129)return 2;if(t[e]===130)return 3;if(t[e]===131)return 4;throw new Error("Length too long (> 4 bytes)")},q0=(t,e)=>{const r=Qi(t,e);if(r===1)return t[e];if(r===2)return t[e+1];if(r===3)return(t[e+1]<<8)+t[e+2];if(r===4)return(t[e+1]<<16)+(t[e+2]<<8)+t[e+3];throw new Error("Length too long (> 4 bytes)")};Uint8Array.from([48,12,6,10,43,6,1,4,1,131,184,67,1,1]);const eo=Uint8Array.from([48,5,6,3,43,101,112]);Uint8Array.from([48,16,6,7,42,134,72,206,61,2,1,6,5,43,129,4,0,10]);function V0(t,e){const r=2+Qs(t.byteLength+1),n=e.byteLength+r+t.byteLength;let i=0;const c=new Uint8Array(1+Qs(n)+n);return c[i++]=48,i+=Ds(c,i,n),c.set(e,i),i+=e.byteLength,c[i++]=3,i+=Ds(c,i,t.byteLength+1),c[i++]=0,c.set(new Uint8Array(t),i),c}const G0=(t,e)=>{let r=0;const n=(u,y)=>{if(i[r++]!==u)throw new Error("Expected: "+y)},i=new Uint8Array(t);if(n(48,"sequence"),r+=Qi(i,r),!ei(i.slice(r,r+e.byteLength),e))throw new Error("Not the expected OID.");r+=e.byteLength,n(3,"bit string");const c=q0(i,r)-1;r+=Qi(i,r),n(0,"0 padding");const l=i.slice(r);if(c!==l.length)throw new Error(`DER payload mismatch: Expected length ${c} actual length ${l.length}`);return l};var to=globalThis&&globalThis.__classPrivateFieldSet||function(t,e,r,n,i){if(n==="m")throw new TypeError("Private method is not writable");if(n==="a"&&!i)throw new TypeError("Private accessor was defined without a setter");if(typeof e=="function"?t!==e||!i:!e.has(t))throw new TypeError("Cannot write private member to an object whose class did not declare it");return n==="a"?i.call(t,r):i?i.value=r:e.set(t,r),r},ro=globalThis&&globalThis.__classPrivateFieldGet||function(t,e,r,n){if(r==="a"&&!n)throw new TypeError("Private accessor was defined without a getter");if(typeof e=="function"?t!==e||!n:!e.has(t))throw new TypeError("Cannot read private member from an object whose class did not declare it");return r==="m"?n:r==="a"?n.call(t):n?n.value:e.get(t)},Un,On;class ur{constructor(e){if(Un.set(this,void 0),On.set(this,void 0),e.byteLength!==ur.RAW_KEY_LENGTH)throw new Error("An Ed25519 public key must be exactly 32bytes long");to(this,Un,e,"f"),to(this,On,ur.derEncode(e),"f")}static from(e){return this.fromDer(e.toDer())}static fromRaw(e){return new ur(e)}static fromDer(e){return new ur(this.derDecode(e))}static derEncode(e){return V0(e,eo).buffer}static derDecode(e){const r=G0(e,eo);if(r.length!==this.RAW_KEY_LENGTH)throw new Error("An Ed25519 public key must be exactly 32bytes long");return r}get rawKey(){return ro(this,Un,"f")}get derKey(){return ro(this,On,"f")}toDer(){return this.derKey}toRaw(){return this.rawKey}}Un=new WeakMap,On=new WeakMap;ur.RAW_KEY_LENGTH=32;class H0{constructor(){this.observers=[]}subscribe(e){this.observers.push(e)}unsubscribe(e){this.observers=this.observers.filter(r=>r!==e)}notify(e,...r){this.observers.forEach(n=>n(e,...r))}}class j0 extends H0{constructor(){super()}print(e,...r){this.notify({message:e,level:"info"},...r)}warn(e,...r){this.notify({message:e,level:"warn"},...r)}error(e,r,...n){this.notify({message:e,level:"error",error:r},...n)}}var vt=globalThis&&globalThis.__classPrivateFieldSet||function(t,e,r,n,i){if(n==="m")throw new TypeError("Private method is not writable");if(n==="a"&&!i)throw new TypeError("Private accessor was defined without a setter");if(typeof e=="function"?t!==e||!i:!e.has(t))throw new TypeError("Cannot write private member to an object whose class did not declare it");return n==="a"?i.call(t,r):i?i.value=r:e.set(t,r),r},et=globalThis&&globalThis.__classPrivateFieldGet||function(t,e,r,n){if(r==="a"&&!n)throw new TypeError("Private accessor was defined without a getter");if(typeof e=="function"?t!==e||!n:!e.has(t))throw new TypeError("Cannot read private member from an object whose class did not declare it");return r==="m"?n:r==="a"?n.call(t):n?n.value:e.get(t)},Tt,Fn,Pn,Mn,kn,Cn,$n,qn,_r;const Za=.5,La=1.5,Xa=500,Ja=6e4,Qa=9e5,Da=10;class fi{constructor(e=fi.default){Tt.set(this,void 0),Fn.set(this,void 0),Pn.set(this,void 0),Mn.set(this,void 0),kn.set(this,void 0),Cn.set(this,void 0),$n.set(this,void 0),qn.set(this,void 0),_r.set(this,0);const{initialInterval:r=Xa,randomizationFactor:n=Za,multiplier:i=La,maxInterval:c=Ja,maxElapsedTime:l=Qa,maxIterations:u=Da,date:y=Date}=e;vt(this,Tt,r,"f"),vt(this,Fn,n,"f"),vt(this,Pn,i,"f"),vt(this,Mn,c,"f"),vt(this,qn,y,"f"),vt(this,kn,y.now(),"f"),vt(this,Cn,l,"f"),vt(this,$n,u,"f")}get ellapsedTimeInMsec(){return et(this,qn,"f").now()-et(this,kn,"f")}get currentInterval(){return et(this,Tt,"f")}get count(){return et(this,_r,"f")}get randomValueFromInterval(){const e=et(this,Fn,"f")*et(this,Tt,"f"),r=et(this,Tt,"f")-e,n=et(this,Tt,"f")+e;return Math.random()*(n-r)+r}incrementCurrentInterval(){var e;return vt(this,Tt,Math.min(et(this,Tt,"f")*et(this,Pn,"f"),et(this,Mn,"f")),"f"),vt(this,_r,(e=et(this,_r,"f"),e++,e),"f"),et(this,Tt,"f")}next(){return this.ellapsedTimeInMsec>=et(this,Cn,"f")||et(this,_r,"f")>=et(this,$n,"f")?null:(this.incrementCurrentInterval(),this.randomValueFromInterval)}}Tt=new WeakMap,Fn=new WeakMap,Pn=new WeakMap,Mn=new WeakMap,kn=new WeakMap,Cn=new WeakMap,$n=new WeakMap,qn=new WeakMap,_r=new WeakMap;fi.default={initialInterval:Xa,randomizationFactor:Za,multiplier:La,maxInterval:Ja,maxElapsedTime:Qa,maxIterations:Da,date:Date};var Qe=globalThis&&globalThis.__classPrivateFieldSet||function(t,e,r,n,i){if(n==="m")throw new TypeError("Private method is not writable");if(n==="a"&&!i)throw new TypeError("Private accessor was defined without a setter");if(typeof e=="function"?t!==e||!i:!e.has(t))throw new TypeError("Cannot write private member to an object whose class did not declare it");return n==="a"?i.call(t,r):i?i.value=r:e.set(t,r),r},ce=globalThis&&globalThis.__classPrivateFieldGet||function(t,e,r,n){if(r==="a"&&!n)throw new TypeError("Private accessor was defined without a getter");if(typeof e=="function"?t!==e||!n:!e.has(t))throw new TypeError("Cannot read private member from an object whose class did not declare it");return r==="m"?n:r==="a"?n.call(t):n?n.value:e.get(t)},rt,rr,Nr,St,Pt,Tr,Hr,xr,mt,bt,nr,ir,jr,Er,Br,sr,cr,ec,Vn,Gn,or,Mt;(function(t){t.Received="received",t.Processing="processing",t.Replied="replied",t.Rejected="rejected",t.Unknown="unknown",t.Done="done"})(Mt||(Mt={}));const bn=60*1e3,z0="308182301d060d2b0601040182dc7c0503010201060c2b0601040182dc7c05030201036100814c0e6ec71fab583b08bd81373c255c3c371b2e84863c98a4f1e08b74235d14fb5d9c0cd546d9685f913a0c0b2cc5341583bf4b4392e467db96d65b9bb4cb717112f8472e0d5a4d14505ffd7484b01291091c5f87b98883463f98091a0baaae",Y0="aaaaa-aa",K0="ic0.app",W0=".ic0.app",Z0="icp0.io",L0=".icp0.io",X0="icp-api.io",J0=".icp-api.io";class Pi extends $e{constructor(e){super(e),this.message=e}}class _n extends $e{constructor(e){super(e),this.message=e}}function Q0(){let t;if(typeof window<"u")if(window.fetch)t=window.fetch.bind(window);else throw new Pi("Fetch implementation was not available. You appear to be in a browser context, but window.fetch was not present.");else if(typeof global<"u")if(global.fetch)t=global.fetch.bind(global);else throw new Pi("Fetch implementation was not available. You appear to be in a Node.js context, but global.fetch was not available.");else typeof self<"u"&&self.fetch&&(t=self.fetch.bind(self));if(t)return t;throw new Pi("Fetch implementation was not available. Please provide fetch to the HttpAgent constructor, or ensure it is available in the window or global context.")}function D0(t){let e;if(t!==void 0)!t.match(/^[a-z]+:/)&&typeof window<"u"?e=new URL(window.location.protocol+"//"+t):e=new URL(t);else{const r=["ic0.app","icp0.io","127.0.0.1","localhost"],n=[".github.dev",".gitpod.io"],i=typeof window<"u"?window.location:void 0,c=i==null?void 0:i.hostname;let l;c&&typeof c=="string"&&(n.some(u=>c.endsWith(u))?l=c:l=r.find(u=>c.endsWith(u))),i&&l?e=new URL(`${i.protocol}//${l}${i.port?":"+i.port:""}`):e=new URL("https://icp-api.io")}return e.toString()}class Sr{constructor(e={}){var r,n;rt.add(this),rr.set(this,null),Nr.set(this,!1),St.set(this,void 0),Pt.set(this,void 0),Tr.set(this,void 0),Hr.set(this,void 0),xr.set(this,0),mt.set(this,void 0),bt.set(this,void 0),nr.set(this,void 0),ir.set(this,void 0),this._isAgent=!0,this.config={},jr.set(this,0),this.log=new j0,Er.set(this,[]),Br.set(this,[]),sr.set(this,new $0({expirationTime:5*60*1e3})),cr.set(this,!0),Gn.set(this,(l,u)=>{if(ce(this,cr,"f")===!1)return l;if(!u)throw new It("Invalid signature from replica signed query: no matching node key found.");const{status:y,signatures:_=[],requestId:B}=l,N=new TextEncoder().encode("\vic-response");for(const I of _){const{timestamp:v,identity:g}=I,q=ve.fromUint8Array(g).toText();let C;if(y==="replied"){const{reply:P}=l;C=Zn({status:y,reply:P,timestamp:BigInt(v),request_id:B})}else if(y==="rejected"){const{reject_code:P,reject_message:L,error_code:Z}=l;C=Zn({status:y,reject_code:P,reject_message:L,error_code:Z,timestamp:BigInt(v),request_id:B})}else throw new Error(`Unknown status: ${y}`);const W=Ot(N,new Uint8Array(C)),Y=u==null?void 0:u.nodeKeys.get(q);if(!Y)throw new It("Invalid signature from replica signed query: no matching node key found.");const $=ur.fromDer(Y).rawKey;if(C0.verify(I.signature,new Uint8Array(W),new Uint8Array($)))return l;throw new It(`Invalid signature from replica ${q} signed query.`)}return l}),this.config=e,Qe(this,Pt,e.fetch||Q0()||fetch.bind(global),"f"),Qe(this,Tr,e.fetchOptions,"f"),Qe(this,Hr,e.callOptions,"f"),Qe(this,Nr,(r=e.shouldFetchRootKey)!==null&&r!==void 0?r:!1,"f"),e.rootKey?this.rootKey=e.rootKey:ce(this,Nr,"f")?this.rootKey=null:this.rootKey=zn(z0);const i=D0(e.host);this.host=new URL(i),e.verifyQuerySignatures!==void 0&&Qe(this,cr,e.verifyQuerySignatures,"f"),Qe(this,bt,(n=e.retryTimes)!==null&&n!==void 0?n:3,"f");const c=()=>new fi({maxIterations:ce(this,bt,"f")});if(Qe(this,nr,e.backoffStrategy||c,"f"),this.host.hostname.endsWith(W0)?this.host.hostname=K0:this.host.hostname.endsWith(L0)?this.host.hostname=Z0:this.host.hostname.endsWith(J0)&&(this.host.hostname=X0),e.credentials){const{name:l,password:u}=e.credentials;Qe(this,mt,`${l}${u?":"+u:""}`,"f")}if(Qe(this,St,Promise.resolve(e.identity||new Ns),"f"),e.ingressExpiryInMinutes&&e.ingressExpiryInMinutes>5)throw new $e(`The maximum ingress expiry time is 5 minutes. Provided ingress expiry time is ${e.ingressExpiryInMinutes} minutes.`);if(e.ingressExpiryInMinutes&&e.ingressExpiryInMinutes<=0)throw new $e(`Ingress expiry time must be greater than 0. Provided ingress expiry time is ${e.ingressExpiryInMinutes} minutes.`);Qe(this,ir,e.ingressExpiryInMinutes||5,"f"),this.addTransform("update",Us(Ki)),e.useQueryNonces&&this.addTransform("query",Us(Ki)),e.logToConsole&&this.log.subscribe(l=>{l.level==="error"?console.error(l.message):l.level==="warn"?console.warn(l.message):console.log(l.message)})}get waterMark(){return ce(this,jr,"f")}static createSync(e={}){return new this(Object.assign({},e))}static async create(e={shouldFetchRootKey:!1}){const r=Sr.createSync(e),n=[r.syncTime()];return r.host.toString()!=="https://icp-api.io"&&e.shouldFetchRootKey&&n.push(r.fetchRootKey()),await Promise.all(n),r}static async from(e){var r;try{return"config"in e?await Sr.create(e.config):await Sr.create({fetch:e._fetch,fetchOptions:e._fetchOptions,callOptions:e._callOptions,host:e._host.toString(),identity:(r=e._identity)!==null&&r!==void 0?r:void 0})}catch{throw new $e("Failed to create agent from provided agent")}}isLocal(){const e=this.host.hostname;return e==="127.0.0.1"||e.endsWith("127.0.0.1")}addTransform(e,r,n=r.priority||0){if(e==="update"){const i=ce(this,Br,"f").findIndex(c=>(c.priority||0)<n);ce(this,Br,"f").splice(i>=0?i:ce(this,Br,"f").length,0,Object.assign(r,{priority:n}))}else if(e==="query"){const i=ce(this,Er,"f").findIndex(c=>(c.priority||0)<n);ce(this,Er,"f").splice(i>=0?i:ce(this,Er,"f").length,0,Object.assign(r,{priority:n}))}}async getPrincipal(){if(!ce(this,St,"f"))throw new _n("This identity has expired due this application's security policy. Please refresh your authentication.");return(await ce(this,St,"f")).getPrincipal()}async call(e,r,n){var i,c;await ce(this,rt,"m",or).call(this);const l=(i=r.callSync)!==null&&i!==void 0?i:!0,u=await(n!==void 0?await n:await ce(this,St,"f"));if(!u)throw new _n("This identity has expired due this application's security policy. Please refresh your authentication.");const y=ve.from(e),_=r.effectiveCanisterId?ve.from(r.effectiveCanisterId):y,B=u.getPrincipal()||ve.anonymous();let N=new hn(ce(this,ir,"f")*bn);Math.abs(ce(this,xr,"f"))>1e3*30&&(N=new hn(ce(this,ir,"f")*bn+ce(this,xr,"f")));const I={request_type:Yi.Call,canister_id:y,method_name:r.methodName,arg:r.arg,sender:B,ingress_expiry:N};let v=await this._transform({request:{body:null,method:"POST",headers:Object.assign({"Content-Type":"application/cbor"},ce(this,mt,"f")?{Authorization:"Basic "+btoa(ce(this,mt,"f"))}:{})},endpoint:"call",body:I});const g=v.body.nonce?q(v.body.nonce):void 0;I.nonce=g;function q($){return new Uint8Array($)}v=await u.transformRequest(v);const C=Ai(v.body),W=ce(this,nr,"f").call(this),Y=Ss(I);try{const $=()=>(this.log.print(`fetching "/api/v3/canister/${_.toText()}/call" with request:`,v),ce(this,Pt,"f").call(this,""+new URL(`/api/v3/canister/${_.toText()}/call`,this.host),Object.assign(Object.assign(Object.assign({},ce(this,Hr,"f")),v.request),{body:C}))),re=()=>(this.log.print(`fetching "/api/v2/canister/${_.toText()}/call" with request:`,v),ce(this,Pt,"f").call(this,""+new URL(`/api/v2/canister/${_.toText()}/call`,this.host),Object.assign(Object.assign(Object.assign({},ce(this,Hr,"f")),v.request),{body:C}))),L=await ce(this,rt,"m",Vn).call(this,{request:l?$:re,backoff:W,tries:0}),Z=await L.arrayBuffer(),Q=L.status===200&&Z.byteLength>0?qt(Z):null;if(Q&&"certificate"in Q){const D=await this.parseTimeFromResponse({certificate:Q.certificate});Qe(this,jr,D,"f")}return{requestId:Y,response:{ok:L.ok,status:L.status,statusText:L.statusText,body:Q,headers:qr(L.headers)},requestDetails:I}}catch($){if($.message.includes("v3 api not supported."))return this.log.warn("v3 api not supported. Fall back to v2"),this.call(e,Object.assign(Object.assign({},r),{callSync:!1}),n);const re=`Error while making call: ${(c=$.message)!==null&&c!==void 0?c:String($)}`,P=new cf(re,$,Xe(Y),Xe(v.body.sender_pubkey),Xe(v.body.sender_sig),String(v.body.content.ingress_expiry._value));throw this.log.error(re,P),P}}async query(e,r,n){var i,c,l,u;await ce(this,rt,"m",or).call(this);const y=ce(this,nr,"f").call(this),_=r.effectiveCanisterId?ve.from(r.effectiveCanisterId):ve.from(e);this.log.print(`ecid ${_.toString()}`),this.log.print(`canisterId ${e.toString()}`);let B,N;const I=await(n!==void 0?n:ce(this,St,"f"));if(!I)throw new _n("This identity has expired due this application's security policy. Please refresh your authentication.");const v=ve.from(e),g=(I==null?void 0:I.getPrincipal())||ve.anonymous(),q={request_type:"query",canister_id:v,method_name:r.methodName,arg:r.arg,sender:g,ingress_expiry:new hn(ce(this,ir,"f")*bn)},C=Ss(q);B=await this._transform({request:{method:"POST",headers:Object.assign({"Content-Type":"application/cbor"},ce(this,mt,"f")?{Authorization:"Basic "+btoa(ce(this,mt,"f"))}:{})},endpoint:"read",body:q}),B=await(I==null?void 0:I.transformRequest(B));const W=Ai(B.body),Y={canister:v.toText(),ecid:_,transformedRequest:B,body:W,requestId:C,backoff:y,tries:0},$=async()=>({requestDetails:q,query:await ce(this,rt,"m",ec).call(this,Y)}),re=async()=>{if(!ce(this,cr,"f"))return;const P=ce(this,sr,"f").get(_.toString());return P||(await this.fetchSubnetKeys(_.toString()),ce(this,sr,"f").get(_.toString()))};try{const[P,L]=await Promise.all([$(),re()]);N=P;const{requestDetails:Z,query:Q}=N,D=Object.assign(Object.assign({},Q),{requestDetails:Z});if(this.log.print("Query response:",D),!ce(this,cr,"f"))return D;try{return ce(this,Gn,"f").call(this,D,L)}catch{this.log.warn("Query response verification failed. Retrying with fresh subnet keys."),ce(this,sr,"f").delete(e.toString()),await this.fetchSubnetKeys(_.toString());const he=ce(this,sr,"f").get(e.toString());if(!he)throw new It("Invalid signature from replica signed query: no matching node key found.");return ce(this,Gn,"f").call(this,D,he)}}catch(P){const L=`Error while making call: ${(i=P.message)!==null&&i!==void 0?i:String(P)}`,Z=new uf(L,P,String(C),Xe((c=B==null?void 0:B.body)===null||c===void 0?void 0:c.sender_pubkey),Xe((l=B==null?void 0:B.body)===null||l===void 0?void 0:l.sender_sig),String((u=B==null?void 0:B.body)===null||u===void 0?void 0:u.content.ingress_expiry._value));throw this.log.error(L,Z),Z}}async createReadStateRequest(e,r){await ce(this,rt,"m",or).call(this);const n=await(r!==void 0?await r:await ce(this,St,"f"));if(!n)throw new _n("This identity has expired due this application's security policy. Please refresh your authentication.");const i=(n==null?void 0:n.getPrincipal())||ve.anonymous(),c=await this._transform({request:{method:"POST",headers:Object.assign({"Content-Type":"application/cbor"},ce(this,mt,"f")?{Authorization:"Basic "+btoa(ce(this,mt,"f"))}:{})},endpoint:"read_state",body:{request_type:"read_state",paths:e.paths,sender:i,ingress_expiry:new hn(ce(this,ir,"f")*bn)}});return n==null?void 0:n.transformRequest(c)}async readState(e,r,n,i){var c,l,u,y;function _(q){for(const C of q.paths){const[W,Y]=C,$=new TextEncoder().encode("request_status");if(ei(W,$))return Y}}const B=_(r);await ce(this,rt,"m",or).call(this);const N=typeof e=="string"?ve.fromText(e):e,I=i??await this.createReadStateRequest(r,n),v=Ai(I.body);this.log.print(`fetching "/api/v2/canister/${N}/read_state" with request:`,I);const g=ce(this,nr,"f").call(this);try{const q=await ce(this,rt,"m",Vn).call(this,{request:()=>ce(this,Pt,"f").call(this,""+new URL(`/api/v2/canister/${N.toString()}/read_state`,this.host),Object.assign(Object.assign(Object.assign({},ce(this,Tr,"f")),I.request),{body:v})),backoff:g,tries:0});if(!q.ok)throw new Error(`Server returned an error:
  Code: ${q.status} (${q.statusText})
  Body: ${await q.text()}
`);const C=qt(await q.arrayBuffer());this.log.print("Read state response:",C);const W=await this.parseTimeFromResponse(C);return W>0&&(this.log.print("Read state response time:",W),Qe(this,jr,W,"f")),C}catch(q){const C=`Caught exception while attempting to read state: ${(c=q.message)!==null&&c!==void 0?c:String(q)}`,W=new ff(C,q,String(B),Xe((l=I==null?void 0:I.body)===null||l===void 0?void 0:l.sender_pubkey),Xe((u=I==null?void 0:I.body)===null||u===void 0?void 0:u.sender_sig),String((y=I==null?void 0:I.body)===null||y===void 0?void 0:y.content.ingress_expiry._value));throw this.log.error(C,W),W}}async parseTimeFromResponse(e){let r;if(e.certificate){const n=qt(e.certificate);if(n&&"tree"in n)r=n.tree;else throw new Error("Could not decode time from response");const i=Fr(["time"],r);if(i.status!==ze.Found)throw new Error("Time was not found in the response or was not in its expected format.");if(!(i.value instanceof ArrayBuffer)&&!ArrayBuffer.isView(i))throw new Error("Time was not found in the response or was not in its expected format.");const c=ds(go(i.value));return this.log.print("Time from response:",c),this.log.print("Time from response in milliseconds:",Number(c)),Number(c)}else this.log.warn("No certificate found in response");return 0}async syncTime(e){await ce(this,rt,"m",or).call(this);const r=await Fc(()=>Promise.resolve().then(()=>Qf),void 0),n=Date.now();try{e||this.log.print("Syncing time with the IC. No canisterId provided, so falling back to ryjl3-tyaaa-aaaaa-aaaba-cai");const i=Sr.createSync({identity:new Ns,host:this.host.toString(),fetch:ce(this,Pt,"f"),retryTimes:0}),l=(await r.request({canisterId:e??ve.from("ryjl3-tyaaa-aaaaa-aaaba-cai"),agent:i,paths:["time"]})).get("time");l&&(Qe(this,xr,Number(l)-Number(n),"f"),this.log.notify({message:`Syncing time: offset of ${ce(this,xr,"f")}`,level:"info"}))}catch(i){this.log.error("Caught exception while attempting to sync time",i)}}async status(){const e=ce(this,mt,"f")?{Authorization:"Basic "+btoa(ce(this,mt,"f"))}:{};this.log.print('fetching "/api/v2/status"');const r=ce(this,nr,"f").call(this),n=await ce(this,rt,"m",Vn).call(this,{backoff:r,request:()=>ce(this,Pt,"f").call(this,""+new URL("/api/v2/status",this.host),Object.assign({headers:e},ce(this,Tr,"f"))),tries:0});return qt(await n.arrayBuffer())}async fetchRootKey(){let e;return ce(this,rr,"f")?e=await ce(this,rr,"f"):(Qe(this,rr,new Promise((r,n)=>{this.status().then(i=>{const c=i.root_key;this.rootKey=c,r(c)}).catch(n)}),"f"),e=await ce(this,rr,"f")),Qe(this,rr,null,"f"),e}invalidateIdentity(){Qe(this,St,null,"f")}replaceIdentity(e){Qe(this,St,Promise.resolve(e),"f")}async fetchSubnetKeys(e){await ce(this,rt,"m",or).call(this);const r=ve.from(e),i=(await Ha({canisterId:r,paths:["subnet"],agent:this})).get("subnet");if(i&&typeof i=="object"&&"nodeKeys"in i)return ce(this,sr,"f").set(r.toText(),i),i}_transform(e){let r=Promise.resolve(e);if(e.endpoint==="call")for(const n of ce(this,Br,"f"))r=r.then(i=>n(i).then(c=>c||i));else for(const n of ce(this,Er,"f"))r=r.then(i=>n(i).then(c=>c||i));return r}}rr=new WeakMap,Nr=new WeakMap,St=new WeakMap,Pt=new WeakMap,Tr=new WeakMap,Hr=new WeakMap,xr=new WeakMap,mt=new WeakMap,bt=new WeakMap,nr=new WeakMap,ir=new WeakMap,jr=new WeakMap,Er=new WeakMap,Br=new WeakMap,sr=new WeakMap,cr=new WeakMap,Gn=new WeakMap,rt=new WeakSet,ec=async function t(e){var r,n;const{ecid:i,transformedRequest:c,body:l,requestId:u,backoff:y,tries:_}=e,B=_===0?0:y.next();if(this.log.print(`fetching "/api/v2/canister/${i.toString()}/query" with tries:`,{tries:_,backoff:y,delay:B}),B===null)throw new $e(`Timestamp failed to pass the watermark after retrying the configured ${ce(this,bt,"f")} times. We cannot guarantee the integrity of the response since it could be a replay attack.`);B>0&&await new Promise(g=>setTimeout(g,B));let N;try{this.log.print(`fetching "/api/v2/canister/${i.toString()}/query" with request:`,c);const g=await ce(this,Pt,"f").call(this,""+new URL(`/api/v2/canister/${i.toString()}/query`,this.host),Object.assign(Object.assign(Object.assign({},ce(this,Tr,"f")),c.request),{body:l}));if(g.status===200){const q=qt(await g.arrayBuffer());N=Object.assign(Object.assign({},q),{httpDetails:{ok:g.ok,status:g.status,statusText:g.statusText,headers:qr(g.headers)},requestId:u})}else throw new vi(`Gateway returned an error:
  Code: ${g.status} (${g.statusText})
  Body: ${await g.text()}
`,{ok:g.ok,status:g.status,statusText:g.statusText,headers:qr(g.headers)})}catch(g){if(_<ce(this,bt,"f"))return this.log.warn(`Caught exception while attempting to make query:
  ${g}
  Retrying query.`),await ce(this,rt,"m",t).call(this,Object.assign(Object.assign({},e),{tries:_+1}));throw g}const I=(n=(r=N.signatures)===null||r===void 0?void 0:r[0])===null||n===void 0?void 0:n.timestamp;if(!ce(this,cr,"f"))return N;if(!I)throw new Error("Timestamp not found in query response. This suggests a malformed or malicious response.");const v=Number(BigInt(I)/BigInt(1e6));if(this.log.print("watermark and timestamp",{waterMark:this.waterMark,timestamp:v}),Number(this.waterMark)>v){const g=new $e("Timestamp is below the watermark. Retrying query.");if(this.log.error("Timestamp is below",g,{timestamp:I,waterMark:this.waterMark}),_<ce(this,bt,"f"))return await ce(this,rt,"m",t).call(this,Object.assign(Object.assign({},e),{tries:_+1}));throw new $e(`Timestamp failed to pass the watermark after retrying the configured ${ce(this,bt,"f")} times. We cannot guarantee the integrity of the response since it could be a replay attack.`)}return N},Vn=async function t(e){const{request:r,backoff:n,tries:i}=e,c=i===0?0:n.next();if(c===null)throw new $e(`Timestamp failed to pass the watermark after retrying the configured ${ce(this,bt,"f")} times. We cannot guarantee the integrity of the response since it could be a replay attack.`);c>0&&await new Promise(_=>setTimeout(_,c));let l;try{l=await r()}catch(_){if(ce(this,bt,"f")>i)return this.log.warn(`Caught exception while attempting to make request:
  ${_}
  Retrying request.`),await ce(this,rt,"m",t).call(this,{request:r,backoff:n,tries:i+1});throw _}if(l.ok)return l;const u=await l.clone().text(),y=`Server returned an error:
  Code: ${l.status} (${l.statusText})
  Body: ${u}
`;if(l.status===404&&l.url.includes("api/v3"))throw new vi("v3 api not supported. Fall back to v2",{ok:l.ok,status:l.status,statusText:l.statusText,headers:qr(l.headers)});if(i<ce(this,bt,"f"))return await ce(this,rt,"m",t).call(this,{request:r,backoff:n,tries:i+1});throw new vi(y,{ok:l.ok,status:l.status,statusText:l.statusText,headers:qr(l.headers)})},or=async function(){if(!this.rootKey)if(this.rootKey===null&&ce(this,Nr,"f"))await this.fetchRootKey();else throw new $e(`Invalid root key detected. The root key for this agent is ${this.rootKey} and the shouldFetchRootKey value is set to ${ce(this,Nr,"f")}. The root key should only be unknown if you are in local development. Otherwise you should avoid fetching and use the default IC Root Key or the known root key of your environment.`)};var no;(function(t){t.Error="err",t.GetPrincipal="gp",t.GetPrincipalResponse="gpr",t.Query="q",t.QueryResponse="qr",t.Call="c",t.CallResponse="cr",t.ReadState="rs",t.ReadStateResponse="rsr",t.Status="s",t.StatusResponse="sr"})(no||(no={}));function io(){const t=typeof window>"u"?typeof global>"u"?typeof self>"u"?void 0:self.ic.agent:global.ic.agent:window.ic.agent;if(!t)throw new Error("No Agent could be found.");return t}const el=5*60*1e3;function tc(){return sl(rl(tl(),1e3),il(1e3,1.2),nl(el))}function tl(){let t=!0;return async()=>t?(t=!1,!0):!1}function rl(t,e){return async(r,n,i)=>{if(await t(r,n,i))return new Promise(c=>setTimeout(c,e))}}function nl(t){const e=Date.now()+t;return async(r,n,i)=>{if(Date.now()>e)throw new Error(`Request timed out after ${t} msec:
  Request ID: ${Xe(n)}
  Request status: ${i}
`)}}function il(t,e){let r=t;return()=>new Promise(n=>setTimeout(()=>{r*=e,n()},r))}function sl(...t){return async(e,r,n)=>{for(const i of t)await i(e,r,n)}}async function rc(t,e,r,n=tc(),i,c){var l;const u=[new TextEncoder().encode("request_status"),r],y=i??await((l=t.createReadStateRequest)===null||l===void 0?void 0:l.call(t,{paths:[u]})),_=await t.readState(e,{paths:[u]},void 0,y);if(t.rootKey==null)throw new Error("Agent root key not initialized before polling");const B=await fr.create({certificate:_.certificate,rootKey:t.rootKey,canisterId:e,blsVerify:c}),N=dt(B.lookup([...u,new TextEncoder().encode("status")]));let I;switch(typeof N>"u"?I=Mt.Unknown:I=new TextDecoder().decode(N),I){case Mt.Replied:return{reply:dt(B.lookup([...u,"reply"])),certificate:B};case Mt.Received:case Mt.Unknown:case Mt.Processing:return await n(e,r,I),rc(t,e,r,n,y,c);case Mt.Rejected:{const v=new Uint8Array(dt(B.lookup([...u,"reject_code"])))[0],g=new TextDecoder().decode(dt(B.lookup([...u,"reject_message"])));throw new Error(`Call was rejected:
  Request ID: ${Xe(r)}
  Reject code: ${v}
  Reject text: ${g}
`)}case Mt.Done:throw new Error(`Call was marked as done but we never saw the reply:
  Request ID: ${Xe(r)}
`)}throw new Error("unreachable")}const ol=({IDL:t})=>{const e=t.Variant({mainnet:t.Null,testnet:t.Null}),r=t.Text,n=t.Record({network:e,address:r,min_confirmations:t.Opt(t.Nat32)}),i=t.Nat64,c=i,l=t.Nat32,u=t.Record({start_height:l,end_height:t.Opt(l),network:e}),y=t.Vec(t.Nat8),_=t.Record({tip_height:l,block_headers:t.Vec(y)}),B=t.Record({network:e}),N=t.Nat64,I=t.Vec(N),v=t.Record({network:e,filter:t.Opt(t.Variant({page:t.Vec(t.Nat8),min_confirmations:t.Nat32})),address:r}),g=t.Vec(t.Nat8),q=t.Record({txid:t.Vec(t.Nat8),vout:t.Nat32}),C=t.Record({height:t.Nat32,value:i,outpoint:q}),W=t.Record({next_page:t.Opt(t.Vec(t.Nat8)),tip_height:l,tip_block_hash:g,utxos:t.Vec(C)}),Y=t.Record({transaction:t.Vec(t.Nat8),network:e}),$=t.Principal,re=t.Record({canister_id:$,num_requested_changes:t.Opt(t.Nat64)}),P=t.Variant({from_user:t.Record({user_id:t.Principal}),from_canister:t.Record({canister_version:t.Opt(t.Nat64),canister_id:t.Principal})}),L=t.Vec(t.Nat8),Z=t.Variant({creation:t.Record({controllers:t.Vec(t.Principal)}),code_deployment:t.Record({mode:t.Variant({reinstall:t.Null,upgrade:t.Null,install:t.Null}),module_hash:t.Vec(t.Nat8)}),load_snapshot:t.Record({canister_version:t.Nat64,taken_at_timestamp:t.Nat64,snapshot_id:L}),controllers_change:t.Record({controllers:t.Vec(t.Principal)}),code_uninstall:t.Null}),Q=t.Record({timestamp_nanos:t.Nat64,canister_version:t.Nat64,origin:P,details:Z}),D=t.Record({controllers:t.Vec(t.Principal),module_hash:t.Opt(t.Vec(t.Nat8)),recent_changes:t.Vec(Q),total_num_changes:t.Nat64}),J=t.Record({canister_id:$}),he=t.Variant({controllers:t.Null,public:t.Null,allowed_viewers:t.Vec(t.Principal)}),le=t.Record({freezing_threshold:t.Nat,controllers:t.Vec(t.Principal),reserved_cycles_limit:t.Nat,log_visibility:he,wasm_memory_limit:t.Nat,memory_allocation:t.Nat,compute_allocation:t.Nat}),S=t.Record({status:t.Variant({stopped:t.Null,stopping:t.Null,running:t.Null}),memory_size:t.Nat,cycles:t.Nat,settings:le,query_stats:t.Record({response_payload_bytes_total:t.Nat,num_instructions_total:t.Nat,num_calls_total:t.Nat,request_payload_bytes_total:t.Nat}),idle_cycles_burned_per_day:t.Nat,module_hash:t.Opt(t.Vec(t.Nat8)),reserved_cycles:t.Nat}),O=t.Record({canister_id:$}),K=t.Record({freezing_threshold:t.Opt(t.Nat),controllers:t.Opt(t.Vec(t.Principal)),reserved_cycles_limit:t.Opt(t.Nat),log_visibility:t.Opt(he),wasm_memory_limit:t.Opt(t.Nat),memory_allocation:t.Opt(t.Nat),compute_allocation:t.Opt(t.Nat)}),H=t.Record({settings:t.Opt(K),sender_canister_version:t.Opt(t.Nat64)}),G=t.Record({canister_id:$}),X=t.Record({canister_id:$}),ie=t.Record({canister_id:$,snapshot_id:L}),we=t.Record({canister_id:$}),oe=t.Variant({secp256k1:t.Null}),fe=t.Record({key_id:t.Record({name:t.Text,curve:oe}),canister_id:t.Opt($),derivation_path:t.Vec(t.Vec(t.Nat8))}),ee=t.Record({public_key:t.Vec(t.Nat8),chain_code:t.Vec(t.Nat8)}),w=t.Record({canister_id:$}),se=t.Record({idx:t.Nat64,timestamp_nanos:t.Nat64,content:t.Vec(t.Nat8)}),ue=t.Record({canister_log_records:t.Vec(se)}),de=t.Record({value:t.Text,name:t.Text}),te=t.Record({status:t.Nat,body:t.Vec(t.Nat8),headers:t.Vec(de)}),ae=t.Record({url:t.Text,method:t.Variant({get:t.Null,head:t.Null,post:t.Null}),max_response_bytes:t.Opt(t.Nat64),body:t.Opt(t.Vec(t.Nat8)),transform:t.Opt(t.Record({function:t.Func([t.Record({context:t.Vec(t.Nat8),response:te})],[te],["query"]),context:t.Vec(t.Nat8)})),headers:t.Vec(de)}),m=t.Variant({reinstall:t.Null,upgrade:t.Opt(t.Record({wasm_memory_persistence:t.Opt(t.Variant({keep:t.Null,replace:t.Null})),skip_pre_upgrade:t.Opt(t.Bool)})),install:t.Null}),x=t.Record({hash:t.Vec(t.Nat8)}),A=t.Record({arg:t.Vec(t.Nat8),wasm_module_hash:t.Vec(t.Nat8),mode:m,chunk_hashes_list:t.Vec(x),target_canister:$,store_canister:t.Opt($),sender_canister_version:t.Opt(t.Nat64)}),M=t.Vec(t.Nat8),U=t.Record({arg:t.Vec(t.Nat8),wasm_module:M,mode:m,canister_id:$,sender_canister_version:t.Opt(t.Nat64)}),k=t.Record({canister_id:$}),h=t.Record({id:L,total_size:t.Nat64,taken_at_timestamp:t.Nat64}),s=t.Vec(h),o=t.Record({canister_id:$,sender_canister_version:t.Opt(t.Nat64),snapshot_id:L}),p=t.Record({start_at_timestamp_nanos:t.Nat64,subnet_id:t.Principal}),b=t.Record({num_block_failures_total:t.Nat64,node_id:t.Principal,num_blocks_proposed_total:t.Nat64}),T=t.Vec(t.Record({timestamp_nanos:t.Nat64,node_metrics:t.Vec(b)})),V=t.Record({settings:t.Opt(K),specified_id:t.Opt($),amount:t.Opt(t.Nat),sender_canister_version:t.Opt(t.Nat64)}),ne=t.Record({canister_id:$}),pe=t.Record({canister_id:$,amount:t.Nat}),ye=t.Vec(t.Nat8),xe=t.Variant({ed25519:t.Null,bip340secp256k1:t.Null}),d=t.Record({key_id:t.Record({algorithm:xe,name:t.Text}),canister_id:t.Opt($),derivation_path:t.Vec(t.Vec(t.Nat8))}),a=t.Record({public_key:t.Vec(t.Nat8),chain_code:t.Vec(t.Nat8)}),f=t.Record({key_id:t.Record({name:t.Text,curve:oe}),derivation_path:t.Vec(t.Vec(t.Nat8)),message_hash:t.Vec(t.Nat8)}),E=t.Record({signature:t.Vec(t.Nat8)}),F=t.Variant({bip341:t.Record({merkle_root_hash:t.Vec(t.Nat8)})}),z=t.Record({aux:t.Opt(F),key_id:t.Record({algorithm:xe,name:t.Text}),derivation_path:t.Vec(t.Vec(t.Nat8)),message:t.Vec(t.Nat8)}),j=t.Record({signature:t.Vec(t.Nat8)}),_e=t.Record({canister_id:$}),Ae=t.Record({canister_id:$}),Ee=t.Record({canister_id:$}),be=t.Vec(x),Re=t.Record({subnet_id:t.Principal}),Me=t.Record({replica_version:t.Text}),hi=t.Record({replace_snapshot:t.Opt(L),canister_id:$}),di=h,pi=t.Record({canister_id:$,sender_canister_version:t.Opt(t.Nat64)}),yi=t.Record({canister_id:t.Principal,settings:K,sender_canister_version:t.Opt(t.Nat64)}),gi=t.Record({chunk:t.Vec(t.Nat8),canister_id:t.Principal}),Gt=x;return t.Service({bitcoin_get_balance:t.Func([n],[c],[]),bitcoin_get_block_headers:t.Func([u],[_],[]),bitcoin_get_current_fee_percentiles:t.Func([B],[I],[]),bitcoin_get_utxos:t.Func([v],[W],[]),bitcoin_send_transaction:t.Func([Y],[],[]),canister_info:t.Func([re],[D],[]),canister_status:t.Func([J],[S],[]),clear_chunk_store:t.Func([O],[],[]),create_canister:t.Func([H],[G],[]),delete_canister:t.Func([X],[],[]),delete_canister_snapshot:t.Func([ie],[],[]),deposit_cycles:t.Func([we],[],[]),ecdsa_public_key:t.Func([fe],[ee],[]),fetch_canister_logs:t.Func([w],[ue],["query"]),http_request:t.Func([ae],[te],[]),install_chunked_code:t.Func([A],[],[]),install_code:t.Func([U],[],[]),list_canister_snapshots:t.Func([k],[s],[]),load_canister_snapshot:t.Func([o],[],[]),node_metrics_history:t.Func([p],[T],[]),provisional_create_canister_with_cycles:t.Func([V],[ne],[]),provisional_top_up_canister:t.Func([pe],[],[]),raw_rand:t.Func([],[ye],[]),schnorr_public_key:t.Func([d],[a],[]),sign_with_ecdsa:t.Func([f],[E],[]),sign_with_schnorr:t.Func([z],[j],[]),start_canister:t.Func([_e],[],[]),stop_canister:t.Func([Ae],[],[]),stored_chunks:t.Func([Ee],[be],[]),subnet_info:t.Func([Re],[Me],[]),take_canister_snapshot:t.Func([hi],[di],[]),uninstall_code:t.Func([pi],[],[]),update_settings:t.Func([yi],[],[]),upload_chunk:t.Func([gi],[Gt],[])})};class nc extends $e{constructor(e,r,n,i){super(["Call failed:",`  Canister: ${e.toText()}`,`  Method: ${r} (${n})`,...Object.getOwnPropertyNames(i).map(c=>`  "${c}": ${JSON.stringify(i[c])}`)].join(`
`)),this.canisterId=e,this.methodName=r,this.type=n,this.props=i}}class al extends nc{constructor(e,r,n){var i;super(e,r,"query",{Status:n.status,Code:(i=Mi[n.reject_code])!==null&&i!==void 0?i:`Unknown Code "${n.reject_code}"`,Message:n.reject_message}),this.result=n}}class so extends nc{constructor(e,r,n,i,c,l,u){super(e,r,"update",Object.assign({"Request ID":Xe(n)},i.body?Object.assign(Object.assign({},u?{"Error code":u}:{}),{"Reject code":String(c),"Reject message":l}):{"HTTP status code":i.status.toString(),"HTTP status text":i.statusText})),this.requestId=n,this.response=i,this.reject_code=c,this.reject_message=l,this.error_code=u}}const ht=Symbol.for("ic-agent-metadata");class li{constructor(e){this[ht]=Object.freeze(e)}static agentOf(e){return e[ht].config.agent}static interfaceOf(e){return e[ht].service}static canisterIdOf(e){return ve.from(e[ht].config.canisterId)}static async install(e,r){const n=e.mode===void 0?{install:null}:e.mode,i=e.arg?[...new Uint8Array(e.arg)]:[],c=[...new Uint8Array(e.module)],l=typeof r.canisterId=="string"?ve.fromText(r.canisterId):r.canisterId;await oo(r).install_code({mode:n,arg:i,wasm_module:c,canister_id:l,sender_canister_version:[]})}static async createCanister(e,r){function n(c){return[{controllers:c.controllers?[c.controllers]:[],compute_allocation:c.compute_allocation?[c.compute_allocation]:[],freezing_threshold:c.freezing_threshold?[c.freezing_threshold]:[],memory_allocation:c.memory_allocation?[c.memory_allocation]:[],reserved_cycles_limit:[],log_visibility:[],wasm_memory_limit:[]}]}const{canister_id:i}=await oo(e||{}).provisional_create_canister_with_cycles({amount:[],settings:n(r||{}),specified_id:[],sender_canister_version:[]});return i}static async createAndInstallCanister(e,r,n){const i=await this.createCanister(n);return await this.install(Object.assign({},r),Object.assign(Object.assign({},n),{canisterId:i})),this.createActor(e,Object.assign(Object.assign({},n),{canisterId:i}))}static createActorClass(e,r){const n=e({IDL:ou});class i extends li{constructor(l){if(!l.canisterId)throw new $e(`Canister ID is required, but received ${typeof l.canisterId} instead. If you are using automatically generated declarations, this may be because your application is not setting the canister ID in process.env correctly.`);const u=typeof l.canisterId=="string"?ve.fromText(l.canisterId):l.canisterId;super({config:Object.assign(Object.assign(Object.assign({},ic),l),{canisterId:u}),service:n});for(const[y,_]of n._fields)r!=null&&r.httpDetails&&_.annotations.push(Di),r!=null&&r.certificate&&_.annotations.push(sc),this[y]=cl(this,y,_,l.blsVerify)}}return i}static createActor(e,r){if(!r.canisterId)throw new $e(`Canister ID is required, but received ${typeof r.canisterId} instead. If you are using automatically generated declarations, this may be because your application is not setting the canister ID in process.env correctly.`);return new(this.createActorClass(e))(r)}static createActorWithHttpDetails(e,r){return new(this.createActorClass(e,{httpDetails:!0}))(r)}static createActorWithExtendedDetails(e,r,n={httpDetails:!0,certificate:!0}){return new(this.createActorClass(e,n))(r)}}function br(t,e){const r=Io(t,ao.Buffer.from(e));switch(r.length){case 0:return;case 1:return r[0];default:return r}}const ic={pollingStrategyFactory:tc},Di="http-details",sc="certificate";function cl(t,e,r,n){let i;r.annotations.includes("query")||r.annotations.includes("composite_query")?i=async(l,...u)=>{var y,_;l=Object.assign(Object.assign({},l),(_=(y=t[ht].config).queryTransform)===null||_===void 0?void 0:_.call(y,e,u,Object.assign(Object.assign({},t[ht].config),l)));const B=l.agent||t[ht].config.agent||io(),N=ve.from(l.canisterId||t[ht].config.canisterId),I=Ci(r.argTypes,u),v=await B.query(N,{methodName:e,arg:I,effectiveCanisterId:l.effectiveCanisterId}),g=Object.assign(Object.assign({},v.httpDetails),{requestDetails:v.requestDetails});switch(v.status){case"rejected":throw new al(N,e,v);case"replied":return r.annotations.includes(Di)?{httpDetails:g,result:br(r.retTypes,v.reply.arg)}:br(r.retTypes,v.reply.arg)}}:i=async(l,...u)=>{var y,_;l=Object.assign(Object.assign({},l),(_=(y=t[ht].config).callTransform)===null||_===void 0?void 0:_.call(y,e,u,Object.assign(Object.assign({},t[ht].config),l)));const B=l.agent||t[ht].config.agent||io(),{canisterId:N,effectiveCanisterId:I,pollingStrategyFactory:v}=Object.assign(Object.assign(Object.assign({},ic),t[ht].config),l),g=ve.from(N),q=I!==void 0?ve.from(I):g,C=Ci(r.argTypes,u),{requestId:W,response:Y,requestDetails:$}=await B.call(g,{methodName:e,arg:C,effectiveCanisterId:q});let re,P;if(Y.body&&Y.body.certificate){if(B.rootKey==null)throw new Error("Agent is missing root key");const D=Y.body.certificate;P=await fr.create({certificate:Yn(D),rootKey:B.rootKey,canisterId:ve.from(N),blsVerify:n});const J=[new TextEncoder().encode("request_status"),W];switch(new TextDecoder().decode(dt(P.lookup([...J,"status"])))){case"replied":re=dt(P.lookup([...J,"reply"]));break;case"rejected":{const le=new Uint8Array(dt(P.lookup([...J,"reject_code"])))[0],S=new TextDecoder().decode(dt(P.lookup([...J,"reject_message"]))),O=dt(P.lookup([...J,"error_code"])),K=O?new TextDecoder().decode(O):void 0;throw new so(g,e,W,Y,le,S,K)}}}else if(Y.body&&"reject_message"in Y.body){const{reject_code:D,reject_message:J,error_code:he}=Y.body;throw new so(g,e,W,Y,D,J,he)}if(Y.status===202){const D=v(),J=await rc(B,q,W,D,n);P=J.certificate,re=J.reply}const L=r.annotations.includes(Di),Z=r.annotations.includes(sc),Q=Object.assign(Object.assign({},Y),{requestDetails:$});if(re!==void 0)return L&&Z?{httpDetails:Q,certificate:P,result:br(r.retTypes,re)}:Z?{certificate:P,result:br(r.retTypes,re)}:L?{httpDetails:Q,result:br(r.retTypes,re)}:br(r.retTypes,re);if(r.retTypes.length===0)return L?{httpDetails:Y,result:void 0}:void 0;throw new Error(`Call was returned undefined, but type [${r.retTypes.join(",")}].`)};const c=(...l)=>i({},...l);return c.withOptions=l=>(...u)=>i(l,...u),c}function oo(t){function e(r,n){if(t.effectiveCanisterId)return{effectiveCanisterId:ve.from(t.effectiveCanisterId)};const i=n[0];let c=ve.fromHex("");return i&&typeof i=="object"&&i.target_canister&&r==="install_chunked_code"&&(c=ve.from(i.target_canister)),i&&typeof i=="object"&&i.canister_id&&(c=ve.from(i.canister_id)),{effectiveCanisterId:c}}return li.createActor(ol,Object.assign(Object.assign(Object.assign({},t),{canisterId:ve.fromHex("")}),{callTransform:e,queryTransform:e}))}const ul=({IDL:t})=>{const e=t.Record({content:t.Text,role:t.Variant({user:t.Null,assistant:t.Null,system:t.Null})});return t.Service({chat:t.Func([t.Vec(e)],[t.Text],[]),prompt:t.Func([t.Text],[t.Text],[])})},fl="bkyz2-fmaaa-aaaaa-qaaaq-cai",ll=(t,e={})=>{const r=e.agent||new Sr({...e.agentOptions});return e.agent&&e.agentOptions&&console.warn("Detected both agent and agentOptions passed to createActor. Ignoring agentOptions and proceeding with the provided agent."),r.fetchRootKey().catch(n=>{console.warn("Unable to fetch root key. Check to ensure that your local replica is running"),console.error(n)}),li.createActor(ul,{agent:r,canisterId:t,...e.actorOptions})},hl="/assets/bot-5d34918b.svg",dl="/assets/user-ba6f2aa7.svg",pl=ll(fl),yl=dl,gl=hl;var Dn,Ir,Hn;class wl{constructor(){wi(this,Ir);Cr(this,"chat",[]);Cr(this,"chatBox");Cr(this,"form");Cr(this,"askAgent",async()=>{const e=this.chat.slice(1,-1);try{console.log("Sending the following messages to the backend:"),console.log(e);const n=await pl.chat(e);console.log(n),this.chat.pop(),this.chat.push({role:{assistant:null},content:n})}catch(n){console.log(n);const c=String(n).match(/(SysTransient|CanisterReject), \\+"([^\\"]+)/);c&&alert(c[2]),this.chat.pop()}const r=document.querySelector(".msger-send-btn");r.disabled=!1,an(this,Ir,Hn).call(this)});wi(this,Dn,async e=>{e.preventDefault();const r=document.querySelector(".msger-input"),n=r.value;if(!n)return;this.chat.push({role:{user:null},content:n}),r.value="",this.chat.push({role:{assistant:null},content:"Thinking..."});const i=document.querySelector(".msger-send-btn");i.disabled=!0,an(this,Ir,Hn).call(this),this.askAgent()});this.chatBox=document.querySelector(".msger-chat"),this.form=document.querySelector(".msger-inputarea"),this.form.addEventListener("submit",gs(this,Dn)),this.chat=[{role:{assistant:null},content:"I'm a sovereign AI agent living on the Internet Computer. Ask me anything."}],an(this,Ir,Hn).call(this)}formatDate(e){const r="0"+e.getHours(),n="0"+e.getMinutes();return`${r.slice(-2)}:${n.slice(-2)}`}clearMessages(){this.chatBox.innerHTML=""}appendMessage(e){let r="user"in e.role?"right":"left",n="user"in e.role?yl:gl,i="user"in e.role?"User":"Assistant",c=e.content;const l=`
<div class="msg ${r}-msg">
  <div class="msg-img" style="background-image: url(${n})"></div>

  <div class="msg-bubble">
    <div class="msg-info">
      <div class="msg-info-name">${i}</div>
      <div class="msg-info-time">${this.formatDate(new Date)}</div>
    </div>

    <div class="msg-text">${c}</div>
  </div>
</div>
`;this.chatBox.insertAdjacentHTML("beforeend",l),this.chatBox.scrollTop+=500}}Dn=new WeakMap,Ir=new WeakSet,Hn=function(){this.clearMessages(),this.chat.forEach(e=>this.appendMessage(e))};new wl;
